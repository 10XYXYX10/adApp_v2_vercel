module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},262212,a=>{a.n(a.i(866114))},636685,a=>{a.n(a.i(88402))},144192,a=>{"use strict";a.s(["createSupport",()=>j,"createSupportMessage",()=>i]);var b=a.i(137936),c=a.i(478721),d=a.i(446129),e=a.i(559330),f=a.i(248830),g=a.i(713095);let h=async a=>{try{let b=new Date(Date.now()-864e6),c=await e.default.support.findMany({where:{status:"in_progress",updatedAt:{lt:b},id:{not:a}},select:{id:!0,respondedAt:!0}}),d=[];for(let a of c){let{id:b,respondedAt:c}=a;null!==c&&d.push(b)}d.length>0&&await e.default.support.updateMany({where:{id:{in:d}},data:{status:"closed"}})}catch(a){console.error("Auto close support error:",a)}},i=async({userType:a,supportId:b,content:g})=>{try{let{result:i,data:j,message:k}=await (0,d.security)({readOnly:!1});if(!i||!j)return{success:!1,errMsg:k,statusCode:401};if(j.userType!==a)return{success:!1,errMsg:"No permission.",statusCode:401};let l=await (0,f.rateLimit)();if(!l.success)return{success:!1,errMsg:l.message,statusCode:429};if(g.length>500)return{success:!1,errMsg:"お問い合わせ内容 は、500字以内でお願いします.",statusCode:404};let m=(0,c.dangerousCharToEntity)(g),n="advertiser"===a?{id:b,userId:j.id}:{id:b},o=await e.default.support.findFirst({where:n,select:{id:!0,userId:!0,status:!0,respondedBy:!0}});if(!o)return{success:!1,errMsg:"サポートが見つかりません",statusCode:404};"admin"===a&&h(b).catch(a=>{console.error("Auto close background process failed:",a)});let p="advertiser"===a?"user":"admin",q=j.id,r=o.status;"open"===o.status&&"admin"===a&&(r="in_progress"),"closed"===o.status&&"advertiser"===a&&(r="open");let s=null===o.respondedBy&&"admin"===p?j.id:o.respondedBy;return await e.default.$transaction(async a=>{await a.supportMessage.create({data:{content:m,senderType:p,senderId:q,supportId:b}}),await a.support.update({where:{id:b},data:{respondedBy:s,respondedAt:"admin"===p?new Date:null,status:r,updatedAt:new Date}})},{maxWait:1e4,timeout:25e3}).catch(a=>{throw a}),{success:!0,errMsg:"",statusCode:200}}catch(a){return{success:!1,errMsg:a instanceof Error?a.message:"Internal Server Error.",statusCode:500}}},j=async({userType:a,title:b,category:g,content:h})=>{try{let i,{result:j,data:k,message:l}=await (0,d.security)({readOnly:!1});if(!j||!k)return{success:!1,errMsg:l,statusCode:401};if(k.userType!==a)return{success:!1,errMsg:"No permission.",statusCode:401};let m=await (0,f.rateLimit)();if(!m.success)return{success:!1,errMsg:m.message,statusCode:429};if(b.length>100)return{success:!1,errMsg:"titleの入力は100字以内でお願いします.",statusCode:404};if(h.length>500)return{success:!1,errMsg:"問い合わせ内容 は、500字以内でお願いします.",statusCode:404};if(!["payment","advertisement","technical","other"].includes(g))return{success:!1,errMsg:"無効なカテゴリーです",statusCode:400};let n=(0,c.dangerousCharToEntity)(b),o=(0,c.dangerousCharToEntity)(h);return await e.default.$transaction(async b=>{i=(await b.support.create({data:{title:n,category:g,priority:"medium",userId:k.id}})).id,await b.supportMessage.create({data:{content:o,senderType:"advertiser"===a?"user":"admin",senderId:k.id,supportId:i}})},{maxWait:1e4,timeout:25e3}).catch(a=>{throw a}),{success:!0,errMsg:"",statusCode:200,supportId:i}}catch(a){return{success:!1,errMsg:a instanceof Error?a.message:"Internal Server Error.",statusCode:500}}};(0,g.ensureServerEntryExports)([i,j]),(0,b.registerServerReference)(i,"7f25cdef1f9fa6f853fff195defc540fad63cf87b9",null),(0,b.registerServerReference)(j,"7f260ddfd0b105348133ab43dffd8c5b82e95be01a",null)},346017,a=>a.a(async(b,c)=>{try{a.s([]);var d=a.i(356697);a.i(144192);var e=b([d]);[d]=e.then?(await e)():e,c()}catch(a){c(a)}},!1),207677,a=>a.a(async(b,c)=>{try{a.s(["7f260ddfd0b105348133ab43dffd8c5b82e95be01a",()=>f.createSupport,"7f2ee3e73a4f61fd029c2911db4802ca19f160e882",()=>e.signUp,"7f58b3e156ef73121dd812cf6580f855e0fba2d7b5",()=>e.mailAuth,"7f708aead18bc6fb7cb809355166f217811e0d4cf3",()=>e.signOut,"7fb775272ce06773a1d5c99cf6121ba203f21a336f",()=>e.signIn,"7fd5a47b1466b4921998c4bcc1343f32a8116f9064",()=>e.loginCheck]);var d=a.i(346017),e=a.i(356697),f=a.i(144192),g=b([d,e]);[d,e]=g.then?(await g)():g,c()}catch(a){c(a)}},!1),298948,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/support/create/SupportCreateForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/support/create/SupportCreateForm.tsx <module evaluation>","default")},211570,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/support/create/SupportCreateForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/support/create/SupportCreateForm.tsx","default")},427941,a=>{"use strict";a.i(298948);var b=a.i(211570);a.n(b)},318338,a=>{"use strict";a.s(["default",()=>d]);var b=a.i(907997),c=a.i(427941);let d=async a=>{let{advertiserId:d}=await a.params;return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50/80 via-teal-50/60 to-cyan-50/40 relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,b.jsx)("div",{className:"absolute -top-32 -right-32 w-64 h-64 bg-gradient-to-br from-emerald-400/20 to-teal-400/20 rounded-full blur-3xl animate-pulse"}),(0,b.jsx)("div",{className:"absolute -bottom-32 -left-32 w-64 h-64 bg-gradient-to-tr from-cyan-400/20 to-emerald-400/20 rounded-full blur-3xl animate-pulse"}),(0,b.jsx)("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-teal-300/10 to-emerald-300/10 rounded-full blur-3xl"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-grid-emerald-100/30 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)] pointer-events-none"}),(0,b.jsx)("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-3 bg-white/60 backdrop-blur-xl rounded-full px-6 py-3 shadow-xl border border-white/50",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,b.jsx)("span",{className:"text-lg font-bold bg-gradient-to-r from-emerald-700 to-teal-700 bg-clip-text text-transparent",children:"問い合わせ作成"})]}),(0,b.jsx)("p",{className:"text-gray-600 mt-4 text-lg max-w-2xl mx-auto",children:"お困りのことがございましたら、お気軽にお問い合わせください。迅速に対応いたします。"})]}),(0,b.jsx)(c.default,{userType:"advertiser",userId:Number(d)}),(0,b.jsx)("div",{className:"absolute top-20 left-4 w-4 h-4 bg-gradient-to-br from-emerald-400/40 to-teal-500/40 rounded-full blur-sm animate-bounce"}),(0,b.jsx)("div",{className:"absolute top-40 right-8 w-3 h-3 bg-gradient-to-br from-teal-400/40 to-cyan-500/40 rounded-full blur-sm animate-bounce",style:{animationDelay:"1s"}}),(0,b.jsx)("div",{className:"absolute bottom-32 left-12 w-2 h-2 bg-gradient-to-br from-cyan-400/40 to-emerald-500/40 rounded-full blur-sm animate-bounce",style:{animationDelay:"2s"}}),(0,b.jsx)("div",{className:"absolute bottom-20 right-16 w-5 h-5 bg-gradient-to-br from-emerald-300/30 to-teal-400/30 rounded-full blur-lg animate-pulse"})]})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__33d53eb4._.js.map