module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},262212,a=>{a.n(a.i(866114))},636685,a=>{a.n(a.i(88402))},31410,a=>{"use strict";a.s(["createNotificationForAllAdvertisers",()=>i,"deleteNotification",()=>h,"updateNotification",()=>g]);var b=a.i(137936),c=a.i(559330),d=a.i(446129),e=a.i(478721),f=a.i(713095);let g=async({notificationId:a,title:b,description:f})=>{try{let{result:g,data:h,message:i}=await (0,d.security)({readOnly:!1});if(!g||!h)return{success:!1,errMsg:i,statusCode:401};if("admin"!==h.userType)return{success:!1,errMsg:"No permission.",statusCode:401};if(b.length>100)return{success:!1,errMsg:"タイトルは100字以内で入力してください",statusCode:400};if(0===b.trim().length)return{success:!1,errMsg:"タイトルを入力してください",statusCode:400};if(f.length>1e3)return{success:!1,errMsg:"内容は1000字以内で入力してください",statusCode:400};if(0===f.trim().length)return{success:!1,errMsg:"内容を入力してください",statusCode:400};if(!await c.default.notification.findUnique({where:{id:a},select:{id:!0,title:!0,description:!0}}))return{success:!1,errMsg:"通知が見つかりません",statusCode:404};let j=(0,e.dangerousCharToEntity)(b.trim()),k=(0,e.dangerousCharToEntity)(f.trim());return await c.default.notification.update({where:{id:a},data:{title:j,description:k,updatedAt:new Date}}),{success:!0,errMsg:"",statusCode:200}}catch(a){return{success:!1,errMsg:a instanceof Error?a.message:"Internal Server Error.",statusCode:500}}},h=async({notificationId:a})=>{try{let{result:b,data:e,message:f}=await (0,d.security)({readOnly:!1});if(!b||!e)return{success:!1,errMsg:f,statusCode:401};if("admin"!==e.userType)return{success:!1,errMsg:"No permission.",statusCode:401};if(!await c.default.notification.findUnique({where:{id:a},select:{id:!0,title:!0}}))return{success:!1,errMsg:"通知が見つかりません",statusCode:404};return await c.default.notification.delete({where:{id:a}}),{success:!0,errMsg:"",statusCode:200}}catch(a){return{success:!1,errMsg:a instanceof Error?a.message:"Internal Server Error.",statusCode:500}}},i=async({title:a,type:b,description:f,sendEmail:g=!1})=>{try{let{result:g,data:h,message:i}=await (0,d.security)({readOnly:!1});if(!g||!h)return{success:!1,errMsg:i,statusCode:401};if("admin"!==h.userType)return{success:!1,errMsg:"No permission.",statusCode:401};if(a.length>100)return{success:!1,errMsg:"タイトルは100字以内で入力してください",statusCode:400};if(0===a.trim().length)return{success:!1,errMsg:"タイトルを入力してください",statusCode:400};if(f.length>1e3)return{success:!1,errMsg:"内容は1000字以内で入力してください",statusCode:400};if(0===f.trim().length)return{success:!1,errMsg:"内容を入力してください",statusCode:400};if(!["payment","advertisement","system","other"].includes(b))return{success:!1,errMsg:"無効な通知タイプです",statusCode:400};let j=await c.default.user.findMany({where:{userType:"advertiser",isActive:!0},select:{id:!0}});if(0===j.length)return{success:!1,errMsg:"対象となるadvertiserユーザーが見つかりません",statusCode:404};let k=(0,e.dangerousCharToEntity)(a.trim()),l=(0,e.dangerousCharToEntity)(f.trim()),m=0;return await c.default.$transaction(async a=>{for(let c of j)await a.notification.create({data:{title:k,description:l,type:b,isRead:!1,userId:c.id}}),m++},{maxWait:1e4,timeout:25e3}).catch(a=>{throw a}),{success:!0,errMsg:"",statusCode:200,createdCount:m}}catch(a){return{success:!1,errMsg:a instanceof Error?a.message:"Internal Server Error.",statusCode:500}}};(0,f.ensureServerEntryExports)([g,h,i]),(0,b.registerServerReference)(g,"7f965f06ac0d36f4f175be15213a99392e9b3d3b31",null),(0,b.registerServerReference)(h,"7f0ac610078f6a194cb93109b6ba5ec3b6d4e7f5bb",null),(0,b.registerServerReference)(i,"7f6b06b6699bb497072001c10a2cd48293ec8ffe18",null)},326190,a=>a.a(async(b,c)=>{try{a.s([]);var d=a.i(356697);a.i(31410);var e=b([d]);[d]=e.then?(await e)():e,c()}catch(a){c(a)}},!1),29809,a=>a.a(async(b,c)=>{try{a.s(["7f2ee3e73a4f61fd029c2911db4802ca19f160e882",()=>e.signUp,"7f58b3e156ef73121dd812cf6580f855e0fba2d7b5",()=>e.mailAuth,"7f6b06b6699bb497072001c10a2cd48293ec8ffe18",()=>f.createNotificationForAllAdvertisers,"7f708aead18bc6fb7cb809355166f217811e0d4cf3",()=>e.signOut,"7fb775272ce06773a1d5c99cf6121ba203f21a336f",()=>e.signIn,"7fd5a47b1466b4921998c4bcc1343f32a8116f9064",()=>e.loginCheck]);var d=a.i(326190),e=a.i(356697),f=a.i(31410),g=b([d,e]);[d,e]=g.then?(await g)():g,c()}catch(a){c(a)}},!1),300380,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/notification/create/NotificationCreateForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/notification/create/NotificationCreateForm.tsx <module evaluation>","default")},335562,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/notification/create/NotificationCreateForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/notification/create/NotificationCreateForm.tsx","default")},804419,a=>{"use strict";a.i(300380);var b=a.i(335562);a.n(b)},806602,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(907997),c=a.i(804419);a.i(570396);var d=a.i(673727);let e=async a=>{let e=Number((await a.params).adminId);return(!e||isNaN(e)||e<=0)&&(0,d.redirect)("/auth/admin"),(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50/80 via-blue-50/60 to-indigo-50/40 relative overflow-hidden",children:[(0,b.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,b.jsx)("div",{className:"absolute -top-32 -right-32 w-64 h-64 bg-gradient-to-br from-purple-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse"}),(0,b.jsx)("div",{className:"absolute -bottom-32 -left-32 w-64 h-64 bg-gradient-to-tr from-indigo-400/20 to-purple-400/20 rounded-full blur-3xl animate-pulse"}),(0,b.jsx)("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-blue-300/10 to-purple-300/10 rounded-full blur-3xl"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-grid-purple-100/30 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)] pointer-events-none"}),(0,b.jsx)("div",{className:"relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-3 bg-white/60 backdrop-blur-xl rounded-full px-6 py-3 shadow-xl border border-white/50",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-600 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,b.jsx)("span",{className:"text-lg font-bold bg-gradient-to-r from-purple-700 to-blue-700 bg-clip-text text-transparent",children:"一斉通知作成"})]}),(0,b.jsx)("p",{className:"text-gray-600 mt-4 text-lg max-w-2xl mx-auto",children:"全advertiserユーザーに重要なお知らせを一斉配信できます。送信前に内容をよくご確認ください。"})]}),(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsx)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/40 shadow-lg",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"全ユーザー配信"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"有効なadvertiserユーザー全員に配信"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM9 12a3 3 0 100-6 3 3 0 000 6z"})})}),(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"即座に反映"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"送信後すぐにユーザーに表示"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-1",children:"メール連携"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"システム通知+メール配信（予定）"})]})]})})}),(0,b.jsx)(c.default,{adminId:e}),(0,b.jsx)("div",{className:"absolute top-20 left-4 w-4 h-4 bg-gradient-to-br from-purple-400/40 to-blue-500/40 rounded-full blur-sm animate-bounce"}),(0,b.jsx)("div",{className:"absolute top-40 right-8 w-3 h-3 bg-gradient-to-br from-blue-400/40 to-indigo-500/40 rounded-full blur-sm animate-bounce",style:{animationDelay:"1s"}}),(0,b.jsx)("div",{className:"absolute bottom-32 left-12 w-2 h-2 bg-gradient-to-br from-indigo-400/40 to-purple-500/40 rounded-full blur-sm animate-bounce",style:{animationDelay:"2s"}}),(0,b.jsx)("div",{className:"absolute bottom-20 right-16 w-5 h-5 bg-gradient-to-br from-purple-300/30 to-blue-400/30 rounded-full blur-lg animate-pulse"})]})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c74a7b77._.js.map