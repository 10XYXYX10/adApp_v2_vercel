module.exports=[329060,a=>{"use strict";a.s(["default",()=>o],329060);var b=a.i(187924),c=a.i(572131),d=a.i(357629),e=a.i(50944),f=a.i(405050),g=(0,f.createServerReference)("7fd7fb6dd5442bc160177033d881556836a6f7b03a",f.callServer,void 0,f.findSourceMapURL,"createCryptoPayment"),h=a.i(238246),i=(0,f.createServerReference)("7f459ea1a4c1f8e4460291ad964a00bdc2458dacb7",f.callServer,void 0,f.findSourceMapURL,"checkCryptoPaymentStatus"),j=a.i(484598);function k({advertiserId:a,selectedCurrency:d,paymentDataState:f,setPaymentDataState:g,setProcessingData:k}){let l=(0,e.useRouter)(),[m,n]=(0,c.useState)(3600),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)("");(0,c.useEffect)(()=>{let a=document.getElementById("scrollTargetV1");if(a){let b=a.offsetTop-80;window.scrollTo({top:b,behavior:"smooth"})}let b=a=>{a.preventDefault(),a.returnValue="現在の入力情報が失われる可能性があります。よろしいですか？"},c=a=>{confirm("現在の入力情報が失われる可能性があります。よろしいですか？")&&k("entry")};return window.addEventListener("beforeunload",b),window.addEventListener("popstate",c),window.history.pushState(null,"",window.location.href),()=>{window.removeEventListener("beforeunload",b),window.removeEventListener("popstate",c)}},[]),(0,c.useEffect)(()=>{if(m>0){let a=setTimeout(()=>n(a=>a-1),1e3);return()=>clearTimeout(a)}0===m&&v("決済時間が過ぎました。最初からやり直してください。")},[m]),(0,c.useEffect)(()=>{let b=setInterval(async()=>{try{let b=await i({transactionId:f.transactionId});if(401===b.statusCode){alert(b.errMsg),l.push("/auth/advertiser");return}if(!b.success)throw Error(b.errMsg);if(b.success){if("completed"===b.status)l.push(`/advertiser/${a}/point/purchase/success?paymentId=${f.id}`);else if("failed"===b.status||"expired"===b.status){let a="failed"===b.status?"決済が失敗しました。再度お試しください。":"決済の有効期限が切れました。最初からやり直してください。";v(a),t(!1),g(null),k("entry")}}}catch(a){console.error(a),v("Payment status check error.")}},3e4);return()=>clearInterval(b)},[s]);let w=(a=>{switch(a){case"btc":return{icon:"🟠",name:"Bitcoin",color:"from-orange-400 to-yellow-500"};case"eth":return{icon:"⚪",name:"Ethereum",color:"from-blue-400 to-purple-500"};case"ltc":return{icon:"🟡",name:"Litecoin",color:"from-gray-400 to-blue-400"};default:return{icon:"💎",name:"Cryptocurrency",color:"from-purple-400 to-pink-500"}}})(d),x=async(a,b)=>{try{await navigator.clipboard.writeText(a),"address"===b?(p(!0),setTimeout(()=>p(!1),2e3)):(r(!0),setTimeout(()=>r(!1),2e3))}catch(a){alert(`Copy failed:${a instanceof Error?a.message:"Something went wrong."}`)}};return s?(0,b.jsxs)("div",{className:"space-y-8",id:"scrollTargetV2",children:[(0,b.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg",children:(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-4",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}),(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"決済処理中"}),(0,b.jsx)("p",{className:"text-gray-600",children:"送金を確認しています。しばらくお待ちください。"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"bg-white/70 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-blue-600 font-semibold mb-1",children:"⏱️ 処理時間の目安"}),(0,b.jsxs)("p",{className:"text-gray-700",children:["ネットワークの混雑状況により",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"font-bold text-blue-700",children:"数分～数十分"}),"かかる場合があります"]})]}),(0,b.jsxs)("div",{className:"bg-white/70 rounded-xl p-4",children:[(0,b.jsx)("div",{className:"text-green-600 font-semibold mb-1",children:"🔄 自動確認"}),(0,b.jsx)("p",{className:"text-gray-700",children:"決済状況を確認中..."})]})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xl",children:"📋"}),"送金情報の再確認"]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"送金先アドレス"}),(0,b.jsx)("div",{className:"font-mono text-xs text-gray-800 break-all",children:f.payAddress})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"送金金額"}),(0,b.jsxs)("div",{className:"font-mono text-lg font-bold text-green-700",children:[f.payAmount," ",d.toUpperCase()]})]})]})]}),u&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-red-500 text-xl",children:"⚠"}),(0,b.jsx)("p",{className:"text-red-700 font-medium",children:u})]})}),(0,b.jsxs)("div",{className:"bg-purple-50 rounded-xl shadow-lg p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-purple-800 mb-4 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xl",children:"🛠️"}),"30分以上経っても反映されない場合"]}),(0,b.jsxs)("div",{className:"space-y-3 text-base",children:[(0,b.jsx)("div",{className:"bg-white/80 p-4 rounded-xl",children:(0,b.jsx)("div",{className:"text-purple-700",children:(0,b.jsxs)("ul",{className:"list-decimal list-inside",children:[(0,b.jsxs)("li",{children:["送金金額,送金先アドレスに間違いがないかご確認ください。",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-gray-500 text-sm pl-[16px]",children:"送金情報にミスがある場合、決済に失敗します。その場合は、サポート対象外です🙇‍♀️"})]}),(0,b.jsx)("li",{children:"サポートにお問い合わせください。取引IDや送金情報をお知らせいただくとスムーズです。"})]})})}),(0,b.jsx)("div",{className:"flex items-center justify-center gap-4",children:(0,b.jsx)(h.default,{href:`/advertiser/${a}/support`,className:"bg-white text-purple-600 border border-purple-600 px-6 py-3 rounded-xl hover:bg-purple-50 transition-colors text-sm font-medium",children:"サポートに連絡"})})]})]})]}):(0,b.jsxs)("div",{className:"space-y-6",id:"scrollTargetV1",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 rounded-xl shadow-lg overflow-hidden",children:(0,b.jsx)("div",{className:"px-6 py-5",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0 p-3 bg-white/20 rounded-full",children:(0,b.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,b.jsx)("div",{className:"text-white",children:(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-yellow-300 mt-1",children:"•"}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{className:"text-yellow-200",children:"送金金額は必ず正確に入力してください"})," - 金額が間違っていると決済が失敗します"]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-yellow-300 mt-1",children:"•"}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{className:"text-yellow-200",children:"ウォレットアドレスは必ず正確に入力してください"})," - アドレスが間違っていると送金が失われる可能性があります"]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-yellow-300 mt-1",children:"•"}),(0,b.jsxs)("span",{children:[(0,b.jsx)("strong",{className:"text-yellow-200",children:"手入力は避け、必ずコピー機能を使用してください"})," - 手入力によるミスを防ぐため"]})]})]})})]})})}),(0,b.jsx)("div",{className:`bg-gradient-to-r ${m<600?"from-red-500 to-pink-500":"from-orange-500 to-red-500"} rounded-xl shadow-lg`,children:(0,b.jsx)("div",{className:"px-6 py-2",children:(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("span",{className:"text-2xl font-mono font-bold text-white tracking-wider",children:["残り時間: ",(0,j.formatTime)(m)]})]})})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("div",{className:"text-2xl mr-3",children:w.icon}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-xl",children:[w.name," で送金"]}),(0,b.jsx)("div",{className:"text-sm text-gray-500 font-normal",children:"ご自身のウォレットを開き、以下の情報を正確に入力"})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"送金先アドレス",(0,b.jsx)("span",{className:"text-red-500 text-xs ml-2",children:"⚠️ 必ずコピーしてください"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"p-4 bg-gray-50 rounded-xl border-2 border-gray-200 font-mono text-sm break-all",children:f.payAddress}),(0,b.jsx)("button",{className:"absolute top-2 right-2 h-8 w-8 p-0 bg-white border border-gray-300 rounded hover:bg-blue-50 transition-colors",onClick:()=>x(f.payAddress,"address"),children:o?(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,b.jsx)("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"送金金額",(0,b.jsx)("span",{className:"text-red-500 text-xs ml-2",children:"⚠️ 正確に入力してください"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl border-2 border-green-200 font-mono text-xl font-bold text-green-800",children:[f.payAmount," ",d.toUpperCase()]}),(0,b.jsx)("button",{className:"absolute top-2 right-2 h-8 w-8 p-0 bg-white border border-gray-300 rounded hover:bg-green-50 transition-colors",onClick:()=>x(f.payAmount,"amount"),children:q?(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,b.jsx)("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})]}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl shadow-lg",children:(0,b.jsxs)("div",{className:"p-4 text-center",children:[(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsxs)("h3",{className:"text-2xl font-bold text-white mb-2",children:["送金は完了しましたか",(0,b.jsx)("span",{className:"text-2xl animate-pulse",children:"❔"})]}),(0,b.jsx)("p",{className:"text-green-100 text-sm",children:"ウォレットアプリで送金を実行した後、下のボタンを必ずクリック"})]}),(0,b.jsx)("button",{onClick:()=>{t(!0),setTimeout(()=>{let a=document.getElementById("scrollTargetV2");if(a){let b=a.offsetTop-80;window.scrollTo({top:b,behavior:"smooth"})}},500)},className:"bg-white text-green-600 font-bold py-4 px-8 rounded-xl shadow-lg hover:bg-gray-100 transition-all text-lg cursor-pointer",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-2xl animate-bounce",children:"✅"}),"送金しました",(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})})]})}let l={ltc:{name:"Litecoin",symbol:"LTC",icon:"🟡",features:["⭐ 推奨","ガス代約数十円","送金速度: 約2.5分"],description:"ガス代が安く、送金速度が速いためおすすめです"},eth:{name:"Ethereum",symbol:"ETH",icon:"⚪",features:["ガス代高め","送金時間: 数分～数時間"],description:"ガス代が高額になる場合があります"},btc:{name:"Bitcoin",symbol:"BTC",icon:"🟠",features:["最もメジャー","ガス代高め","送金時間: 10分～数時間"],description:"最も信頼性が高いですが、ガス代と送金時間にご注意ください"}};function m({advertiserId:a,amount:d,setProcessingData:f,fee:h,totalAmount:i}){let j=(0,e.useRouter)(),[m,n]=(0,c.useState)("ltc"),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=document.getElementById("scrollTarget");if(a){let b=a.offsetTop-80;window.scrollTo({top:b,behavior:"smooth"})}let b=a=>{a.preventDefault(),a.returnValue="現在の入力情報が失われる可能性があります。よろしいですか？"},c=()=>{confirm("現在の入力情報が失われる可能性があります。よろしいですか？")&&f("entry")};return window.addEventListener("beforeunload",b),window.addEventListener("popstate",c),window.history.pushState(null,"",window.location.href),()=>{window.removeEventListener("beforeunload",b),window.removeEventListener("popstate",c)}},[]);let u=async()=>{p(!0),r("");try{let{success:b,errMsg:c,statusCode:e,paymentData:f}=await g({advertiserId:a,currency:m,totalAmount:i,purchaseAmount:d});if(401===e){alert(c),j.push("/auth/advertiser");return}if(!b||!f)throw Error(c);t(f)}catch(a){console.error("Payment creation error:",a),r("決済の作成に失敗しました。再度お試しください。")}finally{p(!1)}};return null===s?(0,b.jsxs)("div",{className:"space-y-8",id:"scrollTarget",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"仮想通貨を選択"}),(0,b.jsx)("p",{className:"text-gray-600",children:"決済に使用する仮想通貨を選択してください"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"購入内容"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"取得ポイント:"}),(0,b.jsxs)("span",{className:"font-medium",children:[d.toLocaleString(),"ポイント"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"購入金額:"}),(0,b.jsxs)("span",{className:"font-medium",children:["¥",d.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"決済手数料 (1.5%):"}),(0,b.jsxs)("span",{className:"font-medium",children:["¥",h.toLocaleString()]})]}),(0,b.jsx)("div",{className:"border-t border-gray-300 pt-2 mt-2",children:(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,b.jsx)("span",{children:"合計金額:"}),(0,b.jsxs)("span",{children:["¥",i.toLocaleString()]})]})})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("svg",{className:"w-6 h-6 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"仮想通貨を選択"]}),(0,b.jsx)("div",{className:"space-y-4",children:Object.entries(l).map(([a,c])=>(0,b.jsx)("div",{className:"group relative",children:(0,b.jsxs)("div",{className:"flex items-start space-x-4 p-6 border-2 rounded-xl hover:border-green-300 transition-all cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"currency",value:a,checked:m===a,onChange:a=>n(a.target.value),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500 mt-1"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("label",{className:"font-semibold flex items-center gap-3 text-lg cursor-pointer",children:[(0,b.jsx)("span",{className:"text-2xl",children:c.icon}),(0,b.jsxs)("span",{children:[c.name," (",c.symbol,")"]})]}),(0,b.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:c.features.map((a,c)=>(0,b.jsx)("span",{className:`inline-block text-xs px-3 py-1 rounded-full font-medium ${a.includes("推奨")?"bg-green-100 text-green-800 border border-green-200":a.includes("高め")?"bg-orange-100 text-orange-800 border border-orange-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:a},c))}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:c.description})]})]})},a))})]}),q&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-red-500 text-xl",children:"⚠"}),(0,b.jsx)("p",{className:"text-red-700 font-medium",children:q})]})}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{confirm("現在の入力情報が失われる可能性があります。よろしいですか？")&&f("entry")},className:"flex-1 py-4 px-6 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all",disabled:o,children:"← 戻る"}),(0,b.jsx)("button",{type:"button",onClick:u,disabled:o,className:`
                            flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all
                            ${o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl"}
                        `,children:o?(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[(0,b.jsxs)("svg",{className:"w-5 h-5 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"決済情報を作成中..."]}):(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[l[m].icon,l[m].name," で決済を開始 →"]})})]})]}):(0,b.jsx)(k,{advertiserId:a,selectedCurrency:m,paymentDataState:s,setPaymentDataState:t,setProcessingData:f})}let n=[500,1e3,3e3,5e3,1e4,2e4,5e4];function o({advertiserId:a,paymentType:e}){let[f,g]=(0,c.useState)({amount:[500,""],agreedToTerms:[!1,""]}),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)("entry"),l=a=>{let b,c=a.target.name;if("amount"===c){b=Number(a.target.value);let d="";isNaN(b)||b<=0?d="有効な金額を入力してください":b<100?d=`最小購入額は\xa5${100..toLocaleString()}です`:b>1e5&&(d=`最大購入額は\xa5${1e5.toLocaleString()}です`),g({...f,[c]:[b,d]})}else b=a.target.checked,g({...f,[c]:[b,""]});h&&i("")},o=async()=>{if("entry"!==j)return;let{amount:a,agreedToTerms:b}=f;if(b[0]||(b[1]="利用規約に同意してください"),isNaN(a[0])||a[0]<=0?a[1]="有効な金額を入力してください":a[0]<100?a[1]=`最小購入額は\xa5${100..toLocaleString()}です`:a[0]>1e5&&(a[1]=`最大購入額は\xa5${1e5.toLocaleString()}です`),b[1]||a[1]){i("入力内容に問題があります"),g({agreedToTerms:b,amount:a});return}k("purchase")},p=()=>"credit"===e?Math.ceil(.035*f.amount[0]):Math.ceil(.015*f.amount[0]),q=()=>f.amount[0]+p();return"entry"===j?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("svg",{className:"w-6 h-6 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"購入金額"]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"金額選択（1ポイント = 1円）"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("input",{type:"number",name:"amount",placeholder:"金額を入力",value:f.amount[0],onChange:l,min:100,max:1e5,className:`w-full p-3 border-2 rounded-lg text-lg font-semibold focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all ${f.amount[1]?"border-red-500":"border-gray-300 focus:border-blue-500"}`}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["最小: ¥",100..toLocaleString()," - 最大: ¥",1e5.toLocaleString()]}),f.amount[1]&&(0,b.jsxs)("span",{className:"text-red-500 text-xs flex items-center gap-1 mt-1",children:[(0,b.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.amount[1]]})]}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-3",children:n.map(a=>(0,b.jsxs)("button",{type:"button",className:`
                                            p-3 rounded-lg border-2 font-semibold transition-all
                                            ${f.amount[0]===a?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}
                                        `,onClick:()=>g({...f,amount:[a,""]}),children:["¥",a.toLocaleString()]},a))})]}),(0,b.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)("input",{type:"checkbox",name:"agreedToTerms",id:"terms",checked:f.agreedToTerms[0],onChange:l,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-1"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"terms",className:"text-sm font-medium text-gray-700",children:"以下に同意します"}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("a",{href:"/legal/terms",target:"_blank",className:"text-blue-600 hover:underline",children:"利用規約"})," ","および"," ",(0,b.jsx)("a",{href:"/legal/privacy",target:"_blank",className:"text-blue-600 hover:underline",children:"プライバシーポリシー"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"ポイントを購入することで、返金ポリシーと利用規約に同意したものとみなされます。"})]})]})]}),f.agreedToTerms[1]&&(0,b.jsxs)("span",{className:"text-red-500 text-xs flex items-center gap-1 mt-2",children:[(0,b.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.agreedToTerms[1]]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("svg",{className:"w-6 h-6 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"購入内容確認"]}),(0,b.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:"取得ポイント:"}),(0,b.jsxs)("span",{className:"text-xl font-bold text-green-700",children:[f.amount[0].toLocaleString(),"ポイント"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:"購入金額:"}),(0,b.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["¥",f.amount[0].toLocaleString()]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("span",{className:"text-gray-700 font-medium",children:["決済手数料 (","credit"===e?"3.5":"1.5","%):"]}),(0,b.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["¥",p().toLocaleString()]})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,b.jsxs)("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"合計金額:"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-blue-700",children:["¥",q().toLocaleString()]})]})})]}),h&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl mb-6",children:(0,b.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h]})}),(0,b.jsx)("button",{type:"button",onClick:o,disabled:!f.agreedToTerms[0]||""!==f.amount[1]||0===f.amount[0],className:`
                                w-full py-4 px-6 rounded-lg font-bold text-lg transition-all
                                ${!f.agreedToTerms[0]||""!==f.amount[1]||0===f.amount[0]?"bg-gray-300 text-gray-500 cursor-not-allowed":"credit"===e?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl":"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl"}
                            `,children:`${"credit"===e?"クレジットカード":"仮想通貨"}決済へ進む →`}),(0,b.jsxs)("div",{className:"mt-6 text-xs text-gray-500 space-y-1 border-t border-gray-200 pt-4",children:[(0,b.jsx)("p",{children:"• 決済確認後、ポイントが即座に付与されます"}),(0,b.jsx)("p",{children:"• ポイントの返金は行っておりません"}),(0,b.jsx)("p",{children:"• 全ての取引は暗号化されて保護されています"})]})]})]})]}):"crypt"===e?(0,b.jsx)(m,{advertiserId:a,amount:f.amount[0],setProcessingData:k,fee:p(),totalAmount:q()}):"<CreditPurchaseForm.tsx>//未作成"}}];

//# sourceMappingURL=src_components_point_advertiser_purchase_crypt_PurchaseEntryForm_tsx_58bf091e._.js.map