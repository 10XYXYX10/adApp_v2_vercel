module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},262212,a=>{a.n(a.i(866114))},636685,a=>{a.n(a.i(88402))},986333,a=>{"use strict";a.s(["getUserDetail",()=>e,"getUsers",()=>d]);var b=a.i(559330);let c=Number("10"),d=async({search:a,sort:d,status:e,businessType:f,page:g})=>{try{let h={},i={userType:"advertiser"};if(e&&(i={...i,isActive:"active"===e}),f&&(i={...i,businessType:f}),a){let b=a.split(" ");b=b.filter(a=>""!==a),i={...i,AND:b.map(a=>({OR:[{name:{contains:a,mode:"insensitive"}},{email:{contains:a,mode:"insensitive"}},{companyName:{contains:a,mode:"insensitive"}},{businessType:{contains:a,mode:"insensitive"}}]}))}}h={...h={...h,orderBy:{createdAt:d}},where:i,skip:Number(c*(g-1)),take:c+1};let j=await b.default.user.findMany({...h,select:{id:!0,name:!0,email:!0,userType:!0,businessType:!0,companyName:!0,isActive:!0,amount:!0,lastLoginAt:!0,createdAt:!0}});return{result:!0,message:"success",data:j}}catch(a){return{result:!1,message:a instanceof Error?`${a.message}.`:"Internal Server Error."}}},e=async({userId:a})=>{try{let c=await b.default.user.findFirst({where:{id:a,userType:"advertiser"},select:{id:!0,name:!0,email:!0,userType:!0,birthDate:!0,businessType:!0,companyName:!0,representativeName:!0,businessNumber:!0,isActive:!0,amount:!0,lastLoginAt:!0,createdAt:!0,updatedAt:!0,Address:{select:{id:!0,country:!0,postalCode:!0,state:!0,city:!0,addressLine1:!0,addressLine2:!0}},Phone:{select:{id:!0,hashedPhoneNumber:!0}}}});if(!c)return{result:!1,message:"User not found.",data:null};return{result:!0,message:"success",data:{...c,amount:Number(c.amount)}}}catch(a){return{result:!1,message:a instanceof Error?`${a.message}.`:"Internal Server Error."}}}},305020,a=>{"use strict";a.s(["manageUserAndNotify",()=>h]);var b=a.i(137936),c=a.i(446129),d=a.i(559330),e=a.i(121419),f=a.i(478721),g=a.i(713095);let h=async({targetUserId:a,isActiveToggle:b,notificationTitle:g,notificationDescription:h,notificationType:i,sendEmail:j})=>{try{let{result:k,data:l,message:m}=await (0,c.security)({readOnly:!1});if(!k||!l)return{success:!1,errMsg:m,statusCode:401};if("admin"!==l.userType)return{success:!1,errMsg:"No permission.",statusCode:401};if(g.length>100)return{success:!1,errMsg:"タイトルは100文字以内でお願いします。",statusCode:400};if(h.length>500)return{success:!1,errMsg:"通知内容は500文字以内でお願いします。",statusCode:400};let n=(0,f.dangerousCharToEntity)(g),o=(0,f.dangerousCharToEntity)(h),p=await d.default.user.findFirst({where:{id:a,userType:"advertiser"},select:{id:!0,name:!0,email:!0,isActive:!0}});if(!p)return{success:!1,errMsg:"ユーザーが見つかりません",statusCode:404};return await d.default.$transaction(async c=>{if(void 0!==b&&await c.user.update({where:{id:a},data:{isActive:b,updatedAt:new Date}}),await c.notification.create({data:{title:n,description:o,type:i,userId:a}}),j){let{result:a,message:b}=await (0,e.sendMail)({toEmail:p.email,subject:n,text:o,html:`
<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
<h2 style="color: #1f2937; border-bottom: 2px solid #3b82f6; padding-bottom: 10px;">
${n}
</h2>
<div style="background-color: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
<p style="color: #374151; line-height: 1.6; white-space: pre-wrap;">
    ${o}
</p>
</div>
<hr style="border: 1px solid #e5e7eb; margin: 20px 0;">
<p style="color: #6b7280; font-size: 14px; text-align: center;">
このメールは管理者からの重要なお知らせです。
</p>
</div>
                    `});if(!a)throw Error(b)}},{maxWait:1e4,timeout:25e3}).catch(a=>{throw a}),{success:!0,errMsg:"",statusCode:200}}catch(a){return{success:!1,errMsg:a instanceof Error?a.message:"Internal Server Error.",statusCode:500}}};(0,g.ensureServerEntryExports)([h]),(0,b.registerServerReference)(h,"7fac729ba473c5ded469daae99f7714c94c2e7ea91",null)},491645,a=>a.a(async(b,c)=>{try{a.s([]);var d=a.i(356697);a.i(305020);var e=b([d]);[d]=e.then?(await e)():e,c()}catch(a){c(a)}},!1),56698,a=>a.a(async(b,c)=>{try{a.s(["7f2ee3e73a4f61fd029c2911db4802ca19f160e882",()=>e.signUp,"7f58b3e156ef73121dd812cf6580f855e0fba2d7b5",()=>e.mailAuth,"7f708aead18bc6fb7cb809355166f217811e0d4cf3",()=>e.signOut,"7fac729ba473c5ded469daae99f7714c94c2e7ea91",()=>f.manageUserAndNotify,"7fb775272ce06773a1d5c99cf6121ba203f21a336f",()=>e.signIn,"7fd5a47b1466b4921998c4bcc1343f32a8116f9064",()=>e.loginCheck]);var d=a.i(491645),e=a.i(356697),f=a.i(305020),g=b([d,e]);[d,e]=g.then?(await g)():g,c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__c66f1f20._.js.map