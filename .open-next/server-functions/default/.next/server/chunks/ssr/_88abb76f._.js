module.exports=[340754,a=>{"use strict";a.s(["default",()=>c]);var b=a.i(187924);function c(){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"fixed inset-0 z-15 m-auto opacity-50",children:(0,b.jsx)("div",{className:"h-20 w-20 animate-spin rounded-full border-4 border-gray-600 border-t-transparent absolute inset-0 z-20 m-auto"})})})}},484598,a=>{"use strict";a.s(["formatDate",()=>b,"formatTime",()=>c]);let b=a=>new Intl.DateTimeFormat("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a)),c=a=>{let b=Math.floor(a/60);return`${b.toString().padStart(2,"0")}:${(a%60).toString().padStart(2,"0")}`}},187747,a=>{"use strict";a.s(["useUpdateAmount",()=>d]);var b=a.i(572131),c=a.i(601758);function d(){let{updateUser:a}=(0,c.default)();return(0,b.useCallback)(b=>{a(a=>({...a,amount:b}))},[])}},177156,a=>{"use strict";a.s(["Eye",()=>b],177156);let b=(0,a.i(170106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},765910,35366,a=>{"use strict";a.s(["MousePointer",()=>b],765910);let b=(0,a.i(170106).default)("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);a.s(["default",()=>z],35366);var c=a.i(187924),d=a.i(572131),e=a.i(346271),f=a.i(48662),g=a.i(940092),h=a.i(677924),i=a.i(923665),j=a.i(758042),k=a.i(994222),l=a.i(54419),m=a.i(659854),n=a.i(985811),o=a.i(39622),p=a.i(177156),q=a.i(790166),r=a.i(724669),s=a.i(839761);let t=[{key:"combined",label:"複合表示",icon:r.TrendingUp},{key:"impressions",label:"表示数",icon:p.Eye},{key:"clicks",label:"クリック数",icon:b},{key:"points",label:"消費ポイント",icon:q.DollarSign}],u={margin:{top:20,right:30,left:20,bottom:20},animation:{duration:1e3},colors:{impressions:"#3B82F6",clicks:"#10B981",points:"#F59E0B"}},v=(a,b,c=!1)=>{let d=new Date(a);if(isNaN(d.getTime()))return a;let e=d.getMonth()+1,f=d.getDate();if("monthly"===b)return c?`${e}月${f}日`:f.toString();let g=`${e}/${f}`;return c?g:`${e.toString().padStart(2,"0")}/${f.toString().padStart(2,"0")}`},w=(a,b)=>{let c=[],d=new Date(a),e=new Date(b);for(;d<=e;)c.push(`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`),d.setDate(d.getDate()+1);return c},x=({active:a,payload:d,period:f})=>{if(!a||!d?.length)return null;let g=d[0].payload;return(0,c.jsxs)(e.motion.div,{className:"bg-white/95 backdrop-blur-xl border border-white/50 rounded-2xl p-4 shadow-2xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-3",children:v(g.date,f,!0)}),(0,c.jsx)("div",{className:"space-y-2",children:[{key:"impressions",label:"表示回数",icon:p.Eye,value:g.impressions},{key:"clicks",label:"クリック数",icon:b,value:g.clicks},{key:"spentPoints",label:"消費ポイント",icon:q.DollarSign,value:g.spentPoints}].map(({key:a,label:b,icon:d,value:e})=>(0,c.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)(d,{className:"w-3 h-3",style:{color:u.colors[a]}}),(0,c.jsx)("span",{className:"text-xs text-gray-600",children:b})]}),(0,c.jsx)("span",{className:"text-xs font-medium",children:"spentPoints"===a?`${e.toLocaleString()}P`:e.toLocaleString()})]},a))})]})},y=()=>(0,c.jsxs)(e.motion.div,{className:"h-80 flex flex-col items-center justify-center text-center",initial:{opacity:0},animate:{opacity:1},children:[(0,c.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-gray-100 to-blue-100 rounded-full flex items-center justify-center shadow-lg",children:(0,c.jsx)(s.BarChart3,{className:"w-10 h-10 text-gray-400"})}),(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"グラフデータなし"}),(0,c.jsx)("p",{className:"text-gray-600 text-sm",children:"この期間にはグラフ表示できるデータがありません"})]});function z({data:a,period:b,periodInfo:p}){let[q,r]=(0,d.useState)("combined"),{chartData:s,stats:z}=(0,d.useMemo)(()=>{let c;if(!a?.length)return{chartData:[],stats:null};if(p)c=w(p.startDate,p.endDate);else{let d=new Date(Math.max(...a.map(a=>new Date(a.date)).map(a=>a.getTime())));c=w(("7days"===b?new Date(d.getTime()-5184e5):new Date(d.getFullYear(),d.getMonth(),1)).toISOString().split("T")[0],d.toISOString().split("T")[0])}let d=new Map(a.map(a=>[a.date,a])),e=c.map(a=>({...d.get(a)||{impressions:0,clicks:0,spentPoints:0},date:a,formattedDate:v(a,b)})),f={totals:e.reduce((a,b)=>({impressions:a.impressions+b.impressions,clicks:a.clicks+b.clicks,points:a.points+b.spentPoints}),{impressions:0,clicks:0,points:0}),maxValues:{impressions:Math.max(...e.map(a=>a.impressions)),clicks:Math.max(...e.map(a=>a.clicks)),points:Math.max(...e.map(a=>a.spentPoints))},dataPoints:{original:a.length,filled:e.length}};return{chartData:e,stats:f}},[a,b,p]);return z?(0,c.jsxs)(e.motion.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,c.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-6",children:t.map(({key:a,label:b,icon:d})=>(0,c.jsxs)(e.motion.button,{onClick:()=>r(a),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all ${q===a?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg":"bg-white/40 hover:bg-white/60 text-gray-700 border border-white/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,c.jsx)(d,{className:"w-4 h-4"}),(0,c.jsx)("span",{className:"hidden sm:inline",children:b})]},a))}),(0,c.jsx)(e.motion.div,{className:"bg-white/40 backdrop-blur-sm rounded-2xl p-4 border border-white/50",initial:{opacity:0},animate:{opacity:1},children:(0,c.jsx)("div",{className:"h-80 w-full",children:(0,c.jsx)(f.ResponsiveContainer,{width:"100%",height:"100%",children:(()=>{let a={data:s,margin:u.margin},d={stroke:"#6B7280",fontSize:12,tickLine:!1,axisLine:!1},e=a=>(0,c.jsx)(x,{...a,period:b});switch(q){case"impressions":return(0,c.jsxs)(o.AreaChart,{...a,children:[(0,c.jsx)("defs",{children:(0,c.jsxs)("linearGradient",{id:"grad-impressions",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,c.jsx)("stop",{offset:"5%",stopColor:u.colors.impressions,stopOpacity:.3}),(0,c.jsx)("stop",{offset:"95%",stopColor:u.colors.impressions,stopOpacity:.05})]})}),(0,c.jsx)(l.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,c.jsx)(j.XAxis,{dataKey:"formattedDate",...d}),(0,c.jsx)(k.YAxis,{...d,tickFormatter:a=>a.toLocaleString()}),(0,c.jsx)(m.Tooltip,{content:e}),(0,c.jsx)(n.Area,{type:"monotone",dataKey:"impressions",stroke:u.colors.impressions,strokeWidth:3,fill:"url(#grad-impressions)",animationDuration:u.animation.duration})]});case"clicks":return(0,c.jsxs)(o.AreaChart,{...a,children:[(0,c.jsx)("defs",{children:(0,c.jsxs)("linearGradient",{id:"grad-clicks",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,c.jsx)("stop",{offset:"5%",stopColor:u.colors.clicks,stopOpacity:.3}),(0,c.jsx)("stop",{offset:"95%",stopColor:u.colors.clicks,stopOpacity:.05})]})}),(0,c.jsx)(l.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,c.jsx)(j.XAxis,{dataKey:"formattedDate",...d}),(0,c.jsx)(k.YAxis,{...d,tickFormatter:a=>a.toLocaleString()}),(0,c.jsx)(m.Tooltip,{content:e}),(0,c.jsx)(n.Area,{type:"monotone",dataKey:"clicks",stroke:u.colors.clicks,strokeWidth:3,fill:"url(#grad-clicks)",animationDuration:u.animation.duration})]});case"points":return(0,c.jsxs)(g.ComposedChart,{...a,children:[(0,c.jsx)(l.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,c.jsx)(j.XAxis,{dataKey:"formattedDate",...d}),(0,c.jsx)(k.YAxis,{...d,tickFormatter:a=>`${a}P`}),(0,c.jsx)(m.Tooltip,{content:e}),(0,c.jsx)(i.Bar,{dataKey:"spentPoints",fill:u.colors.points,radius:[4,4,0,0],animationDuration:u.animation.duration})]});default:return(0,c.jsxs)(g.ComposedChart,{...a,children:[(0,c.jsx)(l.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,c.jsx)(j.XAxis,{dataKey:"formattedDate",...d}),(0,c.jsx)(k.YAxis,{yAxisId:"left",...d,tickFormatter:a=>a.toLocaleString()}),(0,c.jsx)(k.YAxis,{yAxisId:"right",orientation:"right",...d,tickFormatter:a=>`${a}P`}),(0,c.jsx)(m.Tooltip,{content:e}),(0,c.jsx)(i.Bar,{yAxisId:"right",dataKey:"spentPoints",fill:u.colors.points,opacity:.7,radius:[2,2,0,0]}),(0,c.jsx)(h.Line,{yAxisId:"left",type:"monotone",dataKey:"impressions",stroke:u.colors.impressions,strokeWidth:3,dot:{r:4},activeDot:{r:6}}),(0,c.jsx)(h.Line,{yAxisId:"left",type:"monotone",dataKey:"clicks",stroke:u.colors.clicks,strokeWidth:3,dot:{r:4},activeDot:{r:6}})]})}})()})})},q),(0,c.jsx)(e.motion.div,{className:"mt-6 grid grid-cols-3 gap-4",initial:{opacity:0},animate:{opacity:1},children:[{label:"最大表示数",value:z.maxValues.impressions,color:"text-blue-600"},{label:"最大クリック数",value:z.maxValues.clicks,color:"text-green-600"},{label:"最大消費ポイント",value:z.maxValues.points,color:"text-orange-600",suffix:"P"}].map(({label:a,value:b,color:d,suffix:e=""})=>(0,c.jsxs)("div",{className:"text-center bg-white/30 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,c.jsxs)("div",{className:`text-lg font-bold ${d}`,children:[b.toLocaleString(),e]}),(0,c.jsx)("div",{className:"text-xs text-gray-600",children:a})]},a))})]}):(0,c.jsx)(y,{})}}];

//# sourceMappingURL=_88abb76f._.js.map