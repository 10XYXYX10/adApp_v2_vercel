module.exports=[308319,a=>{"use strict";a.s(["default",()=>g],308319);var b=a.i(187924),c=a.i(405050),d=(0,c.createServerReference)("7f6b06b6699bb497072001c10a2cd48293ec8ffe18",c.callServer,void 0,c.findSourceMapURL,"createNotificationForAllAdvertisers"),e=a.i(572131),f=a.i(50944);let g=({adminId:a})=>{let[c,g]=(0,e.useState)(!1),[h,i]=(0,e.useState)(""),[j,k]=(0,e.useState)({title:["",""],type:["",""],description:["",""],sendEmail:[!1,""]}),l=(0,f.useRouter)(),m=(0,e.useRef)(null),n=async()=>{if(!confirm("この内容でadvertiserユーザー全員に通知を送信しますか？"))return;g(!0),h&&i("");let{title:b,type:c,description:e}=j,f=!1;if(b[0].length>100&&(b[1]="タイトルは100字以内で入力してください",f=!0),0===b[0].trim().length&&(b[1]="タイトルを入力してください",f=!0),e[0].length>1e3&&(e[1]="内容は1000字以内で入力してください",f=!0),0===e[0].trim().length&&(e[1]="内容を入力してください",f=!0),["payment","advertisement","system","other"].includes(c[0])||(c[1]="カテゴリーを選択してください",f=!0),f){k(a=>({...a,title:b,type:c,description:e})),alert("入力内容に問題があります"),i("入力内容に問題があります"),g(!1);return}try{let f=await d({title:b[0].trim(),type:c[0],description:e[0].trim(),sendEmail:j.sendEmail[0]});f.success?(alert(`通知を作成しました。送信件数: ${f.createdCount}件`),l.push(`/admin/${a}/notification`),l.refresh()):401===f.statusCode||403===f.statusCode?(alert("認証が無効です。再ログインしてください。"),l.push("/auth/admin")):(i(f.errMsg),g(!1))}catch(b){let a=b instanceof Error?b.message:"作成に失敗しました。もう一度お試しください。";alert(a),i(a),g(!1)}},o=a=>{let b=a.target.name,c=a.target.value;if("sendEmail"===b){let b=a.target.checked;k(a=>({...a,sendEmail:[b,""]}))}else k(a=>({...a,[b]:[c,""]}));if("description"===b&&m.current){let a=m.current;a.style.height="auto",a.style.height=`${a.scrollHeight}px`}};return(0,b.jsxs)("div",{className:"relative bg-gradient-to-br from-purple-50/80 via-blue-50/60 to-indigo-50/40 rounded-3xl p-8 border border-white/50 shadow-2xl",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-grid-purple-100/20 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)] rounded-3xl"}),(0,b.jsx)("div",{className:"relative z-10 mb-8",children:(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"一斉通知作成"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"全advertiserユーザーに通知を送信します"})]})]})}),(0,b.jsxs)("form",{onSubmit:a=>a.preventDefault(),className:"relative z-10 space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"block text-lg font-bold text-gray-900",children:["通知タイトル ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"title",value:j.title[0],onChange:o,placeholder:"通知のタイトルを入力してください",className:`w-full p-4 bg-white/90 backdrop-blur-sm border-2 ${j.title[1]?"border-red-500":"border-white/60 hover:border-purple-300/80"} focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 rounded-2xl text-gray-800 placeholder-gray-400 transition-all duration-300 focus:outline-none shadow-lg hover:shadow-xl`,disabled:c}),j.title[1]&&(0,b.jsxs)("span",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),j.title[1]]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[j.title[0].length,"/100文字"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"block text-lg font-bold text-gray-900",children:["通知カテゴリー ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"type",value:j.type[0],onChange:o,className:`w-full appearance-none p-4 bg-white/90 backdrop-blur-sm border-2 ${j.type[1]?"border-red-500":"border-white/60 hover:border-purple-300/80"} focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 rounded-2xl text-gray-800 transition-all duration-300 focus:outline-none shadow-lg hover:shadow-xl cursor-pointer`,disabled:c,children:[(0,b.jsx)("option",{value:"",children:"カテゴリーを選択してください"}),(0,b.jsx)("option",{value:"payment",children:"決済・ポイント関連"}),(0,b.jsx)("option",{value:"advertisement",children:"広告配信関連"}),(0,b.jsx)("option",{value:"system",children:"システム"}),(0,b.jsx)("option",{value:"other",children:"その他"})]}),j.type[1]&&(0,b.jsxs)("span",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),j.type[1]]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"block text-lg font-bold text-gray-900",children:["通知内容 ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("textarea",{ref:m,name:"description",value:j.description[0],placeholder:"詳しい内容をご記入ください...",className:`w-full min-h-[150px] max-h-[400px] p-4 bg-white/90 backdrop-blur-sm border-2 ${j.description[1]?"border-red-500":"border-white/60 hover:border-purple-300/80"} focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 rounded-2xl text-gray-800 placeholder-gray-400 resize-none transition-all duration-300 focus:outline-none shadow-lg hover:shadow-xl`,onChange:o,disabled:c}),(0,b.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400 bg-white/80 backdrop-blur-sm rounded-full px-3 py-1",children:[j.description[0].length,"/1000文字"]})]}),j.description[1]&&(0,b.jsxs)("span",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),j.description[1]]})]}),(0,b.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",name:"sendEmail",id:"sendEmail",checked:j.sendEmail[0],onChange:o,className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500 focus:ring-2",disabled:c}),(0,b.jsx)("label",{htmlFor:"sendEmail",className:"text-gray-900 font-medium cursor-pointer",children:"メール通知も送信する（将来実装予定）"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-2 ml-8",children:"システム通知と合わせてメールでも通知を送信します"})]}),h&&(0,b.jsx)("div",{className:"p-4 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-2xl",children:(0,b.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h]})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:justify-end",children:[(0,b.jsx)("button",{type:"button",onClick:()=>l.back(),className:"px-8 py-4 bg-white/90 hover:bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 rounded-2xl font-bold transition-all duration-300 shadow-lg hover:shadow-xl",disabled:c,children:"キャンセル"}),(0,b.jsxs)("button",{type:"button",onClick:n,disabled:c,className:"group relative overflow-hidden bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-12 py-4 rounded-2xl font-bold text-lg shadow-2xl hover:shadow-purple-500/30 disabled:shadow-none transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed transform",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 group-disabled:opacity-0 transition-opacity duration-300"}),(0,b.jsx)("div",{className:"relative flex items-center justify-center gap-3",children:c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,b.jsx)("span",{children:"送信中..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-5 h-5 transition-transform duration-200 group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),(0,b.jsx)("span",{children:"一斉通知を送信"})]})})]})]})]}),(0,b.jsx)("div",{className:"absolute top-6 right-6 w-16 h-16 bg-gradient-to-br from-purple-400/20 to-blue-500/20 rounded-full blur-2xl"}),(0,b.jsx)("div",{className:"absolute bottom-6 left-6 w-12 h-12 bg-gradient-to-br from-blue-400/20 to-indigo-500/20 rounded-full blur-xl"})]})}}];

//# sourceMappingURL=src_components_notification_create_NotificationCreateForm_tsx_57014761._.js.map