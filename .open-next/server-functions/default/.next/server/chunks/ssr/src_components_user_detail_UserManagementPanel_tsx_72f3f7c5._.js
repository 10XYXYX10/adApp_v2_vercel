module.exports=[598429,a=>{"use strict";a.s(["default",()=>g],598429);var b=a.i(187924),c=a.i(572131),d=a.i(405050),e=(0,d.createServerReference)("7fac729ba473c5ded469daae99f7714c94c2e7ea91",d.callServer,void 0,d.findSourceMapURL,"manageUserAndNotify");let f={activate:{title:"アカウントを有効化しました",description:"お客様のアカウントが正常に有効化されました。サービスをご利用いただけます。ご不明な点がございましたらお気軽にお問い合わせください。"},deactivate:{title:"アカウントを無効化しました",description:"お客様のアカウントが無効化されました。サービスの利用が制限されています。詳細については管理者までお問い合わせください。"}},g=({user:a})=>{let[d,g]=(0,c.useState)({old:a.isActive,new:a.isActive}),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),l=(0,c.useRef)(null),m=async b=>{if(b.preventDefault(),h)return;let c=new FormData(b.currentTarget),f=c.get("title"),j=c.get("description"),m=c.get("notificationType"),n="on"===c.get("sendEmail");if(!f.trim()||!j.trim())return void k("タイトルと通知内容は必須です");i(!0),k("");try{let b=await e({targetUserId:a.id,isActiveToggle:d.old!==d.new?d.new:void 0,notificationTitle:f.trim(),notificationDescription:j.trim(),notificationType:m||"system",sendEmail:n});b.success?(k("処理が完了しました"),g({...d,old:d.new}),l.current?.reset(),alert("Success.")):(alert(b.errMsg),k(b.errMsg))}catch(a){console.error(a),k("処理中にエラーが発生しました")}finally{i(!1)}};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-600 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"管理操作パネル"}),(0,b.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-orange-200 to-transparent"})]}),(0,b.jsxs)("form",{ref:l,onSubmit:m,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/60 rounded-2xl p-6 border border-blue-200/50",children:[(0,b.jsx)("h4",{className:"text-lg font-bold text-blue-900 mb-4",children:"アカウント制御"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"現在の状態:"}),(0,b.jsx)("span",{className:`ml-2 px-3 py-1 rounded-full text-sm font-bold ${d.old?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d.old?"アクティブ":"無効"})]})}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",name:"toggleAccount",className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500",checked:d.old!==d.new,onChange:()=>{(a=>{if(console.log("--handleStatusToggle--"),!l.current)return;console.log(`newStatus:${a}`);let b=a?f.activate:f.deactivate,c=l.current.querySelector('input[name="title"]'),e=l.current.querySelector('textarea[name="description"]'),h=d.old!==a;console.log(`changed:${h}`),c&&(c.value=h?b.title:""),e&&(e.value=h?b.description:""),g({...d,new:a})})(!d.new)}}),(0,b.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["アカウントを",d.old?"無効化":"有効化","する"]})]})})]})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-50/80 to-pink-50/60 rounded-2xl p-6 border border-purple-200/50",children:[(0,b.jsx)("h4",{className:"text-lg font-bold text-purple-900 mb-4",children:"通知送信"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:["通知タイトル ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"title",maxLength:100,className:"w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 focus:outline-none",placeholder:"通知のタイトルを入力...",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:["通知内容 ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("textarea",{name:"description",maxLength:500,rows:4,className:"w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 focus:outline-none resize-none",placeholder:"通知の詳細内容を入力...",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"通知カテゴリー"}),(0,b.jsxs)("select",{name:"notificationType",className:"w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 focus:outline-none",children:[(0,b.jsx)("option",{value:"system",children:"システム"}),(0,b.jsx)("option",{value:"payment",children:"決済・ポイント"}),(0,b.jsx)("option",{value:"advertisement",children:"広告配信"}),(0,b.jsx)("option",{value:"other",children:"その他"})]})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",name:"sendEmail",className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-purple-900",children:"メール通知も送信"})]})})]})]})]}),j&&(0,b.jsx)("div",{className:`p-4 rounded-xl ${j.includes("完了")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:j}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{type:"submit",disabled:h,className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-bold transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed shadow-lg hover:shadow-xl disabled:shadow-none",children:h?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"処理中..."]}):"実行する"})})]})]})}}];

//# sourceMappingURL=src_components_user_detail_UserManagementPanel_tsx_72f3f7c5._.js.map