module.exports=[408418,a=>{"use strict";a.s(["default",()=>K],408418);var b=a.i(187924),c=a.i(572131),d=a.i(346271),e=a.i(262036),f=a.i(613749),g=a.i(50522),h=a.i(724669),i=a.i(170106);let j=(0,i.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var k=a.i(790166);let l=(0,i.default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var m=a.i(839761),n=a.i(669520),o=a.i(73570),p=a.i(808406),q=a.i(48662),r=a.i(940092),s=a.i(677924),t=a.i(923665),u=a.i(758042),v=a.i(994222),w=a.i(54419),x=a.i(659854),y=a.i(985811),z=a.i(39622);let A=[{key:"combined",label:"複合表示",icon:h.TrendingUp},{key:"paymentCount",label:"決済件数",icon:l},{key:"totalAmount",label:"決済金額",icon:j},{key:"totalFees",label:"手数料",icon:k.DollarSign}],B={margin:{top:20,right:30,left:20,bottom:20},animation:{duration:1500},colors:{paymentCount:"#3B82F6",totalAmount:"#10B981",totalFees:"#F59E0B"}},C=({active:a,payload:c})=>{if(!a||!c?.length)return null;let e=c[0].payload;return(0,b.jsxs)(d.motion.div,{className:"bg-white/95 backdrop-blur-xl border border-white/50 rounded-2xl p-4 shadow-2xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"}),(a=>{let b=new Date(a);return isNaN(b.getTime())?a:`${b.getMonth()+1}月${b.getDate()}日`})(e.originalDate)]}),(0,b.jsx)("div",{className:"space-y-2",children:[{key:"paymentCount",label:"決済件数",icon:l,value:e.paymentCount,suffix:"件"},{key:"totalAmount",label:"決済金額",icon:j,value:e.totalAmount,suffix:""},{key:"totalFees",label:"手数料",icon:k.DollarSign,value:e.totalFees,suffix:""}].map(({key:a,label:c,icon:d,value:e,suffix:f})=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d,{className:"w-3 h-3",style:{color:B.colors[a]}}),(0,b.jsx)("span",{className:"text-xs text-gray-600",children:c})]}),(0,b.jsx)("span",{className:"text-xs font-medium",children:f?`${e.toLocaleString()}${f}`:`\xa5${e.toLocaleString()}`})]},a))})]})},D=()=>(0,b.jsxs)(d.motion.div,{className:"h-80 flex flex-col items-center justify-center text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-gray-100 to-blue-100 rounded-full flex items-center justify-center shadow-lg",children:(0,b.jsx)(m.BarChart3,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"グラフデータなし"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:"この期間にはグラフ表示できるデータがありません"})]});function E({data:a,periodInfo:e}){let[f,g]=(0,c.useState)("combined"),{chartData:h,stats:i}=(0,c.useMemo)(()=>{if(!a)return{chartData:[],stats:null};let b=((a,b)=>{if(!a)return[];let c=new Date(b.startDate),d=new Date(b.endDate),e=new Map(a.map(a=>[a.date,a])),f=[],g=new Date(c);for(;g<=d;){let a=`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}-${String(g.getDate()).padStart(2,"0")}`;f.push(e.get(a)||{date:a,paymentCount:0,totalAmount:0,totalFees:0}),g.setDate(g.getDate()+1)}return f})(a,e);return 0===b.length?{chartData:[],stats:null}:{chartData:b.map(a=>({...a,formattedDate:(a=>{let b=new Date(a);return isNaN(b.getTime())?a:b.getDate().toString()})(a.date),originalDate:a.date})),stats:{hasData:!0,totalPaymentCount:b.reduce((a,b)=>a+b.paymentCount,0),totalAmount:b.reduce((a,b)=>a+b.totalAmount,0),totalFees:b.reduce((a,b)=>a+b.totalFees,0),maxPaymentCount:Math.max(...b.map(a=>a.paymentCount)),maxAmount:Math.max(...b.map(a=>a.totalAmount)),maxFees:Math.max(...b.map(a=>a.totalFees)),originalDataPoints:a.length,filledDataPoints:b.length}}},[a,e]);if(!i?.hasData||!a||0===a.length)return(0,b.jsx)(D,{});let j={data:h,margin:B.margin},k={stroke:"#6B7280",fontSize:12,tickLine:!1,axisLine:!1},l=a=>(0,b.jsx)(C,{...a});return(0,b.jsxs)(d.motion.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,b.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-6",children:A.map(({key:a,label:c,icon:e})=>(0,b.jsxs)(d.motion.button,{onClick:()=>g(a),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-300 ${f===a?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg":"bg-white/40 hover:bg-white/60 text-gray-700 border border-white/50"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,b.jsx)(e,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:c})]},a))}),(0,b.jsx)(d.motion.div,{className:"bg-white/40 backdrop-blur-sm rounded-2xl p-4 border border-white/50",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.4},children:(0,b.jsx)("div",{className:"h-80 w-full",children:(0,b.jsx)(q.ResponsiveContainer,{width:"100%",height:"100%",children:(()=>{switch(f){case"paymentCount":return(0,b.jsxs)(z.AreaChart,{...j,children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"paymentCountGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:B.colors.paymentCount,stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:B.colors.paymentCount,stopOpacity:.05})]})}),(0,b.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,b.jsx)(u.XAxis,{dataKey:"formattedDate",...k}),(0,b.jsx)(v.YAxis,{...k,tickFormatter:a=>`${a}件`}),(0,b.jsx)(x.Tooltip,{content:l}),(0,b.jsx)(y.Area,{type:"monotone",dataKey:"paymentCount",stroke:B.colors.paymentCount,strokeWidth:3,fill:"url(#paymentCountGradient)",animationDuration:B.animation.duration})]});case"totalAmount":return(0,b.jsxs)(z.AreaChart,{...j,children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"totalAmountGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:B.colors.totalAmount,stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:B.colors.totalAmount,stopOpacity:.05})]})}),(0,b.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,b.jsx)(u.XAxis,{dataKey:"formattedDate",...k}),(0,b.jsx)(v.YAxis,{...k,tickFormatter:a=>`\xa5${a.toLocaleString()}`}),(0,b.jsx)(x.Tooltip,{content:l}),(0,b.jsx)(y.Area,{type:"monotone",dataKey:"totalAmount",stroke:B.colors.totalAmount,strokeWidth:3,fill:"url(#totalAmountGradient)",animationDuration:B.animation.duration})]});case"totalFees":return(0,b.jsxs)(r.ComposedChart,{...j,children:[(0,b.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,b.jsx)(u.XAxis,{dataKey:"formattedDate",...k}),(0,b.jsx)(v.YAxis,{...k,tickFormatter:a=>`\xa5${a.toLocaleString()}`}),(0,b.jsx)(x.Tooltip,{content:l}),(0,b.jsx)(t.Bar,{dataKey:"totalFees",fill:B.colors.totalFees,radius:[4,4,0,0],animationDuration:B.animation.duration})]});default:return(0,b.jsxs)(r.ComposedChart,{...j,children:[(0,b.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,b.jsx)(u.XAxis,{dataKey:"formattedDate",...k}),(0,b.jsx)(v.YAxis,{yAxisId:"left",...k,tickFormatter:a=>a.toLocaleString()}),(0,b.jsx)(v.YAxis,{yAxisId:"right",orientation:"right",...k,tickFormatter:a=>`\xa5${a.toLocaleString()}`}),(0,b.jsx)(x.Tooltip,{content:l}),(0,b.jsx)(t.Bar,{yAxisId:"right",dataKey:"totalFees",fill:B.colors.totalFees,opacity:.7,radius:[2,2,0,0],animationDuration:1e3}),(0,b.jsx)(s.Line,{yAxisId:"left",type:"monotone",dataKey:"paymentCount",stroke:B.colors.paymentCount,strokeWidth:3,dot:{fill:B.colors.paymentCount,strokeWidth:2,r:4},activeDot:{r:6,fill:B.colors.paymentCount},animationDuration:B.animation.duration}),(0,b.jsx)(s.Line,{yAxisId:"right",type:"monotone",dataKey:"totalAmount",stroke:B.colors.totalAmount,strokeWidth:3,dot:{fill:B.colors.totalAmount,strokeWidth:2,r:4},activeDot:{r:6,fill:B.colors.totalAmount},animationDuration:B.animation.duration})]})}})()})})},f),(0,b.jsxs)(d.motion.div,{className:"mt-6 grid grid-cols-3 gap-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,b.jsxs)("div",{className:"text-center bg-white/30 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[i.maxPaymentCount.toLocaleString(),"件"]}),(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"最大決済件数"})]}),(0,b.jsxs)("div",{className:"text-center bg-white/30 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["¥",i.maxAmount.toLocaleString()]}),(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"最大決済金額"})]}),(0,b.jsxs)("div",{className:"text-center bg-white/30 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:["¥",i.maxFees.toLocaleString()]}),(0,b.jsx)("div",{className:"text-xs text-gray-600",children:"最大手数料"})]})]}),(0,b.jsxs)(d.motion.div,{className:"mt-4 text-center text-xs text-gray-500",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.5},children:["月間データ（日別表示） • 実データ",i.originalDataPoints,"点",i.originalDataPoints!==i.filledDataPoints&&(0,b.jsxs)("span",{className:"text-blue-600 ml-1",children:["• 0埋め",i.filledDataPoints-i.originalDataPoints,"点"]}),"• 全",i.filledDataPoints,"ポイント表示",(0,b.jsxs)("div",{className:"mt-1 text-gray-400",children:["期間: ",e.startDate," 〜 ",e.endDate]})]})]})}var F=a.i(405050),G=(0,F.createServerReference)("4046b463a7820584af323f960303194a6925f74d54",F.callServer,void 0,F.findSourceMapURL,"getPaymentStatsData"),H=(0,F.createServerReference)("401c8248fe363e92b28410dc1083368464cf187423",F.callServer,void 0,F.findSourceMapURL,"checkPaymentStatsDataAvailability");let I=new Date,J=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}-01`;function K(){console.log("--PaymentOverview--");let[a,i]=(0,c.useState)(J),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)({hasPrevious:!1,hasNext:!1}),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null),y=async a=>{v(!0),x(null);try{let[b,c]=await Promise.all([G({startDate:a}),H({currentDate:a})]);if(!b.success||!b.data)return void x(b.errMsg||"データの取得に失敗しました");r(b.data),t({hasPrevious:!!c.success&&(c.data?.hasPrevious||!1),hasNext:!!c.success&&(c.data?.hasNext||!1)})}catch(a){x(a instanceof Error?a.message:"エラーが発生しました")}finally{v(!1)}},z=b=>{let[c,d]=a.split("-").map(Number);i(`${"next"===b?12===d?c+1:c:1===d?c-1:c}-${String("next"===b?12===d?1:d+1:1===d?12:d-1).padStart(2,"0")}-01`)};(0,c.useEffect)(()=>{(async()=>{v(!0),x(null);try{let[a,b]=await Promise.all([G({}),H({currentDate:J})]);if(!a.success||!a.data)return void x(a.errMsg||"データの取得に失敗しました");r(a.data),t({hasPrevious:!!b.success&&(b.data?.hasPrevious||!1),hasNext:!!b.success&&(b.data?.hasNext||!1)})}catch(a){x(a instanceof Error?a.message:"エラーが発生しました")}finally{v(!1)}})()},[]),(0,c.useEffect)(()=>{q&&(console.log(`currentDate!==initialCurrentDate:${String(a!==J)}`),console.log(`data.period.startDate!==currentDate:${String(q.period.startDate!==a)}`),(a!==J||q.period.startDate!==a)&&y(a))},[a]),(0,c.useEffect)(()=>{q&&H({currentDate:a}).then(a=>{a.success&&a.data&&t({hasPrevious:a.data.hasPrevious,hasNext:a.data.hasNext})}).catch(()=>{})},[q]);let A=q?[{title:"総決済件数",value:q.summary.totalPaymentCount.toLocaleString(),icon:l,gradient:"from-blue-500 via-cyan-500 to-blue-600",shadow:"shadow-blue-500/30"},{title:"総決済金額",value:`\xa5${q.summary.totalAmount.toLocaleString()}`,icon:j,gradient:"from-emerald-500 via-green-500 to-teal-600",shadow:"shadow-emerald-500/30"},{title:"平均決済金額",value:`\xa5${q.summary.avgAmountPerPayment.toLocaleString()}`,icon:h.TrendingUp,gradient:"from-purple-500 via-violet-500 to-indigo-600",shadow:"shadow-purple-500/30"},{title:"総手数料",value:`\xa5${q.summary.totalFees.toLocaleString()}`,icon:k.DollarSign,gradient:"from-orange-500 via-amber-500 to-yellow-600",shadow:"shadow-orange-500/30"}]:[];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(d.motion.div,{className:"bg-white/80 backdrop-blur-2xl rounded-3xl border border-white/50 shadow-2xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10 p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.motion.div,{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-r from-indigo-500 via-purple-600 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/30",whileHover:{rotate:10,scale:1.1},transition:{duration:.2},children:(0,b.jsx)(m.BarChart3,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 bg-clip-text text-transparent",children:"月別決済統計"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:"全ユーザーの月間決済データ統合表示"})]})]}),(0,b.jsx)(d.motion.button,{onClick:()=>y(a),disabled:u,className:"w-10 h-10 sm:w-11 sm:h-11 bg-white/80 hover:bg-white disabled:bg-gray-100 rounded-xl border border-white/60 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,b.jsx)(n.RefreshCw,{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-600 ${u?"animate-spin":""}`})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,b.jsx)(d.motion.button,{onClick:()=>z("prev"),disabled:!s.hasPrevious||u,className:"w-10 h-10 sm:w-11 sm:h-11 bg-white/80 hover:bg-white disabled:bg-gray-100 disabled:text-gray-400 rounded-xl border border-white/60 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,b.jsx)(f.ChevronLeft,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,b.jsx)(d.motion.div,{className:"bg-gradient-to-r from-white via-blue-50 to-purple-50 px-4 py-2 sm:px-6 sm:py-3 rounded-xl border border-indigo-200/60 shadow-lg min-w-[140px] sm:min-w-[160px] text-center",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:(0,b.jsx)("div",{className:"text-base sm:text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:u?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)(n.RefreshCw,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin text-indigo-600"}),(0,b.jsx)("span",{className:"text-sm sm:text-base",children:"読込中..."})]}):(a=>{let[b,c]=a.split("-");return`${b}年${Number(c)}月`})(a)})},a),(0,b.jsx)(d.motion.button,{onClick:()=>z("next"),disabled:!s.hasNext||u,className:"w-10 h-10 sm:w-11 sm:h-11 bg-white/80 hover:bg-white disabled:bg-gray-100 disabled:text-gray-400 rounded-xl border border-white/60 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,b.jsx)(g.ChevronRight,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,b.jsx)(e.AnimatePresence,{children:w&&(0,b.jsx)(d.motion.div,{className:"mb-6 bg-red-50/80 backdrop-blur-xl border border-red-200 rounded-2xl p-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.AlertTriangle,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-red-700 font-medium text-sm",children:"エラーが発生しました"}),(0,b.jsx)("p",{className:"text-red-600 text-sm mt-1",children:w})]}),(0,b.jsx)("button",{onClick:()=>x(null),className:"text-red-400 hover:text-red-600 transition-colors",children:"✕"})]})})})]}),!u&&!w&&(0,b.jsx)("div",{className:"p-4 sm:p-6 pt-0",children:(0,b.jsx)(d.motion.div,{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:A.map((a,c)=>(0,b.jsxs)(d.motion.div,{className:`relative overflow-hidden bg-gradient-to-br ${a.gradient} rounded-2xl p-3 sm:p-4 lg:p-6 shadow-xl ${a.shadow} group`,initial:{opacity:0,scale:.9,rotateY:-10},animate:{opacity:1,scale:1,rotateY:0},transition:{duration:.5,delay:.1*c},whileHover:{scale:1.02,y:-4,rotateY:5},children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,b.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 sm:w-20 sm:h-20 bg-white/10 rounded-full -translate-y-8 sm:-translate-y-10 translate-x-8 sm:translate-x-10"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[(0,b.jsx)(a.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white drop-shadow-lg"}),(0,b.jsx)(d.motion.div,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white/80 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]}),(0,b.jsx)("div",{className:"text-lg sm:text-xl lg:text-2xl xl:text-3xl font-bold text-white mb-1 drop-shadow-lg leading-tight",children:a.value}),(0,b.jsx)("div",{className:"text-xs sm:text-sm text-white/90 font-medium",children:a.title})]}),(0,b.jsx)(d.motion.div,{className:"absolute top-2 right-2",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:(0,b.jsx)(p.Sparkles,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white/60"})})]},a.title))})}),!u&&!w&&(!q||0===q.stats.length)&&(0,b.jsxs)(d.motion.div,{className:"text-center py-8 sm:py-12 px-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[(0,b.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-6 bg-gradient-to-r from-gray-100 via-blue-100 to-purple-100 rounded-full flex items-center justify-center shadow-lg",children:(0,b.jsx)(m.BarChart3,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"統計データなし"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"この月には統計データがありません。"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"決済データが蓄積されると、ここに詳細な統計が表示されます。"})]}),u&&(0,b.jsxs)(d.motion.div,{className:"flex items-center justify-center gap-3 py-8 sm:py-12",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,b.jsx)(n.RefreshCw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600 animate-spin"}),(0,b.jsx)("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"統計データを読み込み中..."})]})]}),!u&&!w&&q&&q.stats.length>0&&(0,b.jsx)(d.motion.div,{className:"bg-white/70 backdrop-blur-xl rounded-3xl border border-white/40 shadow-xl overflow-hidden mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:(0,b.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(d.motion.div,{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",whileHover:{rotate:10,scale:1.1},transition:{duration:.2},children:(0,b.jsx)(h.TrendingUp,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"月別推移グラフ"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:"日別決済パフォーマンス変化の詳細分析"})]})]}),(0,b.jsx)(E,{data:q.stats,periodInfo:{startDate:q.period.startDate,endDate:q.period.endDate}})]})})]})}},733479,a=>{"use strict";a.s(["default",()=>w],733479);var b=a.i(187924),c=a.i(572131),d=a.i(449862);let e=(0,d.default)("outline","credit-card","CreditCard",[["path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M7 15l.01 0",key:"svg-2"}],["path",{d:"M11 15l2 0",key:"svg-3"}]]),f=(0,d.default)("outline","refresh","Refresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),g=(0,d.default)("outline","chevron-left","ChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);var h=a.i(857216);let i=(0,d.default)("outline","clock","Clock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),j=(0,d.default)("outline","check","Check",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);var k=a.i(851519),l=a.i(890206),m=a.i(160265),n=a.i(484598),o=a.i(405050),p=(0,o.createServerReference)("7f8df3223b34baff3d60eadd829e3d87165ff8cf5f",o.callServer,void 0,o.findSourceMapURL,"getPaymentHistory"),q=a.i(898873);let r=Number("6")||5,s={completed:{icon:j,color:"text-green-600",bgColor:"bg-green-100",label:"完了"},pending:{icon:i,color:"text-orange-600",bgColor:"bg-orange-100",label:"処理中"},failed:{icon:k.IconX,color:"text-red-600",bgColor:"bg-red-100",label:"失敗"},expired:{icon:l.IconAlertTriangle,color:"text-gray-600",bgColor:"bg-gray-100",label:"期限切れ"},default:{icon:i,color:"text-gray-600",bgColor:"bg-gray-100",label:"不明"}},t={creditcard:"クレジットカード",btc:"Bitcoin",eth:"Ethereum",ltc:"Litecoin"},u=a=>s[a]||s.default,v=a=>t[a]||a.toUpperCase();function w({adminId:a}){let[d,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[o,s]=(0,c.useState)(1),[t,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),B=async a=>{try{1===a&&y(!0);let b=await p({advertiserId:0,page:a});b.success?(b.data&&j(b.data),b.pendingData&&l(b.pendingData),A("")):A(b.errMsg||"決済履歴の取得に失敗しました")}catch(a){A("ネットワークエラーが発生しました")}finally{w(!1),y(!1)}},C=async()=>{try{(await (0,q.checkPendingPayments)({advertiserId:0})).success&&B(1)}catch(a){console.error("Pending check error:",a)}};(0,c.useEffect)(()=>{B(1)},[]),(0,c.useEffect)(()=>{if(k.length>0){let a=setInterval(C,3e4);return()=>clearInterval(a)}},[k.length]);let D=a=>{a!==o&&a>0&&(s(a),B(a))},E=d.slice(0,r),F=d.length>r;return(0,b.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b border-gray-100 p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl",children:(0,b.jsx)(e,{className:"w-6 h-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"全ユーザー決済履歴"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["システム全体の決済状況",k.length>0&&(0,b.jsxs)("span",{className:"ml-2 text-orange-600 font-medium",children:["(",k.length,"件処理中)"]})]})]})]}),(0,b.jsx)("button",{onClick:()=>B(1),disabled:x,className:`p-2 rounded-xl bg-white/80 hover:bg-white shadow-sm border border-gray-200 transition-all ${x?"animate-spin":"hover:scale-105"}`,children:(0,b.jsx)(f,{className:"w-5 h-5 text-gray-600"})})]})}),(0,b.jsxs)("div",{className:"p-6",children:[z&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:(0,b.jsx)("p",{className:"text-red-700 text-sm",children:z})}),t?(0,b.jsx)("div",{className:"space-y-4",children:Array.from({length:4}).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-xl animate-pulse",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},c))}):(0,b.jsxs)(b.Fragment,{children:[k.length>0&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-xl p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-orange-800 mb-3 flex items-center gap-2",children:[(0,b.jsx)(i,{className:"w-5 h-5 animate-pulse"}),"未確定決済 (",k.length,"件)"]}),(0,b.jsx)("div",{className:"space-y-3",children:k.map(a=>{let c=u(a.status),d=c.icon;return(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`p-2 ${c.bgColor} rounded-lg ${c.color}`,children:(0,b.jsx)(d,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:v(a.paymentMethod)}),a.userName&&(0,b.jsxs)("span",{className:"text-gray-500",children:["by ",a.userName]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:(0,n.formatDate)(a.createdAt)})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("div",{className:"font-bold text-orange-700",children:["¥",Number(a.totalAmount).toLocaleString()]})})]},a.id)})})]})}),0===E.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(e,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"決済履歴がありません"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"決済が実行されると、こちらに履歴が表示されます"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"space-y-3",children:E.map(a=>{let c=u(a.status),d=c.icon;return(0,b.jsxs)("div",{className:"group flex items-center justify-between p-4 border border-gray-100 rounded-xl hover:border-gray-200 hover:shadow-md transition-all",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-3 ${c.bgColor} rounded-xl ${c.color} group-hover:scale-110 transition-transform`,children:(0,b.jsx)(d,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-800",children:v(a.paymentMethod)}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${c.bgColor} ${c.color}`,children:c.label}),a.userName&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,b.jsx)(m.IconUser,{className:"w-3 h-3"}),a.userName]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"ccbill"===a.provider?"クレジットカード決済":"仮想通貨決済"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:(0,n.formatDate)(a.createdAt)})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["¥",Number(a.totalAmount).toLocaleString()]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.currency})]})]},a.id)})}),(o>1||F)&&(0,b.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["ページ ",o," - ",E.length,"件表示中"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>D(o-1),disabled:o<=1,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(g,{className:"w-4 h-4"})}),(0,b.jsx)("span",{className:"px-3 py-1 bg-purple-500 text-white rounded-lg text-sm font-medium",children:o}),(0,b.jsx)("button",{onClick:()=>D(o+1),disabled:!F,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(h.IconChevronRight,{className:"w-4 h-4"})})]})]})]})]})]})]})}}];

//# sourceMappingURL=src_components_payment_49d9ce0b._.js.map