(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,965380,e=>{"use strict";e.s(["default",()=>a],965380);var r=e.i(843476),t=e.i(271645),s=e.i(95187),l=(0,s.createServerReference)("7fac729ba473c5ded469daae99f7714c94c2e7ea91",s.callServer,void 0,s.findSourceMapURL,"manageUserAndNotify");let n={activate:{title:"アカウントを有効化しました",description:"お客様のアカウントが正常に有効化されました。サービスをご利用いただけます。ご不明な点がございましたらお気軽にお問い合わせください。"},deactivate:{title:"アカウントを無効化しました",description:"お客様のアカウントが無効化されました。サービスの利用が制限されています。詳細については管理者までお問い合わせください。"}},a=e=>{let{user:s}=e,[a,i]=(0,t.useState)({old:s.isActive,new:s.isActive}),[o,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),m=(0,t.useRef)(null),x=async e=>{if(e.preventDefault(),o)return;let r=new FormData(e.currentTarget),t=r.get("title"),n=r.get("description"),c=r.get("notificationType"),x="on"===r.get("sendEmail");if(!t.trim()||!n.trim())return void u("タイトルと通知内容は必須です");d(!0),u("");try{let e=await l({targetUserId:s.id,isActiveToggle:a.old!==a.new?a.new:void 0,notificationTitle:t.trim(),notificationDescription:n.trim(),notificationType:c||"system",sendEmail:x});if(e.success){var p;u("処理が完了しました"),i({...a,old:a.new}),null==(p=m.current)||p.reset(),alert("Success.")}else alert(e.errMsg),u(e.errMsg)}catch(e){console.error(e),u("処理中にエラーが発生しました")}finally{d(!1)}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"管理操作パネル"}),(0,r.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-orange-200 to-transparent"})]}),(0,r.jsxs)("form",{ref:m,onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50/80 to-indigo-50/60 rounded-2xl p-6 border border-blue-200/50",children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-blue-900 mb-4",children:"アカウント制御"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"現在の状態:"}),(0,r.jsx)("span",{className:"ml-2 px-3 py-1 rounded-full text-sm font-bold ".concat(a.old?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:a.old?"アクティブ":"無効"})]})}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"toggleAccount",className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500",checked:a.old!==a.new,onChange:()=>{(e=>{if(console.log("--handleStatusToggle--"),!m.current)return;console.log("newStatus:".concat(e));let r=e?n.activate:n.deactivate,t=m.current.querySelector('input[name="title"]'),s=m.current.querySelector('textarea[name="description"]'),l=a.old!==e;console.log("changed:".concat(l)),t&&(t.value=l?r.title:""),s&&(s.value=l?r.description:""),i({...a,new:e})})(!a.new)}}),(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["アカウントを",a.old?"無効化":"有効化","する"]})]})})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50/80 to-pink-50/60 rounded-2xl p-6 border border-purple-200/50",children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-purple-900 mb-4",children:"通知送信"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:["通知タイトル ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"title",maxLength:100,className:"w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 focus:outline-none",placeholder:"通知のタイトルを入力...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:["通知内容 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{name:"description",maxLength:500,rows:4,className:"w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 focus:outline-none resize-none",placeholder:"通知の詳細内容を入力...",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"通知カテゴリー"}),(0,r.jsxs)("select",{name:"notificationType",className:"w-full px-4 py-3 border border-purple-200 rounded-xl focus:ring-4 focus:ring-purple-500/20 focus:border-purple-500 focus:outline-none",children:[(0,r.jsx)("option",{value:"system",children:"システム"}),(0,r.jsx)("option",{value:"payment",children:"決済・ポイント"}),(0,r.jsx)("option",{value:"advertisement",children:"広告配信"}),(0,r.jsx)("option",{value:"other",children:"その他"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"sendEmail",className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-purple-900",children:"メール通知も送信"})]})})]})]})]}),c&&(0,r.jsx)("div",{className:"p-4 rounded-xl ".concat(c.includes("完了")?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:c}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"submit",disabled:o,className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-bold transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed shadow-lg hover:shadow-xl disabled:shadow-none",children:o?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"処理中..."]}):"実行する"})})]})]})}}]);