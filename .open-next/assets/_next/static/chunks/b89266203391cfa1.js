(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,171672,e=>{"use strict";e.s(["formatDate",()=>s,"formatTime",()=>t]);let s=e=>new Intl.DateTimeFormat("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e)),t=e=>{let s=Math.floor(e/60);return"".concat(s.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))}},618353,e=>{"use strict";e.s(["default",()=>a],618353);var s=e.i(843476),t=e.i(161822);let r=(0,e.i(33550).default)("outline","wallet","Wallet",[["path",{d:"M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12",key:"svg-0"}],["path",{d:"M20 12v4h-4a2 2 0 0 1 0 -4h4",key:"svg-1"}]]),a=()=>{let{user:e}=(0,t.default)();return(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium opacity-90",children:"現在のポイント残高"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,s.jsx)(r,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-3xl font-bold",children:e.amount.toLocaleString()}),(0,s.jsx)("span",{className:"text-lg",children:"P"})]})]})})})}},906225,e=>{"use strict";e.s(["default",()=>u],906225);var s=e.i(843476),t=e.i(271645),r=e.i(618353),a=e.i(618566),l=e.i(95187),n=(0,l.createServerReference)("7fd7fb6dd5442bc160177033d881556836a6f7b03a",l.callServer,void 0,l.findSourceMapURL,"createCryptoPayment"),o=e.i(522016),i=(0,l.createServerReference)("7f459ea1a4c1f8e4460291ad964a00bdc2458dacb7",l.callServer,void 0,l.findSourceMapURL,"checkCryptoPaymentStatus"),d=e.i(171672);function c(e){let{advertiserId:r,selectedCurrency:l,paymentDataState:n,setPaymentDataState:c,setProcessingData:x}=e,m=(0,a.useRouter)(),[h,u]=(0,t.useState)(3600),[g,p]=(0,t.useState)(!1),[b,j]=(0,t.useState)(!1),[f,v]=(0,t.useState)(!1),[N,y]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=document.getElementById("scrollTargetV1");if(e){let s=e.offsetTop-80;window.scrollTo({top:s,behavior:"smooth"})}let s=e=>{e.preventDefault(),e.returnValue="現在の入力情報が失われる可能性があります。よろしいですか？"},t=e=>{confirm("現在の入力情報が失われる可能性があります。よろしいですか？")&&x("entry")};return window.addEventListener("beforeunload",s),window.addEventListener("popstate",t),window.history.pushState(null,"",window.location.href),()=>{window.removeEventListener("beforeunload",s),window.removeEventListener("popstate",t)}},[]),(0,t.useEffect)(()=>{if(h>0){let e=setTimeout(()=>u(e=>e-1),1e3);return()=>clearTimeout(e)}0===h&&y("決済時間が過ぎました。最初からやり直してください。")},[h]),(0,t.useEffect)(()=>{let e=setInterval(async()=>{try{let e=await i({transactionId:n.transactionId});if(401===e.statusCode){alert(e.errMsg),m.push("/auth/advertiser");return}if(!e.success)throw Error(e.errMsg);if(e.success){if("completed"===e.status)m.push("/advertiser/".concat(r,"/point/purchase/success?paymentId=").concat(n.id));else if("failed"===e.status||"expired"===e.status){let s="failed"===e.status?"決済が失敗しました。再度お試しください。":"決済の有効期限が切れました。最初からやり直してください。";y(s),v(!1),c(null),x("entry")}}}catch(e){console.error(e),y("Payment status check error.")}},3e4);return()=>clearInterval(e)},[f]);let w=(e=>{switch(e){case"btc":return{icon:"🟠",name:"Bitcoin",color:"from-orange-400 to-yellow-500"};case"eth":return{icon:"⚪",name:"Ethereum",color:"from-blue-400 to-purple-500"};case"ltc":return{icon:"🟡",name:"Litecoin",color:"from-gray-400 to-blue-400"};default:return{icon:"💎",name:"Cryptocurrency",color:"from-purple-400 to-pink-500"}}})(l),k=async(e,s)=>{try{await navigator.clipboard.writeText(e),"address"===s?(p(!0),setTimeout(()=>p(!1),2e3)):(j(!0),setTimeout(()=>j(!1),2e3))}catch(e){alert("Copy failed:".concat(e instanceof Error?e.message:"Something went wrong."))}};return f?(0,s.jsxs)("div",{className:"space-y-8",id:"scrollTargetV2",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg",children:(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mb-4",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"決済処理中"}),(0,s.jsx)("p",{className:"text-gray-600",children:"送金を確認しています。しばらくお待ちください。"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"bg-white/70 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-blue-600 font-semibold mb-1",children:"⏱️ 処理時間の目安"}),(0,s.jsxs)("p",{className:"text-gray-700",children:["ネットワークの混雑状況により",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"font-bold text-blue-700",children:"数分～数十分"}),"かかる場合があります"]})]}),(0,s.jsxs)("div",{className:"bg-white/70 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-green-600 font-semibold mb-1",children:"🔄 自動確認"}),(0,s.jsx)("p",{className:"text-gray-700",children:"決済状況を確認中..."})]})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"📋"}),"送金情報の再確認"]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"送金先アドレス"}),(0,s.jsx)("div",{className:"font-mono text-xs text-gray-800 break-all",children:n.payAddress})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-600 mb-2 block",children:"送金金額"}),(0,s.jsxs)("div",{className:"font-mono text-lg font-bold text-green-700",children:[n.payAmount," ",l.toUpperCase()]})]})]})]}),N&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-red-500 text-xl",children:"⚠"}),(0,s.jsx)("p",{className:"text-red-700 font-medium",children:N})]})}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-purple-800 mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"🛠️"}),"30分以上経っても反映されない場合"]}),(0,s.jsxs)("div",{className:"space-y-3 text-base",children:[(0,s.jsx)("div",{className:"bg-white/80 p-4 rounded-xl",children:(0,s.jsx)("div",{className:"text-purple-700",children:(0,s.jsxs)("ul",{className:"list-decimal list-inside",children:[(0,s.jsxs)("li",{children:["送金金額,送金先アドレスに間違いがないかご確認ください。",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-gray-500 text-sm pl-[16px]",children:"送金情報にミスがある場合、決済に失敗します。その場合は、サポート対象外です🙇‍♀️"})]}),(0,s.jsx)("li",{children:"サポートにお問い合わせください。取引IDや送金情報をお知らせいただくとスムーズです。"})]})})}),(0,s.jsx)("div",{className:"flex items-center justify-center gap-4",children:(0,s.jsx)(o.default,{href:"/advertiser/".concat(r,"/support"),className:"bg-white text-purple-600 border border-purple-600 px-6 py-3 rounded-xl hover:bg-purple-50 transition-colors text-sm font-medium",children:"サポートに連絡"})})]})]})]}):(0,s.jsxs)("div",{className:"space-y-6",id:"scrollTargetV1",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 rounded-xl shadow-lg overflow-hidden",children:(0,s.jsx)("div",{className:"px-6 py-5",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 p-3 bg-white/20 rounded-full",children:(0,s.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,s.jsx)("div",{className:"text-white",children:(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-yellow-300 mt-1",children:"•"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"text-yellow-200",children:"送金金額は必ず正確に入力してください"})," - 金額が間違っていると決済が失敗します"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-yellow-300 mt-1",children:"•"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"text-yellow-200",children:"ウォレットアドレスは必ず正確に入力してください"})," - アドレスが間違っていると送金が失われる可能性があります"]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-yellow-300 mt-1",children:"•"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"text-yellow-200",children:"手入力は避け、必ずコピー機能を使用してください"})," - 手入力によるミスを防ぐため"]})]})]})})]})})}),(0,s.jsx)("div",{className:"bg-gradient-to-r ".concat(h<600?"from-red-500 to-pink-500":"from-orange-500 to-red-500"," rounded-xl shadow-lg"),children:(0,s.jsx)("div",{className:"px-6 py-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("span",{className:"text-2xl font-mono font-bold text-white tracking-wider",children:["残り時間: ",(0,d.formatTime)(h)]})]})})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,s.jsx)("div",{className:"text-2xl mr-3",children:w.icon}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-xl",children:[w.name," で送金"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 font-normal",children:"ご自身のウォレットを開き、以下の情報を正確に入力"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"送金先アドレス",(0,s.jsx)("span",{className:"text-red-500 text-xs ml-2",children:"⚠️ 必ずコピーしてください"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"p-4 bg-gray-50 rounded-xl border-2 border-gray-200 font-mono text-sm break-all",children:n.payAddress}),(0,s.jsx)("button",{className:"absolute top-2 right-2 h-8 w-8 p-0 bg-white border border-gray-300 rounded hover:bg-blue-50 transition-colors",onClick:()=>k(n.payAddress,"address"),children:g?(0,s.jsx)("svg",{className:"w-4 h-4 text-green-600 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"送金金額",(0,s.jsx)("span",{className:"text-red-500 text-xs ml-2",children:"⚠️ 正確に入力してください"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl border-2 border-green-200 font-mono text-xl font-bold text-green-800",children:[n.payAmount," ",l.toUpperCase()]}),(0,s.jsx)("button",{className:"absolute top-2 right-2 h-8 w-8 p-0 bg-white border border-gray-300 rounded hover:bg-green-50 transition-colors",onClick:()=>k(n.payAmount,"amount"),children:b?(0,s.jsx)("svg",{className:"w-4 h-4 text-green-600 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl shadow-lg",children:(0,s.jsxs)("div",{className:"p-4 text-center",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-white mb-2",children:["送金は完了しましたか",(0,s.jsx)("span",{className:"text-2xl animate-pulse",children:"❔"})]}),(0,s.jsx)("p",{className:"text-green-100 text-sm",children:"ウォレットアプリで送金を実行した後、下のボタンを必ずクリック"})]}),(0,s.jsx)("button",{onClick:()=>{v(!0),setTimeout(()=>{let e=document.getElementById("scrollTargetV2");if(e){let s=e.offsetTop-80;window.scrollTo({top:s,behavior:"smooth"})}},500)},className:"bg-white text-green-600 font-bold py-4 px-8 rounded-xl shadow-lg hover:bg-gray-100 transition-all text-lg cursor-pointer",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl animate-bounce",children:"✅"}),"送金しました",(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})})]})}let x={ltc:{name:"Litecoin",symbol:"LTC",icon:"🟡",features:["⭐ 推奨","ガス代約数十円","送金速度: 約2.5分"],description:"ガス代が安く、送金速度が速いためおすすめです"},eth:{name:"Ethereum",symbol:"ETH",icon:"⚪",features:["ガス代高め","送金時間: 数分～数時間"],description:"ガス代が高額になる場合があります"},btc:{name:"Bitcoin",symbol:"BTC",icon:"🟠",features:["最もメジャー","ガス代高め","送金時間: 10分～数時間"],description:"最も信頼性が高いですが、ガス代と送金時間にご注意ください"}};function m(e){let{advertiserId:r,amount:l,setProcessingData:o,fee:i,totalAmount:d}=e,m=(0,a.useRouter)(),[h,u]=(0,t.useState)("ltc"),[g,p]=(0,t.useState)(!1),[b,j]=(0,t.useState)(""),[f,v]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=document.getElementById("scrollTarget");if(e){let s=e.offsetTop-80;window.scrollTo({top:s,behavior:"smooth"})}let s=e=>{e.preventDefault(),e.returnValue="現在の入力情報が失われる可能性があります。よろしいですか？"},t=()=>{confirm("現在の入力情報が失われる可能性があります。よろしいですか？")&&o("entry")};return window.addEventListener("beforeunload",s),window.addEventListener("popstate",t),window.history.pushState(null,"",window.location.href),()=>{window.removeEventListener("beforeunload",s),window.removeEventListener("popstate",t)}},[]);let N=async()=>{p(!0),j("");try{let{success:e,errMsg:s,statusCode:t,paymentData:a}=await n({advertiserId:r,currency:h,totalAmount:d,purchaseAmount:l});if(401===t){alert(s),m.push("/auth/advertiser");return}if(!e||!a)throw Error(s);v(a)}catch(e){console.error("Payment creation error:",e),j("決済の作成に失敗しました。再度お試しください。")}finally{p(!1)}};return null===f?(0,s.jsxs)("div",{className:"space-y-8",id:"scrollTarget",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"仮想通貨を選択"}),(0,s.jsx)("p",{className:"text-gray-600",children:"決済に使用する仮想通貨を選択してください"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"購入内容"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"取得ポイント:"}),(0,s.jsxs)("span",{className:"font-medium",children:[l.toLocaleString(),"ポイント"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"購入金額:"}),(0,s.jsxs)("span",{className:"font-medium",children:["¥",l.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"決済手数料 (1.5%):"}),(0,s.jsxs)("span",{className:"font-medium",children:["¥",i.toLocaleString()]})]}),(0,s.jsx)("div",{className:"border-t border-gray-300 pt-2 mt-2",children:(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,s.jsx)("span",{children:"合計金額:"}),(0,s.jsxs)("span",{children:["¥",d.toLocaleString()]})]})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,s.jsx)("svg",{className:"w-6 h-6 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"仮想通貨を選択"]}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(x).map(e=>{let[t,r]=e;return(0,s.jsx)("div",{className:"group relative",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4 p-6 border-2 rounded-xl hover:border-green-300 transition-all cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"currency",value:t,checked:h===t,onChange:e=>u(e.target.value),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500 mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("label",{className:"font-semibold flex items-center gap-3 text-lg cursor-pointer",children:[(0,s.jsx)("span",{className:"text-2xl",children:r.icon}),(0,s.jsxs)("span",{children:[r.name," (",r.symbol,")"]})]}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:r.features.map((e,t)=>(0,s.jsx)("span",{className:"inline-block text-xs px-3 py-1 rounded-full font-medium ".concat(e.includes("推奨")?"bg-green-100 text-green-800 border border-green-200":e.includes("高め")?"bg-orange-100 text-orange-800 border border-orange-200":"bg-gray-100 text-gray-700 border border-gray-200"),children:e},t))}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:r.description})]})]})},t)})})]}),b&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-red-500 text-xl",children:"⚠"}),(0,s.jsx)("p",{className:"text-red-700 font-medium",children:b})]})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{confirm("現在の入力情報が失われる可能性があります。よろしいですか？")&&o("entry")},className:"flex-1 py-4 px-6 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-all",disabled:g,children:"← 戻る"}),(0,s.jsx)("button",{type:"button",onClick:N,disabled:g,className:"\n                            flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all\n                            ".concat(g?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl","\n                        "),children:g?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"決済情報を作成中..."]}):(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[x[h].icon,x[h].name," で決済を開始 →"]})})]})]}):(0,s.jsx)(c,{advertiserId:r,selectedCurrency:h,paymentDataState:f,setPaymentDataState:v,setProcessingData:o})}let h=[500,1e3,3e3,5e3,1e4,2e4,5e4];function u(e){let{advertiserId:a,paymentType:l}=e,[n,o]=(0,t.useState)({amount:[500,""],agreedToTerms:[!1,""]}),[i,d]=(0,t.useState)(""),[c,x]=(0,t.useState)("entry"),u=e=>{let s,t=e.target.name;if("amount"===t){s=Number(e.target.value);let r="";isNaN(s)||s<=0?r="有効な金額を入力してください":s<100?r="最小購入額は¥".concat(100..toLocaleString(),"です"):s>1e5&&(r="最大購入額は¥".concat(1e5.toLocaleString(),"です")),o({...n,[t]:[s,r]})}else s=e.target.checked,o({...n,[t]:[s,""]});i&&d("")},g=async()=>{if("entry"!==c)return;let{amount:e,agreedToTerms:s}=n;if(s[0]||(s[1]="利用規約に同意してください"),isNaN(e[0])||e[0]<=0?e[1]="有効な金額を入力してください":e[0]<100?e[1]="最小購入額は¥".concat(100..toLocaleString(),"です"):e[0]>1e5&&(e[1]="最大購入額は¥".concat(1e5.toLocaleString(),"です")),s[1]||e[1]){d("入力内容に問題があります"),o({agreedToTerms:s,amount:e});return}x("purchase")},p=()=>"credit"===l?Math.ceil(.035*n.amount[0]):Math.ceil(.015*n.amount[0]),b=()=>n.amount[0]+p();return"entry"===c?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(r.default,{}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,s.jsx)("svg",{className:"w-6 h-6 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"購入金額"]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"金額選択（1ポイント = 1円）"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("input",{type:"number",name:"amount",placeholder:"金額を入力",value:n.amount[0],onChange:u,min:100,max:1e5,className:"w-full p-3 border-2 rounded-lg text-lg font-semibold focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all ".concat(n.amount[1]?"border-red-500":"border-gray-300 focus:border-blue-500")}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["最小: ¥",100..toLocaleString()," - 最大: ¥",1e5.toLocaleString()]}),n.amount[1]&&(0,s.jsxs)("span",{className:"text-red-500 text-xs flex items-center gap-1 mt-1",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.amount[1]]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3",children:h.map(e=>(0,s.jsxs)("button",{type:"button",className:"\n                                            p-3 rounded-lg border-2 font-semibold transition-all\n                                            ".concat(n.amount[0]===e?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700","\n                                        "),onClick:()=>o({...n,amount:[e,""]}),children:["¥",e.toLocaleString()]},e))})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("input",{type:"checkbox",name:"agreedToTerms",id:"terms",checked:n.agreedToTerms[0],onChange:u,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-1"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"terms",className:"text-sm font-medium text-gray-700",children:"以下に同意します"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("a",{href:"/legal/terms",target:"_blank",className:"text-blue-600 hover:underline",children:"利用規約"})," ","および"," ",(0,s.jsx)("a",{href:"/legal/privacy",target:"_blank",className:"text-blue-600 hover:underline",children:"プライバシーポリシー"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"ポイントを購入することで、返金ポリシーと利用規約に同意したものとみなされます。"})]})]})]}),n.agreedToTerms[1]&&(0,s.jsxs)("span",{className:"text-red-500 text-xs flex items-center gap-1 mt-2",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.agreedToTerms[1]]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,s.jsx)("svg",{className:"w-6 h-6 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"購入内容確認"]}),(0,s.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:"取得ポイント:"}),(0,s.jsxs)("span",{className:"text-xl font-bold text-green-700",children:[n.amount[0].toLocaleString(),"ポイント"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-gray-700 font-medium",children:"購入金額:"}),(0,s.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["¥",n.amount[0].toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("span",{className:"text-gray-700 font-medium",children:["決済手数料 (","credit"===l?"3.5":"1.5","%):"]}),(0,s.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["¥",p().toLocaleString()]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"合計金額:"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-blue-700",children:["¥",b().toLocaleString()]})]})})]}),i&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl mb-6",children:(0,s.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i]})}),(0,s.jsx)("button",{type:"button",onClick:g,disabled:!n.agreedToTerms[0]||""!==n.amount[1]||0===n.amount[0],className:"\n                                w-full py-4 px-6 rounded-lg font-bold text-lg transition-all\n                                ".concat(n.agreedToTerms[0]&&""===n.amount[1]&&0!==n.amount[0]?"credit"===l?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl":"bg-green-600 hover:bg-green-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed","\n                            "),children:"".concat("credit"===l?"クレジットカード":"仮想通貨","決済へ進む →")}),(0,s.jsxs)("div",{className:"mt-6 text-xs text-gray-500 space-y-1 border-t border-gray-200 pt-4",children:[(0,s.jsx)("p",{children:"• 決済確認後、ポイントが即座に付与されます"}),(0,s.jsx)("p",{children:"• ポイントの返金は行っておりません"}),(0,s.jsx)("p",{children:"• 全ての取引は暗号化されて保護されています"})]})]})]})]}):"crypt"===l?(0,s.jsx)(m,{advertiserId:a,amount:n.amount[0],setProcessingData:x,fee:p(),totalAmount:b()}):"<CreditPurchaseForm.tsx>//未作成"}}]);