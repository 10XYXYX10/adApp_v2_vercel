(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,179376,e=>{"use strict";e.s(["dangerousCharToSpace",()=>t,"entityToDangerousChar",()=>a,"validateSimpleYouTubeId",()=>u,"validationForAuthenticationPassword",()=>i,"validationForBirthDate",()=>c,"validationForEmail",()=>o,"validationForPassword",()=>n,"validationForPhoneNumber",()=>d,"validationForWord",()=>l]);let t=e=>e?e.replace(/[<>&|"'`;　=%?!\\]/g,()=>" "):"",r={"&lt;":"<","&gt;":">","&#x2f;":"/","&amp;":"&","&#x7c;":"|","&quot;":'"',"&#x27;":"'","&#x60;":"`","&#059;":";","；":";","&#x3d;":"=","&#x25;":"%","&#x3f;":"?","&#x21;":"!","&#x23;":"#","&#x40;":"@","&#x2a;":"*","&#092;":"\\","&#x2b;":"+","&#x2d;":"-"},s={"&lt;":"＜","&gt;":"＞","&#x2f;":"／","&amp;":"＆","&#x7c;":"｜","&quot;":"”","&#x27;":"’","&#x60;":"‘","&#059;":"；","&#x3d;":"＝","&#x25;":"％","&#x3f;":"？","&#x21;":"！","&#x23;":"＃","&#x40;":"＠","&#x2a;":"＊","&#092;":"＼","&#x2b;":"＋","&#x2d;":"ー"},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"half";if(!e)return"";let a="half"===t?r:s;return e.replace(/(&lt;|&gt;|&#x2f;|&amp;|&#x7c;|&quot;|&#x27;|&#x60;|&#059;|&#x3d;|&#x25;|&#x3f;|&#x21;|&#x23;|&#x40;|&#x2a;|&#092;|&#x2b;|&#x2d;)/g,e=>a[e])},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return 0===e.length||e.length>t?{result:!1,message:"1～".concat(t,"字以内の文字列を入力して下さい")}:/[<>/&|"'`;=%?!#@*\\\+\-]/.test(e)?{result:!1,message:"半角の「<>/&|\"'`;=%?!#@*\\+-」は使用不可"}:{result:!0,message:"success"}},o=e=>0===e.length||e.length>50?{result:!1,message:"1～50字以内のメールアドレを入力して下さい"}:/^[a-zA-Z0-9]+[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?{result:!0,message:"success"}:{result:!1,message:"有効なメールアドレスの形式でありません"},n=e=>e.length<5||e.length>50?{result:!1,message:"5～50字以内の半角の英数字を入力して下さい"}:/^[A-Za-z0-9]+$/.test(e)?{result:!0,message:"success"}:{result:!1,message:"半角の英数字で入力して下さい"},i=e=>6!==e.length?{result:!1,message:"6桁の半角数字を入力して下さい"}:/^[0-9]+$/.test(e)?{result:!0,message:"success"}:{result:!1,message:"半角数字で入力して下さい"},d=e=>{if(11!==e.length)return{result:!1,message:"11桁の半角数字を入力して下さい"};if(!/^0[7-9]0\d{8}$/.test(e))return{result:!1,message:"070,080,090のいずれかで始まる11桁の半角数字を入力して下さい"};let t=e.slice(3,7),r=e.slice(7,11),s=/(\d)\1{3}/;if(s.test(t)&&s.test(r))return{result:!1,message:"同じ数字が4回連続している部分があります"};let a=e.slice(3,11);return"01234567"===a||"12345678"===a||"23456789"===a||"76543210"===a||"87654321"===a||"98765432"===a?{result:!1,message:"8桁の連番が含まれています"}:{result:!0,message:"success"}},c=e=>{if(!e)return{result:!1,message:"生年月日を入力して下さい"};let t=new Date(e),r=new Date;if(isNaN(t.getTime()))return{result:!1,message:"有効な日付を入力して下さい"};let s=r.getFullYear()-t.getFullYear(),a=r.getMonth()-t.getMonth(),l=r.getDate()-t.getDate(),o=s;return((a<0||0===a&&l<0)&&o--,o<18)?{result:!1,message:"18歳以上である必要があります"}:t>r?{result:!1,message:"未来の日付は入力できません"}:{result:!0,message:"success"}},u=async e=>{let t=e.trim();if(!t)return{exists:!1,error:"YouTube動画IDが空です"};if(!/^[a-zA-Z0-9_-]{11}$/.test(t))return{exists:!1,error:"YouTube動画IDの形式が正しくありません"};try{let e=await fetch("https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=".concat(t,"&format=json"),{method:"GET",signal:AbortSignal.timeout(5e3)});if(console.log("YouTube validation response status: ".concat(e.status," for videoId: ").concat(t)),200===e.status){let t=await e.json();if(t&&t.title&&t.html)return{exists:!0};return{exists:!1,error:"YouTube動画の情報を取得できませんでした"}}if(404===e.status)return{exists:!1,error:"YouTube動画が見つかりません"};if(401===e.status||403===e.status)return{exists:!1,error:"YouTube動画にアクセスできません（非公開またはプライベート動画）"};else return{exists:!1,error:"YouTube動画の確認でエラーが発生しました（ステータス: ".concat(e.status,"）")}}catch(e){if(console.error("YouTube validation error:",e),e instanceof Error){if("AbortError"===e.name)return{exists:!1,error:"YouTube動画の確認がタイムアウトしました"};else if(e.message.includes("fetch"))return{exists:!1,error:"ネットワークエラーが発生しました"}}return{exists:!1,error:"YouTube動画の確認に失敗しました"}}}},638091,e=>{"use strict";e.s(["default",()=>i],638091);var t=e.i(843476),r=e.i(271645),s=e.i(179376);let a=e=>{let{message:r,userType:a}=e,l=((e,t)=>"advertiser"===t&&"user"===e||"admin"===t&&"admin"===e)(r.senderType,a);return(0,t.jsx)("div",{className:"flex ".concat(l?"justify-end":"justify-start"),children:(0,t.jsxs)("div",{className:"flex gap-3 max-w-[85%] sm:max-w-[75%] lg:max-w-[65%] ".concat(l?"flex-row-reverse":"flex-row"),children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center shadow-lg ".concat(l?"bg-gradient-to-br from-emerald-500 to-teal-600":"bg-gradient-to-br from-blue-500 to-indigo-600"),children:l?(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M12 2v4m0 12v4M2 12h4m12 0h4"})})}),(0,t.jsxs)("div",{className:"flex flex-col ".concat(l?"items-end":"items-start"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 ".concat(l?"flex-row-reverse":"flex-row"),children:[(0,t.jsx)("span",{className:"text-sm font-medium ".concat(l?"text-emerald-700":"text-blue-700"),children:"user"===r.senderType?"あなた":"サポート"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(r.createdAt).toLocaleDateString("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"relative p-4 rounded-2xl shadow-lg backdrop-blur-sm border ".concat(l?"bg-gradient-to-br from-emerald-500 to-teal-600 text-white border-emerald-300/30":"bg-white/90 text-gray-800 border-white/50"," ").concat(l?"rounded-br-sm":"rounded-bl-sm"),children:[(0,t.jsx)("p",{className:"text-sm sm:text-base leading-relaxed whitespace-pre-wrap ".concat(l?"text-white":"text-gray-800"),children:(0,s.entityToDangerousChar)(r.content,"full")}),(0,t.jsx)("div",{className:"absolute top-4 w-0 h-0 ".concat(l?"right-0 translate-x-full border-l-8 border-l-emerald-500 border-t-4 border-t-transparent border-b-4 border-b-transparent":"left-0 -translate-x-full border-r-8 border-r-white/90 border-t-4 border-t-transparent border-b-4 border-b-transparent")})]})]})]})})};var l=e.i(95187),o=(0,l.createServerReference)("7f25cdef1f9fa6f853fff195defc540fad63cf87b9",l.callServer,void 0,l.findSourceMapURL,"createSupportMessage");let n=e=>{let{supportId:s,userType:a,messageList:l,setMessageList:n}=e,[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),h=(0,r.useRef)(null),g=async e=>{if(e.preventDefault(),i)return;let t=x.trim();if(!t)return void u("メッセージを入力してください");if(x.length>500){alert("問い合わせ内容 は、500字以内でお願いします."),u("問い合わせ内容 は、500字以内でお願いします.");return}d(!0),u("");try{let e=await o({userType:a,supportId:s,content:t});if(e.success){let e={id:Date.now(),content:t,senderType:"advertiser"===a?"user":"admin",senderId:0,createdAt:new Date};n([...l,e]),m(""),h.current&&(h.current.style.height="auto",h.current.value="")}else u(e.errMsg)}catch(e){u("送信に失敗しました。もう一度お試しください。")}finally{d(!1)}};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"返信を送信"})]}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("textarea",{ref:h,value:x,placeholder:"メッセージを入力してください...",className:"w-full min-h-[120px] max-h-[300px] p-4 bg-white/90 backdrop-blur-sm border-2 border-white/60 hover:border-emerald-300/80 focus:border-emerald-500 focus:ring-4 focus:ring-emerald-500/20 rounded-2xl text-gray-800 placeholder-gray-400 resize-none transition-all duration-300 focus:outline-none shadow-lg hover:shadow-xl",onChange:e=>{m(e.target.value);let t=e.target;t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px"),c&&u("")},disabled:i}),(0,t.jsxs)("div",{className:"absolute bottom-3 right-3 text-xs text-gray-400 bg-white/80 backdrop-blur-sm rounded-full px-2 py-1",children:[x.length,"/500"]})]}),c&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl",children:(0,t.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c]})}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 sm:justify-end",children:(0,t.jsxs)("button",{type:"submit",disabled:i,className:"group relative overflow-hidden bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-2xl hover:shadow-emerald-500/30 disabled:shadow-none transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed transform",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 group-disabled:opacity-0 transition-opacity duration-300"}),(0,t.jsx)("div",{className:"relative flex items-center justify-center gap-3",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,t.jsx)("span",{children:"送信中..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5 transition-transform duration-200 group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),(0,t.jsx)("span",{children:"送信する"})]})})]})})]})]})},i=e=>{let{userType:s,initialMessages:l,supportId:o}=e,[i,d]=(0,r.useState)(l);return(0,t.jsxs)("div",{className:"relative space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 pb-4 border-b border-emerald-100/50",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center",children:(0,t.jsxs)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2v-1"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m6-4H9m6 8H9"})]})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"やり取り履歴"}),(0,t.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-emerald-200 to-transparent"}),(0,t.jsxs)("div",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium",children:[i.length,"件のメッセージ"]})]}),(0,t.jsx)("div",{className:"space-y-6 min-h-[400px] max-h-[600px] overflow-y-auto scrollbar-thin scrollbar-thumb-emerald-200 scrollbar-track-gray-100",children:0===i.length?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-emerald-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,t.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"まだメッセージがありません"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"下のフォームから最初のメッセージを送信してください"})]}):i.map(e=>(0,t.jsx)(a,{message:e,userType:s},e.id))}),(0,t.jsx)("div",{className:"bg-gradient-to-r from-emerald-50/80 to-teal-50/60 rounded-2xl p-6 border border-emerald-100/50",children:(0,t.jsx)(n,{supportId:o,userType:s,messageList:i,setMessageList:d})}),(0,t.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-gradient-to-br from-emerald-400/30 to-teal-500/30 rounded-full blur-sm"}),(0,t.jsx)("div",{className:"absolute -bottom-2 -left-2 w-4 h-4 bg-gradient-to-br from-teal-400/30 to-cyan-500/30 rounded-full blur-sm"})]})}}]);