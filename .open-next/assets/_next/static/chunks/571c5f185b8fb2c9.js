(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,433881,e=>{"use strict";e.s(["default",()=>i]);var r=e.i(843476),t=e.i(161822),s=e.i(271645),o=e.i(522016),a=e.i(618566);let i=e=>{let{wasUnread:i}=e,{decrementNotificationCount:l}=(0,t.default)(),n=(0,a.useParams)().advertiserId;return(0,s.useEffect)(()=>{i&&(console.log("decrementNotificationCount()"),l())},[]),(0,r.jsx)("div",{className:"flex justify-center p-6",children:(0,r.jsxs)(o.default,{href:"/advertiser/".concat(n,"/notification"),className:"group inline-flex items-center gap-3 bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 text-white px-8 py-4 rounded-2xl font-bold shadow-2xl hover:shadow-purple-500/30 transition-all duration-300 hover:scale-105 transform",children:[(0,r.jsx)("svg",{className:"w-5 h-5 transition-transform duration-200 group-hover:-translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{children:"通知一覧に戻る"})]})})}},202278,e=>{"use strict";e.s(["default",()=>l],202278);var r=e.i(843476),t=e.i(271645),s=e.i(618566),o=e.i(95187),a=(0,o.createServerReference)("7f965f06ac0d36f4f175be15213a99392e9b3d3b31",o.callServer,void 0,o.findSourceMapURL,"updateNotification"),i=(0,o.createServerReference)("7f0ac610078f6a194cb93109b6ba5ec3b6d4e7f5bb",o.callServer,void 0,o.findSourceMapURL,"deleteNotification");let l=e=>{let{notification:o,adminId:l}=e,[n,d]=(0,t.useState)(!1),[c,h]=(0,t.useState)(!1),[u,p]=(0,t.useState)(""),[x,m]=(0,t.useState)({title:[o.title,""],description:[o.description,""]}),f=(0,s.useRouter)(),b=async()=>{if(!confirm("この内容で更新しますか？"))return;d(!0),u&&p("");let{title:e,description:r}=x,t=!1;if(e[0].length>100&&(e[1]="タイトルは100字以内で入力してください",t=!0),0===e[0].trim().length&&(e[1]="タイトルを入力してください",t=!0),r[0].length>1e3&&(r[1]="内容は1000字以内で入力してください",t=!0),0===r[0].trim().length&&(r[1]="内容を入力してください",t=!0),t){m({title:e,description:r}),alert("入力内容に問題があります"),p("入力内容に問題があります"),d(!1);return}try{let t=await a({notificationId:o.id,title:e[0].trim(),description:r[0].trim()});t.success?(alert("通知を更新しました"),f.refresh()):401===t.statusCode||403===t.statusCode?(alert("認証が無効です。再ログインしてください。"),f.push("/auth/advertiser")):p(t.errMsg)}catch(r){let e=r instanceof Error?r.message:"更新に失敗しました。もう一度お試しください。";alert(e),p(e)}d(!1)},v=async()=>{if(confirm("本当にこの通知を削除しますか？この操作は取り消せません。")){h(!0),u&&p("");try{let e=await i({notificationId:o.id});e.success?(alert("通知を削除しました"),f.push("/admin/".concat(l,"/notification")),f.refresh()):(p(e.errMsg),h(!1))}catch(r){let e=r instanceof Error?r.message:"削除に失敗しました。もう一度お試しください。";alert(e),p(e),h(!1)}}},g=e=>{let r=e.target.name,t=e.target.value;m(e=>({...e,[r]:[t,""]}))};return(0,r.jsx)("div",{className:"border-t border-gray-100 bg-gradient-to-br from-purple-50/80 via-blue-50/60 to-indigo-50/40",children:(0,r.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"管理者編集機能"}),(0,r.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-purple-200 to-transparent"})]}),(0,r.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"block text-sm font-bold text-gray-900",children:["タイトル ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"title",value:x.title[0],onChange:g,className:"w-full p-4 bg-white/90 backdrop-blur-sm border-2 ".concat(x.title[1]?"border-red-500":"border-white/60 hover:border-purple-300/80"," focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 rounded-xl text-gray-800 transition-all duration-300 focus:outline-none shadow-lg hover:shadow-xl"),disabled:n||c}),x.title[1]&&(0,r.jsxs)("span",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x.title[1]]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[x.title[0].length,"/100文字"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"block text-sm font-bold text-gray-900",children:["通知内容 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{name:"description",value:x.description[0],onChange:g,rows:6,className:"w-full p-4 bg-white/90 backdrop-blur-sm border-2 ".concat(x.description[1]?"border-red-500":"border-white/60 hover:border-purple-300/80"," focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 rounded-xl text-gray-800 resize-none transition-all duration-300 focus:outline-none shadow-lg hover:shadow-xl"),disabled:n||c}),x.description[1]&&(0,r.jsxs)("span",{className:"text-red-500 text-sm flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x.description[1]]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[x.description[0].length,"/1000文字"]})]}),u&&(0,r.jsx)("div",{className:"p-4 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-xl",children:(0,r.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("button",{type:"button",onClick:b,disabled:n||c,className:"group flex-1 relative overflow-hidden bg-gradient-to-r from-purple-500 to-blue-600 hover:from-purple-600 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-xl font-bold shadow-2xl hover:shadow-purple-500/30 disabled:shadow-none transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed transform",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 group-disabled:opacity-0 transition-opacity duration-300"}),(0,r.jsx)("div",{className:"relative flex items-center justify-center gap-3",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,r.jsx)("span",{children:"更新中..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,r.jsx)("span",{children:"通知を更新"})]})})]}),(0,r.jsxs)("button",{type:"button",onClick:v,disabled:n||c,className:"group relative overflow-hidden bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-xl font-bold shadow-2xl hover:shadow-red-500/30 disabled:shadow-none transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed transform",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 group-disabled:opacity-0 transition-opacity duration-300"}),(0,r.jsx)("div",{className:"relative flex items-center justify-center gap-3",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,r.jsx)("span",{children:"削除中..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,r.jsx)("span",{children:"通知を削除"})]})})]})]})]})]})})}}]);