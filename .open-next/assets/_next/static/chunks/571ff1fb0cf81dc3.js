(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,171672,e=>{"use strict";e.s(["formatDate",()=>t,"formatTime",()=>a]);let t=e=>new Intl.DateTimeFormat("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e)),a=e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))}},146874,e=>{"use strict";e.s(["IconAlertTriangle",()=>t],146874);let t=(0,e.i(33550).default)("outline","alert-triangle","AlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]])},283086,e=>{"use strict";e.s(["Sparkles",()=>t],283086);let t=(0,e.i(475254).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},610464,e=>{"use strict";e.s(["checkPendingPayments",()=>a]);var t=e.i(95187),a=(0,t.createServerReference)("7f3f0b7f96cc5a9aec0e7fcb58ae2ba47841e494e4",t.callServer,void 0,t.findSourceMapURL,"checkPendingPayments")},865528,e=>{"use strict";e.s(["default",()=>B],865528);var t=e.i(843476),a=e.i(271645),s=e.i(846932),r=e.i(88653),i=e.i(373375),l=e.i(463059),n=e.i(25652),o=e.i(475254);let d=(0,o.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var c=e.i(212426);let m=(0,o.default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var x=e.i(217923),h=e.i(16715),u=e.i(878894),g=e.i(283086),p=e.i(731195),y=e.i(621417),b=e.i(555706),f=e.i(475225),j=e.i(785183),v=e.i(93230),w=e.i(872526),N=e.i(234239),k=e.i(400237),D=e.i(101725);let C=[{key:"combined",label:"複合表示",icon:n.TrendingUp},{key:"paymentCount",label:"決済件数",icon:m},{key:"totalAmount",label:"決済金額",icon:d},{key:"totalFees",label:"手数料",icon:c.DollarSign}],S={margin:{top:20,right:30,left:20,bottom:20},animation:{duration:1500},colors:{paymentCount:"#3B82F6",totalAmount:"#10B981",totalFees:"#F59E0B"}},A=e=>{let{active:a,payload:r}=e;if(!a||!(null==r?void 0:r.length))return null;let i=r[0].payload;return(0,t.jsxs)(s.motion.div,{className:"bg-white/95 backdrop-blur-xl border border-white/50 rounded-2xl p-4 shadow-2xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"}),(e=>{let t=new Date(e);return isNaN(t.getTime())?e:"".concat(t.getMonth()+1,"月").concat(t.getDate(),"日")})(i.originalDate)]}),(0,t.jsx)("div",{className:"space-y-2",children:[{key:"paymentCount",label:"決済件数",icon:m,value:i.paymentCount,suffix:"件"},{key:"totalAmount",label:"決済金額",icon:d,value:i.totalAmount,suffix:""},{key:"totalFees",label:"手数料",icon:c.DollarSign,value:i.totalFees,suffix:""}].map(e=>{let{key:a,label:s,icon:r,value:i,suffix:l}=e;return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r,{className:"w-3 h-3",style:{color:S.colors[a]}}),(0,t.jsx)("span",{className:"text-xs text-gray-600",children:s})]}),(0,t.jsx)("span",{className:"text-xs font-medium",children:l?"".concat(i.toLocaleString()).concat(l):"¥".concat(i.toLocaleString())})]},a)})})]})},P=()=>(0,t.jsxs)(s.motion.div,{className:"h-80 flex flex-col items-center justify-center text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[(0,t.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-gray-100 to-blue-100 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)(x.BarChart3,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"グラフデータなし"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"この期間にはグラフ表示できるデータがありません"})]});function M(e){let{data:r,periodInfo:i}=e,[l,n]=(0,a.useState)("combined"),{chartData:o,stats:d}=(0,a.useMemo)(()=>{if(!r)return{chartData:[],stats:null};let e=((e,t)=>{if(!e)return[];let a=new Date(t.startDate),s=new Date(t.endDate),r=new Map(e.map(e=>[e.date,e])),i=[],l=new Date(a);for(;l<=s;){let e="".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0"));i.push(r.get(e)||{date:e,paymentCount:0,totalAmount:0,totalFees:0}),l.setDate(l.getDate()+1)}return i})(r,i);return 0===e.length?{chartData:[],stats:null}:{chartData:e.map(e=>({...e,formattedDate:(e=>{let t=new Date(e);return isNaN(t.getTime())?e:t.getDate().toString()})(e.date),originalDate:e.date})),stats:{hasData:!0,totalPaymentCount:e.reduce((e,t)=>e+t.paymentCount,0),totalAmount:e.reduce((e,t)=>e+t.totalAmount,0),totalFees:e.reduce((e,t)=>e+t.totalFees,0),maxPaymentCount:Math.max(...e.map(e=>e.paymentCount)),maxAmount:Math.max(...e.map(e=>e.totalAmount)),maxFees:Math.max(...e.map(e=>e.totalFees)),originalDataPoints:r.length,filledDataPoints:e.length}}},[r,i]);if(!(null==d?void 0:d.hasData)||!r||0===r.length)return(0,t.jsx)(P,{});let c={data:o,margin:S.margin},m={stroke:"#6B7280",fontSize:12,tickLine:!1,axisLine:!1},x=e=>(0,t.jsx)(A,{...e});return(0,t.jsxs)(s.motion.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-6",children:C.map(e=>{let{key:a,label:r,icon:i}=e;return(0,t.jsxs)(s.motion.button,{onClick:()=>n(a),className:"flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-300 ".concat(l===a?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg":"bg-white/40 hover:bg-white/60 text-gray-700 border border-white/50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,t.jsx)(i,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:r})]},a)})}),(0,t.jsx)(s.motion.div,{className:"bg-white/40 backdrop-blur-sm rounded-2xl p-4 border border-white/50",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.4},children:(0,t.jsx)("div",{className:"h-80 w-full",children:(0,t.jsx)(p.ResponsiveContainer,{width:"100%",height:"100%",children:(()=>{switch(l){case"paymentCount":return(0,t.jsxs)(D.AreaChart,{...c,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"paymentCountGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:S.colors.paymentCount,stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:S.colors.paymentCount,stopOpacity:.05})]})}),(0,t.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,t.jsx)(j.XAxis,{dataKey:"formattedDate",...m}),(0,t.jsx)(v.YAxis,{...m,tickFormatter:e=>"".concat(e,"件")}),(0,t.jsx)(N.Tooltip,{content:x}),(0,t.jsx)(k.Area,{type:"monotone",dataKey:"paymentCount",stroke:S.colors.paymentCount,strokeWidth:3,fill:"url(#paymentCountGradient)",animationDuration:S.animation.duration})]});case"totalAmount":return(0,t.jsxs)(D.AreaChart,{...c,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"totalAmountGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:S.colors.totalAmount,stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:S.colors.totalAmount,stopOpacity:.05})]})}),(0,t.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,t.jsx)(j.XAxis,{dataKey:"formattedDate",...m}),(0,t.jsx)(v.YAxis,{...m,tickFormatter:e=>"¥".concat(e.toLocaleString())}),(0,t.jsx)(N.Tooltip,{content:x}),(0,t.jsx)(k.Area,{type:"monotone",dataKey:"totalAmount",stroke:S.colors.totalAmount,strokeWidth:3,fill:"url(#totalAmountGradient)",animationDuration:S.animation.duration})]});case"totalFees":return(0,t.jsxs)(y.ComposedChart,{...c,children:[(0,t.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,t.jsx)(j.XAxis,{dataKey:"formattedDate",...m}),(0,t.jsx)(v.YAxis,{...m,tickFormatter:e=>"¥".concat(e.toLocaleString())}),(0,t.jsx)(N.Tooltip,{content:x}),(0,t.jsx)(f.Bar,{dataKey:"totalFees",fill:S.colors.totalFees,radius:[4,4,0,0],animationDuration:S.animation.duration})]});default:return(0,t.jsxs)(y.ComposedChart,{...c,children:[(0,t.jsx)(w.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,t.jsx)(j.XAxis,{dataKey:"formattedDate",...m}),(0,t.jsx)(v.YAxis,{yAxisId:"left",...m,tickFormatter:e=>e.toLocaleString()}),(0,t.jsx)(v.YAxis,{yAxisId:"right",orientation:"right",...m,tickFormatter:e=>"¥".concat(e.toLocaleString())}),(0,t.jsx)(N.Tooltip,{content:x}),(0,t.jsx)(f.Bar,{yAxisId:"right",dataKey:"totalFees",fill:S.colors.totalFees,opacity:.7,radius:[2,2,0,0],animationDuration:1e3}),(0,t.jsx)(b.Line,{yAxisId:"left",type:"monotone",dataKey:"paymentCount",stroke:S.colors.paymentCount,strokeWidth:3,dot:{fill:S.colors.paymentCount,strokeWidth:2,r:4},activeDot:{r:6,fill:S.colors.paymentCount},animationDuration:S.animation.duration}),(0,t.jsx)(b.Line,{yAxisId:"right",type:"monotone",dataKey:"totalAmount",stroke:S.colors.totalAmount,strokeWidth:3,dot:{fill:S.colors.totalAmount,strokeWidth:2,r:4},activeDot:{r:6,fill:S.colors.totalAmount},animationDuration:S.animation.duration})]})}})()})})},l),(0,t.jsxs)(s.motion.div,{className:"mt-6 grid grid-cols-3 gap-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,t.jsxs)("div",{className:"text-center bg-white/30 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[d.maxPaymentCount.toLocaleString(),"件"]}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"最大決済件数"})]}),(0,t.jsxs)("div",{className:"text-center bg-white/30 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["¥",d.maxAmount.toLocaleString()]}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"最大決済金額"})]}),(0,t.jsxs)("div",{className:"text-center bg-white/30 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:["¥",d.maxFees.toLocaleString()]}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"最大手数料"})]})]}),(0,t.jsxs)(s.motion.div,{className:"mt-4 text-center text-xs text-gray-500",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.5},children:["月間データ（日別表示） • 実データ",d.originalDataPoints,"点",d.originalDataPoints!==d.filledDataPoints&&(0,t.jsxs)("span",{className:"text-blue-600 ml-1",children:["• 0埋め",d.filledDataPoints-d.originalDataPoints,"点"]}),"• 全",d.filledDataPoints,"ポイント表示",(0,t.jsxs)("div",{className:"mt-1 text-gray-400",children:["期間: ",i.startDate," 〜 ",i.endDate]})]})]})}var F=e.i(95187),L=(0,F.createServerReference)("4046b463a7820584af323f960303194a6925f74d54",F.callServer,void 0,F.findSourceMapURL,"getPaymentStatsData"),T=(0,F.createServerReference)("401c8248fe363e92b28410dc1083368464cf187423",F.callServer,void 0,F.findSourceMapURL,"checkPaymentStatsDataAvailability");let E=new Date,R="".concat(E.getFullYear(),"-").concat(String(E.getMonth()+1).padStart(2,"0"),"-01");function B(){console.log("--PaymentOverview--");let[e,o]=(0,a.useState)(R),[p,y]=(0,a.useState)(null),[b,f]=(0,a.useState)({hasPrevious:!1,hasNext:!1}),[j,v]=(0,a.useState)(!0),[w,N]=(0,a.useState)(null),k=async e=>{v(!0),N(null);try{var t,a;let[s,r]=await Promise.all([L({startDate:e}),T({currentDate:e})]);if(!s.success||!s.data)return void N(s.errMsg||"データの取得に失敗しました");y(s.data),f({hasPrevious:!!r.success&&((null==(t=r.data)?void 0:t.hasPrevious)||!1),hasNext:!!r.success&&((null==(a=r.data)?void 0:a.hasNext)||!1)})}catch(e){N(e instanceof Error?e.message:"エラーが発生しました")}finally{v(!1)}},D=t=>{let[a,s]=e.split("-").map(Number);o("".concat("next"===t?12===s?a+1:a:1===s?a-1:a,"-").concat(String("next"===t?12===s?1:s+1:1===s?12:s-1).padStart(2,"0"),"-01"))};(0,a.useEffect)(()=>{(async()=>{v(!0),N(null);try{var e,t;let[a,s]=await Promise.all([L({}),T({currentDate:R})]);if(!a.success||!a.data)return void N(a.errMsg||"データの取得に失敗しました");y(a.data),f({hasPrevious:!!s.success&&((null==(e=s.data)?void 0:e.hasPrevious)||!1),hasNext:!!s.success&&((null==(t=s.data)?void 0:t.hasNext)||!1)})}catch(e){N(e instanceof Error?e.message:"エラーが発生しました")}finally{v(!1)}})()},[]),(0,a.useEffect)(()=>{p&&(console.log("currentDate!==initialCurrentDate:".concat(String(e!==R))),console.log("data.period.startDate!==currentDate:".concat(String(p.period.startDate!==e))),(e!==R||p.period.startDate!==e)&&k(e))},[e]),(0,a.useEffect)(()=>{p&&T({currentDate:e}).then(e=>{e.success&&e.data&&f({hasPrevious:e.data.hasPrevious,hasNext:e.data.hasNext})}).catch(()=>{})},[p]);let C=p?[{title:"総決済件数",value:p.summary.totalPaymentCount.toLocaleString(),icon:m,gradient:"from-blue-500 via-cyan-500 to-blue-600",shadow:"shadow-blue-500/30"},{title:"総決済金額",value:"¥".concat(p.summary.totalAmount.toLocaleString()),icon:d,gradient:"from-emerald-500 via-green-500 to-teal-600",shadow:"shadow-emerald-500/30"},{title:"平均決済金額",value:"¥".concat(p.summary.avgAmountPerPayment.toLocaleString()),icon:n.TrendingUp,gradient:"from-purple-500 via-violet-500 to-indigo-600",shadow:"shadow-purple-500/30"},{title:"総手数料",value:"¥".concat(p.summary.totalFees.toLocaleString()),icon:c.DollarSign,gradient:"from-orange-500 via-amber-500 to-yellow-600",shadow:"shadow-orange-500/30"}]:[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.motion.div,{className:"bg-white/80 backdrop-blur-2xl rounded-3xl border border-white/50 shadow-2xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500/10 via-purple-500/10 to-pink-500/10 p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.motion.div,{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-r from-indigo-500 via-purple-600 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-500/30",whileHover:{rotate:10,scale:1.1},transition:{duration:.2},children:(0,t.jsx)(x.BarChart3,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-gray-900 via-indigo-900 to-purple-900 bg-clip-text text-transparent",children:"月別決済統計"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"全ユーザーの月間決済データ統合表示"})]})]}),(0,t.jsx)(s.motion.button,{onClick:()=>k(e),disabled:j,className:"w-10 h-10 sm:w-11 sm:h-11 bg-white/80 hover:bg-white disabled:bg-gray-100 rounded-xl border border-white/60 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(h.RefreshCw,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600 ".concat(j?"animate-spin":"")})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-6",children:[(0,t.jsx)(s.motion.button,{onClick:()=>D("prev"),disabled:!b.hasPrevious||j,className:"w-10 h-10 sm:w-11 sm:h-11 bg-white/80 hover:bg-white disabled:bg-gray-100 disabled:text-gray-400 rounded-xl border border-white/60 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(i.ChevronLeft,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,t.jsx)(s.motion.div,{className:"bg-gradient-to-r from-white via-blue-50 to-purple-50 px-4 py-2 sm:px-6 sm:py-3 rounded-xl border border-indigo-200/60 shadow-lg min-w-[140px] sm:min-w-[160px] text-center",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:(0,t.jsx)("div",{className:"text-base sm:text-lg font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:j?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(h.RefreshCw,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin text-indigo-600"}),(0,t.jsx)("span",{className:"text-sm sm:text-base",children:"読込中..."})]}):(e=>{let[t,a]=e.split("-");return"".concat(t,"年").concat(Number(a),"月")})(e)})},e),(0,t.jsx)(s.motion.button,{onClick:()=>D("next"),disabled:!b.hasNext||j,className:"w-10 h-10 sm:w-11 sm:h-11 bg-white/80 hover:bg-white disabled:bg-gray-100 disabled:text-gray-400 rounded-xl border border-white/60 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(l.ChevronRight,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,t.jsx)(r.AnimatePresence,{children:w&&(0,t.jsx)(s.motion.div,{className:"mb-6 bg-red-50/80 backdrop-blur-xl border border-red-200 rounded-2xl p-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(u.AlertTriangle,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-red-700 font-medium text-sm",children:"エラーが発生しました"}),(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:w})]}),(0,t.jsx)("button",{onClick:()=>N(null),className:"text-red-400 hover:text-red-600 transition-colors",children:"✕"})]})})})]}),!j&&!w&&(0,t.jsx)("div",{className:"p-4 sm:p-6 pt-0",children:(0,t.jsx)(s.motion.div,{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:C.map((e,a)=>(0,t.jsxs)(s.motion.div,{className:"relative overflow-hidden bg-gradient-to-br ".concat(e.gradient," rounded-2xl p-3 sm:p-4 lg:p-6 shadow-xl ").concat(e.shadow," group"),initial:{opacity:0,scale:.9,rotateY:-10},animate:{opacity:1,scale:1,rotateY:0},transition:{duration:.5,delay:.1*a},whileHover:{scale:1.02,y:-4,rotateY:5},children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 sm:w-20 sm:h-20 bg-white/10 rounded-full -translate-y-8 sm:-translate-y-10 translate-x-8 sm:translate-x-10"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[(0,t.jsx)(e.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white drop-shadow-lg"}),(0,t.jsx)(s.motion.div,{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white/80 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}})]}),(0,t.jsx)("div",{className:"text-lg sm:text-xl lg:text-2xl xl:text-3xl font-bold text-white mb-1 drop-shadow-lg leading-tight",children:e.value}),(0,t.jsx)("div",{className:"text-xs sm:text-sm text-white/90 font-medium",children:e.title})]}),(0,t.jsx)(s.motion.div,{className:"absolute top-2 right-2",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:(0,t.jsx)(g.Sparkles,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white/60"})})]},e.title))})}),!j&&!w&&(!p||0===p.stats.length)&&(0,t.jsxs)(s.motion.div,{className:"text-center py-8 sm:py-12 px-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[(0,t.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-6 bg-gradient-to-r from-gray-100 via-blue-100 to-purple-100 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)(x.BarChart3,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"統計データなし"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"この月には統計データがありません。"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"決済データが蓄積されると、ここに詳細な統計が表示されます。"})]}),j&&(0,t.jsxs)(s.motion.div,{className:"flex items-center justify-center gap-3 py-8 sm:py-12",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,t.jsx)(h.RefreshCw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600 animate-spin"}),(0,t.jsx)("span",{className:"text-gray-600 font-medium text-sm sm:text-base",children:"統計データを読み込み中..."})]})]}),!j&&!w&&p&&p.stats.length>0&&(0,t.jsx)(s.motion.div,{className:"bg-white/70 backdrop-blur-xl rounded-3xl border border-white/40 shadow-xl overflow-hidden mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:(0,t.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)(s.motion.div,{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",whileHover:{rotate:10,scale:1.1},transition:{duration:.2},children:(0,t.jsx)(n.TrendingUp,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"月別推移グラフ"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"日別決済パフォーマンス変化の詳細分析"})]})]}),(0,t.jsx)(M,{data:p.stats,periodInfo:{startDate:p.period.startDate,endDate:p.period.endDate}})]})})]})}},926787,e=>{"use strict";e.s(["default",()=>w],926787),e.i(247167);var t=e.i(843476),a=e.i(271645),s=e.i(33550);let r=(0,s.default)("outline","credit-card","CreditCard",[["path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M7 15l.01 0",key:"svg-2"}],["path",{d:"M11 15l2 0",key:"svg-3"}]]),i=(0,s.default)("outline","refresh","Refresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),l=(0,s.default)("outline","chevron-left","ChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);var n=e.i(462337);let o=(0,s.default)("outline","clock","Clock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),d=(0,s.default)("outline","check","Check",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);var c=e.i(357772),m=e.i(146874),x=e.i(139900),h=e.i(171672),u=e.i(95187),g=(0,u.createServerReference)("7f8df3223b34baff3d60eadd829e3d87165ff8cf5f",u.callServer,void 0,u.findSourceMapURL,"getPaymentHistory"),p=e.i(610464);let y=Number("6")||5,b={completed:{icon:d,color:"text-green-600",bgColor:"bg-green-100",label:"完了"},pending:{icon:o,color:"text-orange-600",bgColor:"bg-orange-100",label:"処理中"},failed:{icon:c.IconX,color:"text-red-600",bgColor:"bg-red-100",label:"失敗"},expired:{icon:m.IconAlertTriangle,color:"text-gray-600",bgColor:"bg-gray-100",label:"期限切れ"},default:{icon:o,color:"text-gray-600",bgColor:"bg-gray-100",label:"不明"}},f={creditcard:"クレジットカード",btc:"Bitcoin",eth:"Ethereum",ltc:"Litecoin"},j=e=>b[e]||b.default,v=e=>f[e]||e.toUpperCase();function w(e){let{adminId:s}=e,[d,c]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[b,f]=(0,a.useState)(1),[w,N]=(0,a.useState)(!0),[k,D]=(0,a.useState)(!1),[C,S]=(0,a.useState)(""),A=async e=>{try{1===e&&D(!0);let t=await g({advertiserId:0,page:e});t.success?(t.data&&c(t.data),t.pendingData&&u(t.pendingData),S("")):S(t.errMsg||"決済履歴の取得に失敗しました")}catch(e){S("ネットワークエラーが発生しました")}finally{N(!1),D(!1)}},P=async()=>{try{(await (0,p.checkPendingPayments)({advertiserId:0})).success&&A(1)}catch(e){console.error("Pending check error:",e)}};(0,a.useEffect)(()=>{A(1)},[]),(0,a.useEffect)(()=>{if(m.length>0){let e=setInterval(P,3e4);return()=>clearInterval(e)}},[m.length]);let M=e=>{e!==b&&e>0&&(f(e),A(e))},F=d.slice(0,y),L=d.length>y;return(0,t.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-b border-gray-100 p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl",children:(0,t.jsx)(r,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"全ユーザー決済履歴"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["システム全体の決済状況",m.length>0&&(0,t.jsxs)("span",{className:"ml-2 text-orange-600 font-medium",children:["(",m.length,"件処理中)"]})]})]})]}),(0,t.jsx)("button",{onClick:()=>A(1),disabled:k,className:"p-2 rounded-xl bg-white/80 hover:bg-white shadow-sm border border-gray-200 transition-all ".concat(k?"animate-spin":"hover:scale-105"),children:(0,t.jsx)(i,{className:"w-5 h-5 text-gray-600"})})]})}),(0,t.jsxs)("div",{className:"p-6",children:[C&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4",children:(0,t.jsx)("p",{className:"text-red-700 text-sm",children:C})}),w?(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:4}).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-xl animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},a))}):(0,t.jsxs)(t.Fragment,{children:[m.length>0&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-xl p-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-orange-800 mb-3 flex items-center gap-2",children:[(0,t.jsx)(o,{className:"w-5 h-5 animate-pulse"}),"未確定決済 (",m.length,"件)"]}),(0,t.jsx)("div",{className:"space-y-3",children:m.map(e=>{let a=j(e.status),s=a.icon;return(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/80 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 ".concat(a.bgColor," rounded-lg ").concat(a.color),children:(0,t.jsx)(s,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:v(e.paymentMethod)}),e.userName&&(0,t.jsxs)("span",{className:"text-gray-500",children:["by ",e.userName]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(0,h.formatDate)(e.createdAt)})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"font-bold text-orange-700",children:["¥",Number(e.totalAmount).toLocaleString()]})})]},e.id)})})]})}),0===F.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(r,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"決済履歴がありません"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"決済が実行されると、こちらに履歴が表示されます"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-3",children:F.map(e=>{let a=j(e.status),s=a.icon;return(0,t.jsxs)("div",{className:"group flex items-center justify-between p-4 border border-gray-100 rounded-xl hover:border-gray-200 hover:shadow-md transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 ".concat(a.bgColor," rounded-xl ").concat(a.color," group-hover:scale-110 transition-transform"),children:(0,t.jsx)(s,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-800",children:v(e.paymentMethod)}),(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(a.bgColor," ").concat(a.color),children:a.label}),e.userName&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,t.jsx)(x.IconUser,{className:"w-3 h-3"}),e.userName]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"ccbill"===e.provider?"クレジットカード決済":"仮想通貨決済"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(0,h.formatDate)(e.createdAt)})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["¥",Number(e.totalAmount).toLocaleString()]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.currency})]})]},e.id)})}),(b>1||L)&&(0,t.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["ページ ",b," - ",F.length,"件表示中"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>M(b-1),disabled:b<=1,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(l,{className:"w-4 h-4"})}),(0,t.jsx)("span",{className:"px-3 py-1 bg-purple-500 text-white rounded-lg text-sm font-medium",children:b}),(0,t.jsx)("button",{onClick:()=>M(b+1),disabled:!L,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(n.IconChevronRight,{className:"w-4 h-4"})})]})]})]})]})]})]})}}]);