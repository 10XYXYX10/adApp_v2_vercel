(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,710126,e=>{"use strict";e.s(["useUpdateAmount",()=>r]);var s=e.i(271645),t=e.i(161822);function r(){let{updateUser:e}=(0,t.default)();return(0,s.useCallback)(s=>{e(e=>({...e,amount:s}))},[])}},171672,e=>{"use strict";e.s(["formatDate",()=>s,"formatTime",()=>t]);let s=e=>new Intl.DateTimeFormat("ja-JP",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e)),t=e=>{let s=Math.floor(e/60);return"".concat(s.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))}},618353,e=>{"use strict";e.s(["default",()=>a],618353);var s=e.i(843476),t=e.i(161822);let r=(0,e.i(33550).default)("outline","wallet","Wallet",[["path",{d:"M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12",key:"svg-0"}],["path",{d:"M20 12v4h-4a2 2 0 0 1 0 -4h4",key:"svg-1"}]]),a=()=>{let{user:e}=(0,t.default)();return(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium opacity-90",children:"現在のポイント残高"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,s.jsx)(r,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-3xl font-bold",children:e.amount.toLocaleString()}),(0,s.jsx)("span",{className:"text-lg",children:"P"})]})]})})})}},610464,e=>{"use strict";e.s(["checkPendingPayments",()=>t]);var s=e.i(95187),t=(0,s.createServerReference)("7f3f0b7f96cc5a9aec0e7fcb58ae2ba47841e494e4",s.callServer,void 0,s.findSourceMapURL,"checkPendingPayments")},682297,e=>{"use strict";e.s(["default",()=>d]);var s=e.i(843476),t=e.i(271645),r=e.i(610464),a=e.i(522016),n=e.i(710126),l=e.i(171672);let i=e=>{switch(e){case"creditcard":return"クレジットカード";case"btc":return"Bitcoin";case"eth":return"Ethereum";case"ltc":return"Litecoin";default:return e.toUpperCase()}},o=e=>{switch(e){case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"expired":return"text-gray-600 bg-gray-100";default:return"text-orange-600 bg-orange-100"}};function d(e){let{advertiserId:d}=e,c=(0,n.useUpdateAmount)(),[x,m]=(0,t.useState)([]),[h,u]=(0,t.useState)([]),[g,p]=(0,t.useState)(!1),[v,j]=(0,t.useState)(0),[b,f]=(0,t.useState)(""),N=(0,t.useRef)(null),y=(0,t.useRef)(!0),w=async()=>{if(y.current){p(!0),f("");try{let e=await (0,r.checkPendingPayments)({advertiserId:d});if(!y.current)return;if(e.success){if(m(e.pendingPayments),e.completedPayments.length>0&&u(s=>[...e.completedPayments,...s]),e.newBalance&&c(Number(e.newBalance)),0===e.pendingPayments.length)return void p(!1);j(e=>e+1),N.current=setTimeout(()=>{w()},v<5?3e4:9e4)}else f(e.errMsg||"ポーリング処理に失敗しました")}catch(e){y.current&&f("ネットワークエラーが発生しました")}finally{y.current&&p(!1)}}};(0,t.useEffect)(()=>(y.current=!0,w(),()=>{y.current=!1,N.current&&clearTimeout(N.current)}),[]);let k=x.length>0,L=h.length>0;return k||L||g?(0,s.jsxs)("div",{className:"space-y-4",children:[b&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("div",{className:"text-red-800 text-sm",children:b})}),(0,s.jsxs)("div",{className:"hidden lg:grid lg:grid-cols-2 lg:gap-4",children:[(0,s.jsx)("div",{className:"space-y-2",children:k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-orange-50 rounded-lg",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),(0,s.jsxs)("h3",{className:"text-sm font-medium text-orange-800",children:["処理中 (",x.length,"件)"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:x.map(e=>(0,s.jsxs)("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[(0,s.jsx)("div",{className:"text-xs text-orange-700 font-medium mb-1",children:i(e.paymentMethod)}),(0,s.jsxs)("div",{className:"text-sm font-semibold text-orange-800",children:["¥",Number(e.totalAmount).toLocaleString()]}),(0,s.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:(0,l.formatDate)(e.createdAt)})]},e.id))})]})}),(0,s.jsx)("div",{className:"space-y-2",children:L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"px-3 py-2 bg-blue-50 rounded-lg",children:(0,s.jsxs)("h3",{className:"text-sm font-medium text-blue-800",children:["処理完了 (",h.length,"件)"]})}),(0,s.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("div",{className:"text-xs text-blue-700 font-medium",children:i(e.paymentMethod)}),(0,s.jsx)("div",{className:"text-xs px-2 py-1 rounded-full ".concat(o(e.status)),children:"completed"===e.status?"完了":"failed"===e.status?"失敗":"期限切れ"})]}),(0,s.jsxs)("div",{className:"text-sm font-semibold text-blue-800 mb-2",children:["¥",Number(e.totalAmount).toLocaleString()]}),(0,s.jsx)("div",{className:"flex gap-2",children:e.pointId&&(0,s.jsx)(a.default,{href:"/advertiser/".concat(d,"/point/").concat(e.pointId),className:"ml-auto text-xs text-green-600 hover:text-green-800 underline",children:"ポイント詳細"})})]},e.id))})]})})]}),(0,s.jsxs)("div",{className:"lg:hidden space-y-4",children:[k&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-orange-50 rounded-lg",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),(0,s.jsxs)("h3",{className:"text-sm font-medium text-orange-800",children:["処理中 (",x.length,"件)"]})]}),x.map(e=>(0,s.jsx)("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-orange-700 font-medium mb-1",children:i(e.paymentMethod)}),(0,s.jsx)("div",{className:"text-xs text-orange-600",children:(0,l.formatDate)(e.createdAt)})]}),(0,s.jsxs)("div",{className:"text-sm font-semibold text-orange-800",children:["¥",Number(e.totalAmount).toLocaleString()]})]})},e.id))]}),L&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"px-3 py-2 bg-blue-50 rounded-lg",children:(0,s.jsxs)("h3",{className:"text-sm font-medium text-blue-800",children:["処理完了 (",h.length,"件)"]})}),h.map(e=>(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("div",{className:"text-xs text-blue-700 font-medium",children:i(e.paymentMethod)}),(0,s.jsx)("div",{className:"text-xs px-2 py-1 rounded-full ".concat(o(e.status)),children:"completed"===e.status?"完了":"failed"===e.status?"失敗":"期限切れ"})]}),(0,s.jsxs)("div",{className:"text-sm font-semibold text-blue-800 mb-2",children:["¥",Number(e.totalAmount).toLocaleString()]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.default,{href:"/advertiser/".concat(d,"/payment/").concat(e.id),className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"決済詳細"}),e.pointId&&(0,s.jsx)(a.default,{href:"/advertiser/".concat(d,"/point/").concat(e.pointId),className:"text-xs text-green-600 hover:text-green-800 underline",children:"ポイント詳細"})]})]},e.id))]})]}),g&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-blue-500 rounded-full animate-spin"}),(0,s.jsxs)("span",{className:"text-xs text-gray-600",children:["決済状況を確認中... (",v+1,"回目)"]})]})]}):(0,s.jsx)("div",{className:"p-4 text-center",children:(0,s.jsx)("div",{className:"text-gray-500 text-sm",children:"処理中の決済はありません"})})}},286707,e=>{"use strict";e.s(["default",()=>m],286707);var s=e.i(843476),t=e.i(271645),r=e.i(618566),a=e.i(95187),n=(0,a.createServerReference)("7feabe2b333ebe61413118bbd8f34d7db76a55eb31",a.callServer,void 0,a.findSourceMapURL,"getPointList"),l=e.i(522016),i=e.i(171672);let o=e=>{switch(e){case"creditcard":return"クレジットカード";case"btc":return"Bitcoin";case"eth":return"Ethereum";case"ltc":return"Litecoin";default:return e.toUpperCase()}};function d(e){let{point:t,advertiserId:r}=e,a=(e=>{switch(e){case"purchase":return{icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-200",sign:"+",label:"購入"};case"consume":return{icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})}),color:"text-blue-600",bgColor:"bg-blue-100",borderColor:"border-blue-200",sign:"-",label:"使用"};case"refund":return{icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),color:"text-orange-600",bgColor:"bg-orange-100",borderColor:"border-orange-200",sign:"+",label:"返金"};default:return{icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),color:"text-gray-600",bgColor:"bg-gray-100",borderColor:"border-gray-200",sign:"",label:"不明"}}})(t.type);return(0,s.jsx)("div",{className:"group bg-white rounded-xl border ".concat(a.borderColor," shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden"),children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 ".concat(a.bgColor," ").concat(a.color," rounded-xl group-hover:scale-110 transition-transform duration-300"),children:a.icon}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"px-3 py-1 text-xs font-semibold ".concat(a.color," ").concat(a.bgColor," rounded-full"),children:a.label}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:(0,i.formatDate)(t.createdAt)})]}),(0,s.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed max-w-md",children:t.description}),t.payment&&(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),(0,s.jsx)("span",{children:o(t.payment.paymentMethod)})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",t.payment.orderId.slice(0,8),"..."]})]})]})]}),(0,s.jsxs)("div",{className:"text-right space-y-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"text-xl font-bold ".concat(a.color),children:[a.sign,Number(t.amount).toLocaleString()]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"ポイント"})]}),(0,s.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,s.jsxs)(l.default,{href:"/advertiser/".concat(r,"/point/").concat(t.id),className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 px-2 py-1 rounded-lg transition-colors duration-200",children:[(0,s.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"詳細"]})})]})]}),t.payment&&(0,s.jsx)("div",{className:"sm:hidden mt-4 pt-3 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),(0,s.jsx)("span",{children:o(t.payment.paymentMethod)})]}),(0,s.jsxs)("div",{children:["¥",Number(t.payment.totalAmount).toLocaleString()]})]})})]})})}function c(e){let{filterData:t,onFilterChange:r}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"フィルター・並び替え"})]}),(t.type||"desc"!==t.sort)&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"フィルター適用中"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("label",{htmlFor:"type-filter",className:"block text-sm font-medium text-gray-700",children:"ポイントタイプ"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"type-filter",value:t.type,onChange:e=>{r({type:e.target.value})},className:"w-full appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2.5 pr-10 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:[(0,s.jsx)("option",{value:"",children:"すべて表示"}),(0,s.jsx)("option",{value:"purchase",children:"購入 (+)"}),(0,s.jsx)("option",{value:"consume",children:"使用 (-)"}),(0,s.jsx)("option",{value:"refund",children:"返金 (+)"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("label",{htmlFor:"sort-filter",className:"block text-sm font-medium text-gray-700",children:"並び順"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"sort-filter",value:t.sort,onChange:e=>{r({sort:e.target.value})},className:"w-full appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2.5 pr-10 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",children:[(0,s.jsx)("option",{value:"desc",children:"新しい順"}),(0,s.jsx)("option",{value:"asc",children:"古い順"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(t.type||"desc"!==t.sort)&&(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("button",{onClick:()=>r({type:"",sort:"desc"}),className:"flex items-center gap-2 px-4 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-lg transition-colors duration-200",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"リセット"]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,s.jsxs)("span",{children:["タイプ: ","purchase"===t.type?"購入":"consume"===t.type?"使用":"refund"===t.type?"返金":"すべて"]})]}),(0,s.jsx)("div",{className:"w-px h-3 bg-gray-300"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),(0,s.jsxs)("span",{children:["並び順: ","desc"===t.sort?"新しい順":"古い順"]})]}),(0,s.jsx)("div",{className:"w-px h-3 bg-gray-300"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),(0,s.jsxs)("span",{children:["ページ: ",t.page]})]})]})]})}let x=Number("10");function m(e){let{advertiserId:a}=e,l=(0,r.useRouter)(),[i,o]=(0,t.useState)({type:"",sort:"desc",page:1}),[m,h]=(0,t.useState)(!0),[u,g]=(0,t.useState)(""),[p,v]=(0,t.useState)([]),[j,b]=(0,t.useState)({prev:!1,next:!1});(0,t.useEffect)(()=>{(async()=>{h(!0),g("");try{let e=await n({advertiserId:a,type:i.type,sort:i.sort,page:i.page});if(e.success&&e.data){let s=e.data;v(s.slice(0,x)),b({prev:i.page>1,next:s.length>x})}else{if(401===e.statusCode)return void l.push("/auth/advertiser");g(e.errMsg||"データの取得に失敗しました")}}catch(e){g("ネットワークエラーが発生しました")}finally{h(!1)}})()},[i.type,i.sort,i.page]);let f=e=>{if(e!==i.page&&e>0){o(s=>({...s,page:e}));let s=document.getElementById("postListScrollTarget");if(s){let e=s.offsetTop+150;window.scrollTo({top:e,behavior:"smooth"})}}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200",children:(0,s.jsx)(c,{filterData:i,onFilterChange:e=>{o(s=>({...s,...e,page:1}))}})}),u&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{className:"text-red-800 font-medium",children:u})]})}),(0,s.jsx)("div",{id:"postListScrollTarget"}),m&&(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"animate-pulse p-4 bg-white rounded-xl border border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-20"})]})},t))}),!m&&!u&&(0,s.jsxs)(s.Fragment,{children:[0===p.length?(0,s.jsxs)("div",{className:"text-center py-16 bg-white rounded-xl border border-gray-200",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"ポイント履歴がありません"}),(0,s.jsx)("p",{className:"text-gray-500",children:i.type||"desc"!==i.sort?"フィルター条件に一致するポイント履歴がありません":"ポイントの取得や使用を行うと、こちらに履歴が表示されます"})]}):(0,s.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,s.jsx)(d,{point:e,advertiserId:a},e.id))}),p.length>0&&(j.prev||j.next)&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200",children:[(0,s.jsx)("div",{children:j.prev?(0,s.jsxs)("button",{onClick:()=>f(i.page-1),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-100 to-blue-100 hover:from-blue-500 hover:to-indigo-600 hover:text-white rounded-lg border border-gray-300 hover:border-transparent transition-all duration-300",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,s.jsx)("span",{className:"font-medium",children:"前へ"})]}):(0,s.jsx)("div",{})}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-blue-600 text-white px-4 py-2 rounded-lg shadow-lg",children:(0,s.jsxs)("span",{className:"font-bold",children:["ページ ",i.page]})})}),(0,s.jsx)("div",{children:j.next?(0,s.jsxs)("button",{onClick:()=>f(i.page+1),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-100 to-blue-100 hover:from-blue-500 hover:to-indigo-600 hover:text-white rounded-lg border border-gray-300 hover:border-transparent transition-all duration-300",children:[(0,s.jsx)("span",{className:"font-medium",children:"次へ"}),(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,s.jsx)("div",{})})]})]})]})}}]);