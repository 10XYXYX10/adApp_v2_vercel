(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,87316,503116,284614,436114,661804,e=>{"use strict";e.s(["AlertCircle",()=>s],63209);var t=e.i(475254);let s=(0,t.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>b],436114);var a=e.i(843476),r=e.i(271645),l=e.i(846932);e.s(["Calendar",()=>i],87316);let i=(0,t.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Clock",()=>n],503116);let n=(0,t.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var d=e.i(25652);let c=(0,t.default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),o=(0,t.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),x=(0,t.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["User",()=>m],284614);let m=(0,t.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),h=(0,t.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),u=(0,t.default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var g=e.i(171672);let b=(0,r.memo)(function(e){let{advertisement:t}=e,b=(0,r.useMemo)(()=>t.budget<=0?0:(t.budget-t.remainingBudget)/t.budget*100,[t.budget,t.remainingBudget]),p=(0,r.useMemo)(()=>t.budget-t.remainingBudget,[t.budget,t.remainingBudget]),f=(0,r.useMemo)(()=>b>=90?{label:"残りわずか",color:"red",bgColor:"bg-red-50"}:b>=70?{label:"使用中",color:"orange",bgColor:"bg-orange-50"}:b>=30?{label:"順調",color:"blue",bgColor:"bg-blue-50"}:{label:"十分",color:"green",bgColor:"bg-green-50"},[b]);return(0,a.jsxs)(l.motion.div,{className:"bg-white/70 backdrop-blur-xl rounded-3xl border border-white/40 shadow-xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},whileHover:{scale:1.005},children:[(0,a.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center",children:(0,a.jsx)(d.TrendingUp,{className:"w-5 h-5 text-white"})}),"予算使用状況"]}),(0,a.jsx)("div",{className:"".concat(f.bgColor," px-4 py-2 rounded-full border border-").concat(f.color,"-200"),children:(0,a.jsx)("span",{className:"text-".concat(f.color,"-700 font-medium text-sm"),children:f.label})})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["使用率: ",b.toFixed(1),"%"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[p.toLocaleString(),"P / ",t.budget.toLocaleString(),"P"]})]}),(0,a.jsx)("div",{className:"w-full h-4 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:(0,a.jsx)(l.motion.div,{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full relative overflow-hidden",initial:{width:0},animate:{width:"".concat(Math.min(b,100),"%")},transition:{duration:1.5,ease:"easeOut"},children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 animate-pulse"})})}),(0,a.jsxs)("div",{className:"flex justify-between mt-3 text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:["使用済み: ",p.toLocaleString(),"P"]}),(0,a.jsxs)("span",{className:"font-medium",children:["残り: ",t.remainingBudget.toLocaleString(),"P"]})]})]})})]}),(0,a.jsx)("div",{className:"px-6 sm:px-8 pb-6 sm:pb-8",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50/30 rounded-2xl p-4 sm:p-6 border border-gray-200/50",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,a.jsx)(x,{className:"w-5 h-5 text-gray-700"}),"詳細情報"]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-800 flex items-center gap-2 text-sm sm:text-base",children:[(0,a.jsx)(i,{className:"w-4 h-4"}),"作成情報"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(n,{className:"w-3 h-3"}),"作成日時:"]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,g.formatDate)(new Date(t.createdAt))})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(n,{className:"w-3 h-3"}),"更新日時:"]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,g.formatDate)(new Date(t.updatedAt))})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(m,{className:"w-3 h-3"}),"作成者:"]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.user.name})]}),t.verifiedAt&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(h,{className:"w-3 h-3"}),"審査完了:"]}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-700",children:(0,g.formatDate)(new Date(t.verifiedAt))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-800 flex items-center gap-2 text-sm sm:text-base",children:[(0,a.jsx)(s,{className:"w-4 h-4"}),"設定情報"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[t.targetId&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(u,{className:"w-3 h-3"}),"ターゲットID:"]}),(0,a.jsx)("span",{className:"text-sm font-mono font-medium text-blue-700 bg-blue-50 px-2 py-0.5 rounded",children:t.targetId})]}),t.destinationUrl&&(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(o,{className:"w-3 h-3"}),"遷移先URL:"]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-2 border",children:(0,a.jsx)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 break-all transition-colors",children:t.destinationUrl})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(c,{className:"w-3 h-3"}),"メディアファイル:"]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.mediaFileId?(0,a.jsxs)("span",{className:"bg-green-50 text-green-700 px-2 py-0.5 rounded",children:["#",t.mediaFileId]}):(0,a.jsx)("span",{className:"text-gray-500",children:"未設定"})})]})]})]})]})]})})]})});e.s(["default",()=>A],661804);let p=(0,t.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var f=e.i(286536);let j=(0,t.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var y=e.i(95187),v=(0,y.createServerReference)("40e0dd0c8f51903f6c9dbde10fd8a85774f8a32c6d",y.callServer,void 0,y.findSourceMapURL,"getMovieAppMetadata");function N(e){let{advertisement:t,refreshTrigger:i}=e,[n,d]=(0,r.useState)(null),[c,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),u=async()=>{if(!t.targetId){h("記事IDが設定されていません"),x(!1);return}x(!0),h(null);try{let e=await v(t.targetId);e.success&&e.data?d(e.data):h(e.errMsg||"記事情報の取得に失敗しました")}catch(e){h(e instanceof Error?e.message:"予期しないエラーが発生しました")}finally{x(!1)}};return((0,r.useEffect)(()=>{u()},[t.targetId,i]),c)?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)(l.motion.div,{className:"flex flex-col items-center gap-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,a.jsx)(l.motion.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:(0,a.jsx)(j,{className:"w-8 h-8 text-blue-500"})}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"記事情報を取得中..."})]})}):m||!n?(0,a.jsxs)(l.motion.div,{className:"flex flex-col items-center justify-center py-12 px-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(s,{className:"w-8 h-8 text-red-500"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"記事情報を取得できませんでした"}),(0,a.jsx)("p",{className:"text-gray-600 text-center mb-4",children:m||"記事が見つからないか、一時的にアクセスできません"}),t.targetId&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["対象記事ID: ",(0,a.jsx)("span",{className:"font-mono font-medium",children:t.targetId})]})}),(0,a.jsxs)(l.motion.button,{onClick:u,className:"inline-flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl font-medium transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(f.Eye,{className:"w-4 h-4"}),"再試行"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(()=>(0,a.jsx)(l.motion.div,{className:"mb-3 sm:w-1/2 p-1 mx-auto max-w-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},whileHover:{y:-5},children:(0,a.jsxs)("div",{className:"bg-white shadow-md rounded h-full overflow-hidden",children:[(0,a.jsx)("a",{className:"shadow-md hover:shadow-none transition-shadow duration-300",href:n.articleUrl,target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(l.motion.h2,{className:"text-center text-base bg-gray-900 text-white box-shadow rounded-tl rounded-tr px-3 py-2",whileHover:{backgroundColor:"#1f2937"},transition:{duration:.2},children:n.title.length>50?n.title.substring(0,50)+"…":n.title})}),(0,a.jsx)("div",{className:"py-2 px-1",children:(0,a.jsx)("div",{style:{paddingTop:10},className:"text-center",children:(0,a.jsx)("a",{className:"block",href:n.articleUrl,target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(l.motion.div,{whileHover:{scale:1.02},transition:{duration:.3},children:(0,a.jsx)("img",{src:n.imageUrl,width:300,height:250,alt:n.title,className:"mx-auto box-shadow rounded-sm",onError:e=>{e.target.src="/images/no-image.png"}})})})})})]})}),{})}),(0,a.jsxs)(l.motion.div,{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-4 sm:p-6 border border-white/40",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-gradient-to-r from-pink-500 to-rose-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs",children:"🎯"})}),"広告詳細情報"]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"記事タイトル"}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 bg-gray-50 rounded-lg p-2",children:n.title})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"記事ID"}),(0,a.jsx)("div",{className:"text-sm font-mono font-medium text-blue-700 bg-blue-50 rounded-lg p-2",children:t.targetId})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"記事URL"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-2",children:(0,a.jsxs)("a",{href:n.articleUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 transition-colors flex items-center gap-1 break-all",children:[(0,a.jsx)(o,{className:"w-3 h-3 flex-shrink-0"}),n.articleUrl.length>40?"".concat(n.articleUrl.substring(0,40),"..."):n.articleUrl]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"優先表示効果"}),(0,a.jsx)("div",{className:"text-sm text-green-700 bg-green-50 rounded-lg p-2",children:"記事一覧の上位に表示され、露出機会が向上します"})]})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200/50 text-center",children:(0,a.jsxs)(l.motion.a,{href:n.articleUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-gradient-to-r from-pink-500 to-rose-600 text-white px-4 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(o,{className:"w-4 h-4"}),"実際の記事を確認"]})})]})]})}e.i(247167);var w=e.i(657688),k=(0,y.createServerReference)("402352c20389aa79c9626848528eb766baafea9309",y.callServer,void 0,y.findSourceMapURL,"getMediaFileData");let S=(0,t.default)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);function C(e){let{advertisement:t,isPreview:l=!1,refreshTrigger:i}=e,[n,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(10),[g,b]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(p){if(h>0){let e=setTimeout(()=>u(e=>e-1),1e3);return()=>clearTimeout(e)}b(!0)}},[h,p]);let y=async()=>{if(!t.mediaFileId){m("メディアファイルが設定されていません"),o(!1);return}o(!0),m(null);try{let e=await k(t.mediaFileId);e.success&&e.data?d(e.data):m(e.errMsg||"メディアファイルの取得に失敗しました")}catch(e){m(e instanceof Error?e.message:"予期しないエラーが発生しました")}finally{o(!1)}};return((0,r.useEffect)(()=>{y()},[t.mediaFileId,i]),c)?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 opacity-100",children:[(0,a.jsx)(j,{className:"w-8 h-8 text-blue-500 animate-spin"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"メディアファイルを取得中..."})]})}):x||!n?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(s,{className:"w-8 h-8 text-red-500"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"メディアファイルを取得できませんでした"}),(0,a.jsx)("p",{className:"text-gray-600 text-center mb-4",children:x}),t.mediaFileId&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["メディアファイルID: ",(0,a.jsx)("span",{className:"font-mono font-medium",children:t.mediaFileId})]})}),(0,a.jsxs)("button",{onClick:y,className:"inline-flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl",children:[(0,a.jsx)(S,{className:"w-4 h-4"})," 再試行"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[l&&(0,a.jsxs)("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-4 border border-blue-200/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm",children:"📺"})}),(0,a.jsx)("h4",{className:"font-bold text-gray-900",children:"オーバーレイ広告プレビュー"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"動画プレイヤー上に広告が表示され、10秒間確実に視聴されます。"})]}),(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto bg-gray-200 flex flex-col items-center justify-center p-4 rounded-2xl",children:[(0,a.jsx)("div",{className:"relative w-full aspect-video bg-gray-900 rounded-xl overflow-hidden shadow-lg",children:p&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative w-[74%] h-[74%] bg-white rounded-lg border-4 border-blue-400 shadow-2xl overflow-hidden",children:[(0,a.jsx)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:(0,a.jsx)(w.default,{src:"".concat("https://pub-7414a177cb1243efaa1f1d269e3df215.r2.dev","/").concat(n.filePath),alt:"オーバーレイ広告",fill:!0,className:"object-cover",onError:e=>{e.target.src="/images/no-image.png"}})}),h>0&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-lg",children:h}),g&&(0,a.jsx)("button",{onClick:()=>f(!1),className:"absolute -top-2 -right-2 w-8 h-8 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg",children:"×"})]})})}),(!p||!h)&&(0,a.jsx)("button",{onClick:()=>{u(10),b(!1),f(!0)},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"広告を再表示"})]})]})}let M=(0,t.default)("file-play",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]]);function T(e){let{advertisement:t,refreshTrigger:l}=e,[i,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,u]=(0,r.useState)("waiting"),[g,b]=(0,r.useState)(30),[p,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)(0),[N,w]=(0,r.useState)(null),[S,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(N&&(clearTimeout(N),w(null)),"ad"===h&&g>0){let e=setTimeout(()=>{b(g-1),21===g&&f(!0)},1e3);return w(e),()=>{clearTimeout(e),w(null)}}"ad"===h&&0===g&&(u("video"),T())},[h,g]);let T=()=>{S&&(clearInterval(S),C(null));let e=setInterval(()=>{v(t=>t>=100?(clearInterval(e),C(null),100):t+1)},100);C(e)},I=async()=>{if(!t.mediaFileId){m("メディアファイルが設定されていません"),c(!1);return}c(!0),m(null);try{let e=await k(t.mediaFileId);e.success&&e.data?n(e.data):m(e.errMsg||"メディアファイルの取得に失敗しました")}catch(e){m(e instanceof Error?e.message:"予期しないエラーが発生しました")}finally{c(!1)}};return((0,r.useEffect)(()=>{I()},[t.mediaFileId,l]),(0,r.useEffect)(()=>()=>{N&&clearTimeout(N),S&&clearInterval(S)},[]),d)?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(j,{className:"w-8 h-8 text-purple-500 animate-spin"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"メディアファイルを取得中..."})]})}):x||!i?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(s,{className:"w-8 h-8 text-red-500"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"メディアファイルを取得できませんでした"}),(0,a.jsx)("p",{className:"text-gray-600 text-center mb-4",children:x||"ファイルが見つからないか、一時的にアクセスできません"}),t.mediaFileId&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["メディアファイルID: ",(0,a.jsx)("span",{className:"font-mono font-medium",children:t.mediaFileId})]})}),(0,a.jsxs)("button",{onClick:I,className:"inline-flex items-center gap-2 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-xl font-medium transition-colors",children:[(0,a.jsx)(M,{className:"w-4 h-4"}),"再試行"]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"w-full max-w-lg mx-auto bg-black rounded-2xl overflow-hidden shadow-2xl",children:[(0,a.jsxs)("div",{className:"relative aspect-video bg-gradient-to-br from-gray-900 to-black",children:["waiting"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl mb-2",children:"🎬"}),(0,a.jsx)("div",{className:"text-sm sm:text-base font-medium mb-2",children:"動画コンテンツ: 13:19"}),(0,a.jsxs)("div",{className:"text-xs text-white/60 bg-white/20 px-2 py-1 rounded-full inline-flex items-center gap-1",children:[(0,a.jsx)("span",{children:"🔊"}),(0,a.jsx)("span",{children:"音声付きで再生"})]})]})})]}),(0,a.jsx)("button",{onClick:()=>{u("ad")},className:"absolute inset-0 flex items-center justify-center group",children:(0,a.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-600 hover:bg-red-700 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300",children:(0,a.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",className:"ml-1",children:(0,a.jsx)("path",{d:"M8 5v14l11-7z"})})})})]}),"ad"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)("video",{className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,onError:e=>{console.error("Video playback error:",e)},children:(0,a.jsx)("source",{src:"".concat("https://pub-7414a177cb1243efaa1f1d269e3df215.r2.dev","/").concat(i.filePath),type:i.mimeType})})}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4 bg-yellow-400 text-black px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[(0,a.jsxs)("span",{children:["広告 ",g,"s"]}),(0,a.jsx)("span",{className:"text-xs",children:"🔊"})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-600",children:(0,a.jsx)("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:"".concat((30-g)/30*100,"%")}})}),!p&&(0,a.jsxs)("div",{className:"absolute bottom-12 right-3 sm:bottom-16 sm:right-4 bg-purple-600 bg-opacity-90 text-white px-3 py-1 rounded-full text-xs font-medium z-10 shadow-lg animate-pulse",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"必須視聴中 "}),Math.max(0,10-(30-g)),"s"]}),p&&(0,a.jsx)("button",{onClick:()=>{N&&(clearTimeout(N),w(null)),u("video"),T()},className:"absolute bottom-3 right-3 sm:bottom-4 sm:right-4 bg-gray-800 bg-opacity-80 hover:bg-opacity-100 text-white px-3 py-2 sm:px-4 sm:py-2 rounded text-xs sm:text-sm font-medium transition-all duration-300 transform hover:scale-105 z-20",children:"広告をスキップ →"}),(0,a.jsx)("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-base sm:text-lg font-mono",children:g.toString().padStart(2,"0")}),t.destinationUrl&&(0,a.jsx)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 z-10","aria-label":"広告をクリック"})]}),"video"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-800 via-teal-700 to-blue-800",children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl mb-4",children:"🎥"}),(0,a.jsx)("div",{className:"text-base sm:text-lg font-bold mb-2",children:"本編動画が再生中..."}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"素晴らしいコンテンツをお楽しみください"})]})})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 text-white",children:[(0,a.jsx)("button",{className:"hover:text-red-400 transition-colors",children:(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"sm:w-5 sm:h-5",children:(0,a.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"w-full h-1 bg-gray-600 rounded-full",children:(0,a.jsx)("div",{className:"h-full bg-red-500 rounded-full transition-all duration-100",style:{width:"".concat(y,"%")}})})}),(0,a.jsxs)("span",{className:"text-xs font-mono",children:[Math.floor(y/10),":0",Math.floor(y%10),"/13:19"]}),(0,a.jsx)("button",{className:"hover:text-red-400 transition-colors",children:(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"sm:w-5 sm:h-5",children:(0,a.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})})})]})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 p-3 sm:p-4 text-white",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"プレロール広告の流れ"}),(0,a.jsxs)("div",{className:"text-xs text-gray-300 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("waiting"===h?"bg-blue-400":"bg-gray-600")}),(0,a.jsx)("span",{children:"1. 再生ボタンクリック"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("ad"===h?"bg-red-400":"bg-gray-600")}),(0,a.jsx)("span",{children:"2. 30秒CM表示 (10秒後スキップ可)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("video"===h?"bg-green-400":"bg-gray-600")}),(0,a.jsx)("span",{children:"3. 本編動画再生"})]})]}),"video"===h&&(0,a.jsx)("button",{onClick:()=>{N&&(clearTimeout(N),w(null)),S&&(clearInterval(S),C(null)),u("waiting"),b(30),f(!1),v(0)},className:"mt-3 w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm font-medium transition-colors",children:"🔄 デモをリセット"})]})]}),(0,a.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-4 sm:p-6 border border-white/40",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-gradient-to-r from-purple-500 to-violet-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs",children:"🎬"})}),"広告詳細情報"]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"ファイル情報"}),(0,a.jsxs)("div",{className:"text-sm bg-gray-50 rounded-lg p-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ID:"}),(0,a.jsxs)("span",{className:"font-mono font-medium text-purple-700",children:["#",i.id]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"タイプ:"}),(0,a.jsx)("span",{className:"font-medium",children:i.mimeType})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"サイズ:"}),(0,a.jsxs)("span",{className:"font-medium",children:[(i.fileSize/1024/1024).toFixed(2),"MB"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"MIME Type"}),(0,a.jsx)("div",{className:"text-sm font-mono font-medium text-purple-700 bg-purple-50 rounded-lg p-2",children:i.mimeType})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[t.destinationUrl&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"遷移先URL"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-2",children:(0,a.jsxs)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 transition-colors flex items-center gap-1 break-all",children:[(0,a.jsx)(o,{className:"w-3 h-3 flex-shrink-0"}),t.destinationUrl.length>40?"".concat(t.destinationUrl.substring(0,40),"..."):t.destinationUrl]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"表示効果"}),(0,a.jsx)("div",{className:"text-sm text-green-700 bg-green-50 rounded-lg p-2",children:"動画再生前の30秒間確実に表示され、強力なブランド認知効果を期待できます"})]})]})]}),t.destinationUrl&&(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200/50 text-center",children:(0,a.jsxs)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 bg-gradient-to-r from-purple-500 to-violet-600 text-white px-4 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all duration-300",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),"遷移先を確認"]})})]})]})}let I=(0,t.default)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);function U(e){let{advertisement:t,refreshTrigger:l}=e,i="youtube-short"===t.adType,n=i?30:60,d=i?17:32,[c,x]=(0,r.useState)("waiting"),[m,h]=(0,r.useState)(n),[u,g]=(0,r.useState)(!1),[b,f]=(0,r.useState)(0),[j,y]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(v&&(clearTimeout(v),N(null)),"ad"===c&&j&&m>0){let e=setTimeout(()=>{h(m-1),m===n-d+1&&g(!0)},1e3);return N(e),()=>{clearTimeout(e),N(null)}}"ad"===c&&0===m&&(x("video"),S())},[c,m,n,d,j]);let S=()=>{w&&(clearInterval(w),k(null));let e=setInterval(()=>{f(t=>t>=100?(clearInterval(e),k(null),100):t+1)},100);k(e)};if((0,r.useEffect)(()=>()=>{v&&clearTimeout(v),w&&clearInterval(w)},[]),!t.targetId)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(s,{className:"w-8 h-8 text-red-500"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"YouTube動画IDが設定されていません"}),(0,a.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"YouTube動画IDを設定してから再度お試しください"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["設定が必要: ",(0,a.jsx)("span",{className:"font-medium",children:"YouTube動画ID (例: dQw4w9WgXcQ)"})]})})]});let C={"youtube-short":{title:"YouTube Short広告",icon:"📹",gradient:"from-red-500 to-pink-600",description:"YouTube動画の再生数向上（".concat(d,"秒強制視聴）"),duration:"".concat(n,"秒")},"youtube-long":{title:"YouTube Long広告",icon:"🎥",gradient:"from-orange-500 to-red-600",description:"より長時間のYouTube広告（".concat(d,"秒強制視聴）"),duration:"".concat(n,"秒")}}[t.adType];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"w-full max-w-lg mx-auto bg-black rounded-2xl overflow-hidden shadow-2xl",children:[(0,a.jsxs)("div",{className:"relative aspect-video bg-gradient-to-br from-gray-900 to-black",children:["waiting"===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-r ".concat(C.gradient),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl mb-2",children:C.icon}),(0,a.jsx)("div",{className:"text-sm sm:text-base font-medium mb-1",children:C.title}),(0,a.jsxs)("div",{className:"text-xs sm:text-sm text-white/80",children:["YouTube ID: ",t.targetId]})]})})]}),(0,a.jsx)("button",{onClick:()=>{x("ad"),y(!1)},className:"absolute inset-0 flex items-center justify-center group",children:(0,a.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-red-600 hover:bg-red-700 rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-all duration-300",children:(0,a.jsx)(p,{className:"w-7 h-7 sm:w-8 sm:h-8 text-white ml-1",fill:"currentColor"})})})]}),"ad"===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)("iframe",{className:"w-full h-full",src:"https://www.youtube.com/embed/".concat(t.targetId,"?autoplay=1&mute=0&controls=0&modestbranding=1&rel=0&showinfo=0&disablekb=1&enablejsapi=1"),title:"YouTube広告",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,style:{pointerEvents:"none"},onLoad:()=>{y(!0)}})}),(0,a.jsx)("a",{href:"https://www.youtube.com/watch?v=".concat(t.targetId),target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 z-5 cursor-pointer","aria-label":"YouTube動画を開く"}),(0,a.jsxs)("div",{className:"absolute top-3 left-3 sm:top-4 sm:left-4 bg-red-600 text-white px-2 py-1 sm:px-3 sm:py-1 rounded-full text-xs font-bold z-10 flex items-center gap-1",children:[(0,a.jsx)(I,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:["広告 ",m,"s"]}),(0,a.jsx)("span",{className:"text-xs",children:"🔊"})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gray-600 z-10",children:(0,a.jsx)("div",{className:"h-full bg-red-500 transition-all duration-1000",style:{width:"".concat((n-m)/n*100,"%")}})}),u&&(0,a.jsx)("button",{onClick:()=>{v&&(clearTimeout(v),N(null)),x("video"),S()},className:"absolute bottom-3 right-3 sm:bottom-4 sm:right-4 bg-gray-800 bg-opacity-90 hover:bg-opacity-100 text-white px-3 py-2 sm:px-4 sm:py-2 rounded text-xs sm:text-sm font-medium transition-all duration-300 transform hover:scale-105 z-20 shadow-lg",children:"広告をスキップ →"}),(0,a.jsx)("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 bg-black bg-opacity-80 text-white px-2 py-1 rounded text-base sm:text-lg font-mono z-10 shadow-lg",children:m.toString().padStart(2,"0")}),!u&&(0,a.jsx)("div",{className:"absolute bottom-12 right-3 sm:bottom-16 sm:right-4 bg-red-600 bg-opacity-90 text-white px-3 py-1 rounded-full text-xs font-medium z-10 shadow-lg animate-pulse",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"必須視聴中 "}),Math.max(0,d-(n-m)),"s"]}):(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"読み込み中..."})]})}),t.destinationUrl&&(0,a.jsx)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 z-1","aria-label":"広告をクリック"})]}),"video"===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-800 via-teal-700 to-blue-800",children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl mb-4",children:"🎥"}),(0,a.jsx)("div",{className:"text-base sm:text-lg font-bold mb-2",children:"本編動画が再生中..."}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"YouTube広告効果で再生数アップ！"})]})})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 text-white",children:[(0,a.jsx)("button",{className:"hover:text-red-400 transition-colors",children:(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",className:"sm:w-5 sm:h-5",children:(0,a.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"w-full h-1 bg-gray-600 rounded-full",children:(0,a.jsx)("div",{className:"h-full bg-red-500 rounded-full transition-all duration-100",style:{width:"".concat(b,"%")}})})}),(0,a.jsxs)("span",{className:"text-xs font-mono",children:[Math.floor(b/10),":0",Math.floor(b%10),"/13:19"]}),(0,a.jsx)("button",{className:"hover:text-red-400 transition-colors",children:(0,a.jsx)(I,{className:"w-4 h-4"})})]})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900 p-3 sm:p-4 text-white",children:[(0,a.jsxs)("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[(0,a.jsx)(I,{className:"w-4 h-4 text-red-500"}),C.title,"の流れ"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-300 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("waiting"===c?"bg-blue-400":"bg-gray-600")}),(0,a.jsx)("span",{children:"1. 再生ボタンクリック"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("ad"===c?"bg-red-400":"bg-gray-600")}),(0,a.jsxs)("span",{children:["2. ",C.duration,"YouTube広告表示 (",d,"秒後スキップ可)"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("video"===c?"bg-green-400":"bg-gray-600")}),(0,a.jsx)("span",{children:"3. 本編動画再生"})]})]}),"video"===c&&(0,a.jsxs)("button",{onClick:()=>{v&&(clearTimeout(v),N(null)),w&&(clearInterval(w),k(null)),x("waiting"),h(n),g(!1),f(0),y(!1)},className:"mt-3 w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{children:"🔄"}),"デモをリセット"]})]})]}),(0,a.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-4 sm:p-6 border border-white/40",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-gradient-to-r ".concat(C.gradient," rounded-lg flex items-center justify-center"),children:(0,a.jsx)("span",{className:"text-white text-xs",children:C.icon})}),"広告詳細情報"]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"YouTube動画情報"}),(0,a.jsxs)("div",{className:"text-sm bg-gray-50 rounded-lg p-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"動画ID:"}),(0,a.jsx)("span",{className:"font-mono font-medium text-red-700",children:t.targetId})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"タイプ:"}),(0,a.jsx)("span",{className:"font-medium",children:i?"Short":"Long"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"再生時間:"}),(0,a.jsx)("span",{className:"font-medium",children:C.duration})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"強制視聴:"}),(0,a.jsxs)("span",{className:"font-medium text-red-600",children:[d,"秒"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"YouTube URL"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-2",children:(0,a.jsxs)("a",{href:"https://www.youtube.com/watch?v=".concat(t.targetId),target:"_blank",rel:"noopener noreferrer",className:"text-sm text-red-600 hover:text-red-800 transition-colors flex items-center gap-1 break-all",children:[(0,a.jsx)(I,{className:"w-3 h-3 flex-shrink-0"}),"youtube.com/watch?v=",t.targetId]})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[t.destinationUrl&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"遷移先URL"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-2",children:(0,a.jsxs)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 transition-colors flex items-center gap-1 break-all",children:[(0,a.jsx)(o,{className:"w-3 h-3 flex-shrink-0"}),t.destinationUrl.length>40?"".concat(t.destinationUrl.substring(0,40),"..."):t.destinationUrl]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"期待効果"}),(0,a.jsx)("div",{className:"text-sm text-green-700 bg-green-50 rounded-lg p-2",children:"YouTube動画の再生数・チャンネル登録者数の増加効果を期待できます"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"課金方式"}),(0,a.jsxs)("div",{className:"text-sm text-purple-700 bg-purple-50 rounded-lg p-2",children:["1再生あたり",i?"1.5":"3","円の課金"]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200/50 flex flex-col sm:flex-row gap-3 justify-center",children:[(0,a.jsxs)("a",{href:"https://www.youtube.com/watch?v=".concat(t.targetId),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r ".concat(C.gradient," text-white px-4 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all duration-300"),children:[(0,a.jsx)(I,{className:"w-4 h-4"}),"YouTube動画を確認"]}),t.destinationUrl&&(0,a.jsxs)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 bg-white hover:bg-gray-50 text-gray-700 px-4 py-2.5 rounded-xl font-medium border border-gray-200 transition-all duration-300",children:[(0,a.jsx)(o,{className:"w-4 h-4"}),"遷移先を確認"]})]})]})]})}let D={priority:{title:"動画記事優先表示",icon:"🎯",gradient:"from-pink-500 to-rose-600",description:"movieAppの記事一覧で優先表示"},overlay:{title:"オーバーレイ広告",icon:"📺",gradient:"from-blue-500 to-cyan-600",description:"動画プレイヤー上に表示"},preroll:{title:"プレロール広告",icon:"🎬",gradient:"from-purple-500 to-violet-600",description:"動画再生前に表示される広告"},"youtube-short":{title:"YouTube Short広告",icon:"📹",gradient:"from-red-500 to-pink-600",description:"YouTube動画の再生数向上（15秒）"},"youtube-long":{title:"YouTube Long広告",icon:"🎥",gradient:"from-orange-500 to-red-600",description:"YouTube動画の再生数向上（60秒）"}};function A(e){let{advertisement:t,refreshTrigger:s}=e,r=D[t.adType];return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(l.motion.div,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.motion.div,{className:"w-12 h-12 bg-gradient-to-r ".concat(r.gradient," rounded-2xl flex items-center justify-center text-2xl shadow-lg"),whileHover:{scale:1.05,rotate:5},whileTap:{scale:.95},children:r.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:r.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]})]})}),(0,a.jsx)(l.motion.div,{className:"bg-gradient-to-r from-gray-50 to-blue-50/30 rounded-2xl p-4 sm:p-6 border border-gray-200/50",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.targetId&&(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-white/60 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,a.jsx)(u,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"ターゲットID"}),(0,a.jsx)("div",{className:"text-sm font-mono font-medium text-blue-700 truncate",children:t.targetId})]})]}),t.destinationUrl&&(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-white/60 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,a.jsx)(o,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"遷移先URL"}),(0,a.jsx)("a",{href:t.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 hover:text-green-800 transition-colors truncate block",children:t.destinationUrl.length>30?"".concat(t.destinationUrl.substring(0,30),"..."):t.destinationUrl})]})]}),t.mediaFileId&&(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-white/60 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,a.jsx)(p,{className:"w-5 h-5 text-purple-600 flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"メディアファイル"}),(0,a.jsxs)("div",{className:"text-sm font-medium text-purple-700",children:["#",t.mediaFileId]})]})]})]})}),(0,a.jsx)(l.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(()=>{switch(t.adType){case"priority":return(0,a.jsx)(N,{advertisement:t,refreshTrigger:s});case"overlay":return(0,a.jsx)(C,{advertisement:t,refreshTrigger:s});case"preroll":return(0,a.jsx)(T,{advertisement:t,refreshTrigger:s});case"youtube-short":case"youtube-long":return(0,a.jsx)(U,{advertisement:t,refreshTrigger:s});default:return(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"🚧"}),(0,a.jsx)("p",{className:"text-gray-500",children:"このタイプの詳細表示は準備中です"})]})}})()})]})})}},903674,e=>{"use strict";e.s(["default",()=>F],903674);var t=e.i(843476),s=e.i(522016),a=e.i(710126),r=e.i(271645),l=e.i(846932),i=e.i(88653),n=e.i(618566),d=e.i(63209),c=e.i(16715),o=e.i(25652),x=e.i(475254);let m=(0,x.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=e.i(286536),u=e.i(296112),g=e.i(212426);let b=(0,x.default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),p=(0,x.default)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);var f=e.i(700762),j=e.i(436114),y=e.i(661804),v=e.i(373375),N=e.i(463059),w=e.i(217923),k=e.i(878894);let S=(0,x.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var C=e.i(95187),M=(0,C.createServerReference)("70b674f6cc2488a8a64a1651082fb11ff3dad06e85",C.callServer,void 0,C.findSourceMapURL,"getTargetAdStatsData"),T=(0,C.createServerReference)("7025103007b3362b2d4890c860dc5eff4546a1f0f8",C.callServer,void 0,C.findSourceMapURL,"checkDataAvailability"),I=e.i(426923);let U=e=>{let t=e||new Date;return t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")};function D(e){let{adId:s,refreshTrigger:a=0}=e,[n,d]=(0,r.useState)("monthly"),[x,m]=(0,r.useState)(()=>U()),[b,p]=(0,r.useState)(null),[f,j]=(0,r.useState)({hasPrevious:!1,hasNext:!1,isChecking:!1}),[y,C]=(0,r.useState)(!0),[D,A]=(0,r.useState)(null),L=(0,r.useCallback)(async(e,t)=>{C(!0),A(null);try{let a=await M(s,e,t);if(401===a.statusCode){alert(a.errMsg),window.location.href="/auth/advertiser";return}if(!a.success||!a.data)return void A(a.errMsg||"データの取得に失敗しました");p(a.data)}catch(e){console.error("Fetch error:",e),A(e instanceof Error?e.message:"データの取得中にエラーが発生しました")}finally{C(!1)}},[]),z=(0,r.useCallback)(async(e,t)=>{j(e=>({...e,isChecking:!0}));try{let a=await T(s,e,t);a.success&&a.data?j({hasPrevious:a.data.hasPrevious,hasNext:a.data.hasNext,isChecking:!1}):j({hasPrevious:!1,hasNext:!1,isChecking:!1})}catch(e){console.error("Navigation check failed:",e),j({hasPrevious:!1,hasNext:!1,isChecking:!1})}},[]),H=e=>{try{let t,[s,a,r]=x.split("-").map(Number),l=new Date(s,a-1,r);"7days"===n?(t=new Date(l)).setDate(l.getDate()+("next"===e?7:-7)):(t=new Date(l),"next"===e?t.setMonth(l.getMonth()+1,1):t.setMonth(l.getMonth()-1,1));let i=U(t);m(i)}catch(e){console.error("Navigation error:",e)}};(0,r.useEffect)(()=>{L(n,x),z(n,x)},[n,x,a]);let R=(0,r.useMemo)(()=>{if(!b||!b.summary)return[];let{summary:e}=b;return[{title:"総表示数",value:e.totalImpressions.toLocaleString(),icon:h.Eye,color:"blue",gradient:"from-blue-500 to-cyan-600"},{title:"総クリック数",value:e.totalClicks.toLocaleString(),icon:u.MousePointer,color:"green",gradient:"from-green-500 to-emerald-600"},{title:"CTR",value:"".concat(e.ctr.toFixed(2),"%"),icon:o.TrendingUp,color:"purple",gradient:"from-purple-500 to-violet-600"},{title:"総消費ポイント",value:"".concat(e.totalSpentPoints.toLocaleString(),"P"),icon:g.DollarSign,color:"orange",gradient:"from-orange-500 to-red-600"}]},[b]),F=(0,r.useMemo)(()=>b&&b.period?((e,t,s)=>{try{let a=new Date(t),r=new Date(s);if(isNaN(a.getTime())||isNaN(r.getTime()))return console.warn("Invalid dates: ".concat(t," - ").concat(s)),"".concat(t," - ").concat(s);if("monthly"===e)return"".concat(a.getFullYear(),"年").concat(a.getMonth()+1,"月");{let e=e=>"".concat(e.getMonth()+1,"/").concat(e.getDate());return"".concat(e(a)," - ").concat(e(r))}}catch(e){return console.error("Period display formatting error:",e),"".concat(t," - ").concat(s)}})(b.period.type,b.period.startDate,b.period.endDate):"-",[b]);return(0,t.jsxs)(l.motion.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-xl rounded-3xl border border-white/40 shadow-xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.motion.div,{className:"w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",whileHover:{rotate:10,scale:1.1},transition:{duration:.2},children:(0,t.jsx)(w.BarChart3,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"パフォーマンス統計"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"詳細な配信データと分析"})]})]}),(0,t.jsx)(l.motion.button,{onClick:()=>{L(n,x),z(n,x)},disabled:y,className:"w-10 h-10 bg-white/70 hover:bg-white/90 disabled:bg-gray-100 rounded-xl border border-white/50 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(c.RefreshCw,{className:"w-5 h-5 text-gray-600 ".concat(y?"animate-spin":"")})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex bg-gray-100/50 backdrop-blur-sm rounded-2xl p-1 border border-gray-200/50",children:["monthly"].map(e=>(0,t.jsx)(l.motion.button,{disabled:y,className:"px-4 py-2 rounded-xl font-medium text-sm transition-all duration-300 disabled:cursor-not-allowed ".concat(n===e?"bg-white text-indigo-600 shadow-lg":"text-gray-600 hover:text-gray-900 disabled:text-gray-400"),whileHover:{scale:n===e?1:1.02},whileTap:{scale:.98},children:"7days"===e?"過去7日":"月別"},e))}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.motion.button,{onClick:()=>H("prev"),disabled:!f.hasPrevious||f.isChecking||y,className:"w-10 h-10 bg-white/70 hover:bg-white/90 disabled:bg-gray-100 disabled:text-gray-400 rounded-xl border border-white/50 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(v.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 px-4 py-2 rounded-xl border border-indigo-200/50 min-w-[140px] text-center",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:y?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(c.RefreshCw,{className:"w-3 h-3 animate-spin"}),(0,t.jsx)("span",{children:"読込中..."})]}):F})}),(0,t.jsx)(l.motion.button,{onClick:()=>H("next"),disabled:!f.hasNext||f.isChecking||y,className:"w-10 h-10 bg-white/70 hover:bg-white/90 disabled:bg-gray-100 disabled:text-gray-400 rounded-xl border border-white/50 flex items-center justify-center transition-all duration-300 disabled:cursor-not-allowed shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(N.ChevronRight,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)(i.AnimatePresence,{children:[y&&(0,t.jsxs)(l.motion.div,{className:"flex items-center justify-center gap-3 py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,t.jsx)(c.RefreshCw,{className:"w-5 h-5 text-indigo-600 animate-spin"}),(0,t.jsx)("span",{className:"text-gray-600",children:"統計データを読み込み中..."})]}),D&&!y&&(0,t.jsx)(l.motion.div,{className:"bg-red-50/70 backdrop-blur-xl border border-red-200 rounded-2xl p-4 mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(k.AlertTriangle,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-red-700 font-medium text-sm",children:"エラーが発生しました"}),(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:D})]}),(0,t.jsx)("button",{onClick:()=>A(null),className:"text-red-400 hover:text-red-600 transition-colors",children:"✕"})]})})]}),!y&&!D&&b&&(0,t.jsx)(l.motion.div,{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:R.map((e,s)=>(0,t.jsxs)(l.motion.div,{className:"relative overflow-hidden bg-white/60 backdrop-blur-sm rounded-2xl border border-white/40 p-4 sm:p-6 shadow-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1*s},whileHover:{scale:1.02,y:-2},children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.gradient," opacity-5")}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)(e.icon,{className:"w-5 h-5 sm:w-6 sm:h-6 text-".concat(e.color,"-600")}),(0,t.jsx)("div",{className:"w-2 h-2 bg-".concat(e.color,"-500 rounded-full animate-pulse")})]}),(0,t.jsx)("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-1",children:e.value}),(0,t.jsx)("div",{className:"text-xs sm:text-sm text-gray-600",children:e.title})]})]},e.title))}),!y&&!D&&b&&0===b.stats.length&&(0,t.jsxs)(l.motion.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[(0,t.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-gray-100 to-blue-100 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)(S,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"統計データなし"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"この期間には統計データがありません。"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"広告の配信が開始されると、ここに詳細な統計が表示されます。"})]})]}),!y&&!D&&b&&b.stats.length>0&&(0,t.jsx)(l.motion.div,{className:"bg-white/70 backdrop-blur-xl rounded-3xl border border-white/40 shadow-xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)(l.motion.div,{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",whileHover:{rotate:10,scale:1.1},transition:{duration:.2},children:(0,t.jsx)(o.TrendingUp,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"推移グラフ"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"時系列でのパフォーマンス変化"})]})]}),(0,t.jsx)(I.default,{data:b.stats,period:b.period.type,periodInfo:{startDate:b.period.startDate,endDate:b.period.endDate}})]})})]})}var A=(0,C.createServerReference)("40668f4a26cc8980e7b5c37d9e9021085f8efd5f64",C.callServer,void 0,C.findSourceMapURL,"getAdTotals"),L=(0,C.createServerReference)("60f22a9d0ebe1329f0090b9a4e074ef2b2a42b975c",C.callServer,void 0,C.findSourceMapURL,"updateAdStatus"),z=(0,C.createServerReference)("707241b5525271d4bb599ee9237a1bc22f2f8a15ee",C.callServer,void 0,C.findSourceMapURL,"updateAdBudget"),H=(0,C.createServerReference)("7f4de78c96a2d1d1b748d94043f2b0340cf350b4db",C.callServer,void 0,C.findSourceMapURL,"deleteAd"),R=(0,C.createServerReference)("4055901fe9a31d11b102112774ac8af526cd1c06ad",C.callServer,void 0,C.findSourceMapURL,"getAdDetail");function F(e){let{advertiserId:x,advertisement:v}=e,N=(0,n.useRouter)(),w=(0,a.useUpdateAmount)(),[k,S]=(0,r.useState)(v),[C,M]=(0,r.useState)(""),[T,I]=(0,r.useState)(!1),[U,F]=(0,r.useState)({totalImpressions:0,totalClicks:0}),[P,E]=(0,r.useState)(0),[Y,_]=(0,r.useState)(!1),[B,V]=(0,r.useState)(100);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let{data:t}=await A(v.id);e&&t&&(F({totalImpressions:t.totalImpressions,totalClicks:t.totalClicks}),S({...k,remainingBudget:t.remainingBudget_number}))}catch(e){console.error("Failed to fetch ad totals:",e)}})(),()=>{e=!1}},[]);let q=async(e,t)=>{if("add"===e&&t>k.user.amount)return void alert("残高が足りません");I(!0),M("");try{alert("updateAdBudget");let s=await z(k.id,e,t);if(401===s.statusCode)return void N.push("/auth/advertiser");if(!s.success||!s.data)throw Error(s.errMsg);S(s.data),console.log(JSON.stringify(s.data)),w(Number(s.data.user.amount)),alert("Success.")}catch(e){console.log(e instanceof Error&&e.message),alert("予算更新中にエラーが発生しました"),M("予算更新中にエラーが発生しました")}finally{I(!1)}},O=async e=>{if(!T){I(!0),M("");try{let t=await L(k.id,e);if(401===t.statusCode)return void N.push("/auth/advertiser");if(!t.success||!t.data)throw Error(t.errMsg);S(t.data),alert("Success.")}catch(e){console.log(e instanceof Error&&e.message),alert("ステータス更新中にエラーが発生しました"),M("ステータス更新中にエラーが発生しました")}finally{I(!1)}}},J=async()=>{I(!0),M("");try{let e=await H(k.id);if(401===e.statusCode)return void N.push("/auth/advertiser");if(!e.success||!e.updatedAmount)throw Error(e.errMsg?e.errMsg:"Somethin went wrong.");w(Number(e.updatedAmount)),N.push("/advertiser/".concat(x,"/ad"))}catch(e){console.log(e instanceof Error&&e.message),alert("広告削除中にエラーが発生しました"),M("広告削除中にエラーが発生しました")}finally{I(!1)}},K=async()=>{E(e=>e+1),I(!0),M("");try{let e=await R(k.id);if(401===e.statusCode)return void N.push("/auth/advertiser");if(!e.success||!e.data)throw Error(e.errMsg);S(e.data)}catch(e){console.log(e instanceof Error&&e.message),alert("データ更新中にエラーが発生しました"),M("データ更新中にエラーが発生しました")}finally{I(!1)}},Q=(0,r.useMemo)(()=>({priority:{title:"動画記事優先表示",icon:"🎯",gradient:"from-pink-500 to-rose-600",description:"記事一覧で優先表示される広告",category:"プロモーション"},overlay:{title:"オーバーレイ広告",icon:"📺",gradient:"from-blue-500 to-cyan-600",description:"動画プレイヤー上に表示される広告",category:"インタラクティブ"},preroll:{title:"プレロール広告",icon:"🎬",gradient:"from-purple-500 to-violet-600",description:"動画再生前に表示される広告",category:"ビデオ"},"youtube-short":{title:"YouTube Short広告",icon:"📹",gradient:"from-red-500 to-pink-600",description:"YouTube動画の再生数向上",category:"ソーシャル"},"youtube-long":{title:"YouTube Long広告",icon:"🎥",gradient:"from-orange-500 to-red-600",description:"より長時間のYouTube広告",category:"ソーシャル"}})[k.adType],[k.adType]),Z=(0,r.useMemo)(()=>{let e={draft:{label:"下書き",color:"gray",bgColor:"bg-gray-100",textColor:"text-gray-700"},pending:{label:"審査中",color:"yellow",bgColor:"bg-yellow-100",textColor:"text-yellow-700"},approved:{label:"承認済み",color:"green",bgColor:"bg-green-100",textColor:"text-green-700"},rejected:{label:"却下",color:"red",bgColor:"bg-red-100",textColor:"text-red-700"},active:{label:"配信中",color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-700"},paused:{label:"一時停止",color:"orange",bgColor:"bg-orange-100",textColor:"text-orange-700"}};return e[k.status]||e.draft},[k.status]),W=(0,r.useMemo)(()=>{let e=k.status,t=["active","paused"].includes(e);return{canToggleStatus:t,canDelete:!["deleted"].includes(e),canUpdateBudget:!["rejected","deleted"].includes(e),currentAction:"active"===e?"pause":"activate"}},[k.status]);return(0,t.jsxs)("div",{className:"space-y-8",children:[T&&(0,t.jsx)(f.default,{}),(0,t.jsx)(i.AnimatePresence,{children:C&&(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50/70 backdrop-blur-xl border border-red-200 rounded-2xl p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(d.AlertCircle,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-red-700 font-medium text-sm",children:"エラーが発生しました"}),(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:C})]}),(0,t.jsx)("button",{onClick:()=>S(e=>({...e,error:null})),className:"ml-auto text-red-400 hover:text-red-600 transition-colors",children:"✕"})]})})}),(0,t.jsx)("section",{children:(0,t.jsxs)(l.motion.div,{className:"bg-white/60 backdrop-blur-xl rounded-3xl border border-white/30 shadow-xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r ".concat(Q.gradient," p-6 relative overflow-hidden"),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),(0,t.jsx)("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.motion.div,{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center text-3xl shadow-lg",whileHover:{scale:1.05,rotate:5},whileTap:{scale:.95},children:Q.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-1",children:Q.title}),(0,t.jsx)("p",{className:"text-white/90 text-sm sm:text-base",children:Q.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,t.jsxs)("span",{className:"text-white/80 text-sm",children:["ID: #",k.id]}),(0,t.jsx)("div",{className:"".concat(Z.bgColor," ").concat(Z.textColor," px-2 py-1 rounded-full text-xs font-medium"),children:Z.label}),(0,t.jsx)("div",{className:"bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium text-white",children:Q.category})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)(l.motion.button,{onClick:K,disabled:T,className:"inline-flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 text-white px-4 py-2.5 rounded-xl font-medium backdrop-blur-sm border border-white/30 transition-all duration-300 disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,t.jsx)(c.RefreshCw,{className:"w-4 h-4 ".concat(T?"animate-spin":"")}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"更新"})]}),(0,t.jsxs)("a",{href:"/advertiser/".concat(x,"/ad"),className:"inline-flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 text-white px-4 py-2.5 rounded-xl font-medium backdrop-blur-sm border border-white/30 transition-all duration-300",children:[(0,t.jsx)(o.TrendingUp,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"広告一覧"})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 text-white/70 text-sm",children:["最終更新: ",k.updatedAt.toLocaleString("ja-JP")]})]})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)(l.motion.div,{className:"mb-6 bg-gradient-to-r from-emerald-50 to-green-50 rounded-2xl p-4 border border-emerald-200/50",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},whileHover:{scale:1.02},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.motion.div,{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg",whileHover:{rotate:10,scale:1.1},transition:{duration:.2},children:(0,t.jsx)(b,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:"現在の残高"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"利用可能ポイント"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)(l.motion.div,{className:"text-2xl sm:text-3xl font-bold text-emerald-600",initial:{scale:1.2,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[k.user.amount.toLocaleString(),"P"]},k.user.amount),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600 mt-1",children:[(0,t.jsx)(p,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:"ポイント残高"})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:k.user.amount>=1e4?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-emerald-700 font-medium text-sm",children:"十分な残高"})]}):k.user.amount>=1e3?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-yellow-700 font-medium text-sm",children:"残高注意"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-red-700 font-medium text-sm",children:"残高不足"})]})}),(0,t.jsxs)(s.default,{href:"/advertiser/".concat(x,"/point/purchase"),className:"inline-flex items-center gap-1 bg-emerald-100 hover:bg-emerald-200 text-emerald-700 px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-300 hover:scale-105",children:[(0,t.jsx)(p,{className:"w-3 h-3"}),"ポイント購入"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/40 text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(g.DollarSign,{className:"w-4 h-4 text-blue-600"}),(0,t.jsx)("div",{className:"text-gray-600 text-sm",children:"総予算"})]}),(0,t.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:[k.budget.toLocaleString(),"P"]})]}),(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/40 text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(g.DollarSign,{className:"w-4 h-4 text-green-600"}),(0,t.jsx)("div",{className:"text-gray-600 text-sm",children:"残り予算"})]}),(0,t.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:[k.remainingBudget.toLocaleString(),"P"]})]}),(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/40 text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(h.Eye,{className:"w-4 h-4 text-purple-600"}),(0,t.jsx)("div",{className:"text-gray-600 text-sm",children:"総表示数"})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-gray-900",children:U.totalImpressions?U.totalImpressions.toLocaleString():"..."})]}),(0,t.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-4 border border-white/40 text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,t.jsx)(u.MousePointer,{className:"w-4 h-4 text-orange-600"}),(0,t.jsx)("div",{className:"text-gray-600 text-sm",children:"総クリック数"})]}),(0,t.jsx)("div",{className:"text-xl font-bold text-gray-900",children:U.totalClicks?U.totalClicks.toLocaleString():"..."})]})]})]}),(0,t.jsx)("div",{className:"p-6 pt-0",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50/50 rounded-2xl p-4 border border-gray-200/50",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(m,{className:"w-5 h-5"}),"クイックアクション"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[W.canToggleStatus&&(0,t.jsxs)(l.motion.button,{onClick:()=>O("pause"===W.currentAction?"paused":"active"),disabled:T,className:"\n                      inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-300 disabled:opacity-50 \n                      ".concat("pause"===W.currentAction?"bg-orange-500 hover:bg-orange-600 text-white":"bg-green-500 hover:bg-green-600 text-white","\n                    "),whileHover:{scale:1.02},whileTap:{scale:.98},children:["pause"===W.currentAction?"⏸️":"▶️",(0,t.jsx)("span",{className:"text-sm",children:"pause"===W.currentAction?"一時停止":"再開"})]}),W.canUpdateBudget&&(0,t.jsxs)(l.motion.button,{onClick:()=>{if("pending"===k.status)return alert("＜現在審査/確認中＞\nそのアクションは実行できません🙇‍♀️");_(!0)},disabled:T||k.user.amount<100,className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-300 ".concat(k.user.amount<100?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50"),whileHover:k.user.amount>=100?{scale:1.02}:{},whileTap:k.user.amount>=100?{scale:.98}:{},children:["💰",(0,t.jsx)("span",{className:"text-sm",children:k.user.amount<100?"残高不足":"予算追加"})]}),W.canDelete&&(0,t.jsxs)(l.motion.button,{onClick:()=>{if("pending"===k.status)return alert("＜現在審査/確認中＞\nそのアクションは実行できません🙇‍♀️");window.confirm("広告を削除しますか？この操作は取り消せません。")&&J()},disabled:T,className:"inline-flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2.5 rounded-xl font-medium transition-all duration-300 disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:["🗑️",(0,t.jsx)("span",{className:"text-sm",children:"削除"})]})]})]})})]})}),(0,t.jsx)("section",{children:(0,t.jsx)(j.default,{advertisement:k})}),(0,t.jsxs)("section",{className:"space-y-8",children:[(0,t.jsxs)(l.motion.div,{className:"bg-white/60 backdrop-blur-xl rounded-3xl border border-white/30 shadow-xl p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,t.jsx)(m,{className:"w-5 h-5"}),"広告コンテンツ"]}),(0,t.jsx)(y.default,{advertisement:k,refreshTrigger:P})]}),(0,t.jsxs)(l.motion.div,{className:"bg-white/60 backdrop-blur-xl rounded-3xl border border-white/30 shadow-xl p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,t.jsx)(o.TrendingUp,{className:"w-5 h-5"}),"パフォーマンス統計"]}),(0,t.jsx)(D,{adId:v.id,refreshTrigger:P})]})]}),(0,t.jsx)(i.AnimatePresence,{children:Y&&(0,t.jsx)(l.motion.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_(!1),children:(0,t.jsxs)(l.motion.div,{className:"bg-white/95 backdrop-blur-xl rounded-3xl border border-white/30 shadow-2xl max-w-md w-full mx-4",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:32},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-3 rounded-t-3xl",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:(0,t.jsx)(g.DollarSign,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:"予算を追加"})})]}),(0,t.jsx)("button",{onClick:()=>_(!1),className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white transition-colors",children:"✕"})]})}),(0,t.jsxs)("form",{onSubmit:e=>(e.preventDefault(),B<100)?void alert("最小入力値は100ポイントです"):B>k.user.amount?void alert("残高が足りません"):void(_(!1),q("add",B),V(100)),className:"p-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-emerald-50/70 rounded-2xl p-4 border border-emerald-200/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-emerald-700 font-medium text-sm",children:"現在の残高"}),(0,t.jsxs)("span",{className:"text-emerald-600 font-bold text-lg",children:[k.user.amount.toLocaleString(),"P"]})]})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"block text-gray-700 font-medium text-sm",children:"追加するポイント数"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",min:"100",max:k.user.amount,value:B,onChange:e=>V(Math.max(0,parseInt(e.target.value)||0)),className:"w-full px-4 py-3 bg-white/70 border border-gray-200 rounded-2xl text-center text-xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"100"}),(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"P"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,t.jsx)("span",{className:"text-red-500",children:"最小: 100P"}),(0,t.jsxs)("span",{children:["最大: ",k.user.amount.toLocaleString(),"P"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"クイック選択"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[100,500,1e3,5e3].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>V(Math.min(e,k.user.amount)),disabled:e>k.user.amount,className:"px-3 py-2 rounded-xl text-sm font-medium transition-all ".concat(e>k.user.amount?"bg-gray-100 text-gray-400 cursor-not-allowed":B===e?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:[e,"P"]},e))})]}),(0,t.jsx)("div",{className:"bg-blue-50/70 rounded-2xl p-4 border border-blue-200/50",children:(0,t.jsxs)("div",{className:"text-blue-700 text-sm text-center",children:[(0,t.jsxs)("strong",{children:[B.toLocaleString(),"P"]})," を広告予算に追加します",(0,t.jsx)("br",{}),(0,t.jsxs)("span",{className:"text-blue-600",children:["残高: ",(k.user.amount-B).toLocaleString(),"P"]})]})})]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,t.jsx)("button",{type:"button",onClick:()=>_(!1),className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-2xl font-medium transition-all",children:"キャンセル"}),(0,t.jsx)(l.motion.button,{type:"submit",disabled:B<100||B>k.user.amount,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-2xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:"追加する"})]})]})]})})})]})}},887418,e=>{"use strict";e.s(["default",()=>S],887418);var t=e.i(843476),s=e.i(271645),a=e.i(846932),r=e.i(88653),l=e.i(618566),i=e.i(475254);let n=(0,i.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),d=(0,i.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var c=e.i(503116),o=e.i(284614),x=e.i(87316),m=e.i(878894),h=e.i(95187),u=(0,h.createServerReference)("40673a8647bf44d7cc5d734ebb72c80408d66eb271",h.callServer,void 0,h.findSourceMapURL,"reviewAction"),g=e.i(700762);let b={inappropriate_content:"投稿された内容が当サービスのガイドラインに適さないため、掲載を見送らせていただきました。",misleading_information:"広告内容に誤解を招く表現が含まれているため、修正が必要です。",copyright_violation:"著作権に関する問題が確認されたため、掲載できません。",technical_issues:"技術的な問題により正常に表示されないため、再作成をお願いします。",policy_violation:"当サービスの広告ポリシーに違反する内容が含まれています。",poor_quality:"広告の品質基準を満たしていないため、改善が必要です。",invalid_target:"指定されたターゲットが無効または存在しないため、確認をお願いします。",broken_links:"リンク先にアクセスできないため、URLの確認をお願いします。",other:"審査の結果、掲載を見送らせていただくことになりました。"},p=(0,i.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),f=(0,i.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var j=e.i(16715);function y(e){let{advertisement:r,isProcessing:l,onReviewAction:i,adStatus:n}=e,[c,o]=(0,s.useState)(null),[x,m]=(0,s.useState)("other"),[h,u]=(0,s.useState)("");return(0,t.jsxs)("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl border border-white/30 shadow-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-600 p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(a.motion.div,{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",whileHover:{rotate:10,scale:1.1},children:(0,t.jsx)(d,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"審査アクション"}),(0,t.jsxs)("p",{className:"text-white/90 text-sm",children:["広告ID: #",r.id," の審査を実行"]})]})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"審査結果を選択"}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,t.jsx)(a.motion.button,{onClick:()=>o("approve"),disabled:l||"active"===n,className:"p-4 rounded-2xl border-2 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed ".concat("approve"===c?"border-green-300 bg-green-50":"border-gray-200 bg-white hover:border-green-200 hover:bg-green-50/50"),whileHover:{scale:"approve"===c?1:1.02},whileTap:{scale:.98},children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("approve"===c?"bg-green-500":"bg-green-100"),children:(0,t.jsx)(d,{className:"w-5 h-5 ".concat("approve"===c?"text-white":"text-green-600")})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-bold text-gray-900",children:"承認"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"広告を承認し配信開始"})]})]})}),(0,t.jsx)(a.motion.button,{onClick:()=>o("reject"),disabled:l,className:"p-4 rounded-2xl border-2 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed ".concat("reject"===c?"border-red-300 bg-red-50":"border-gray-200 bg-white hover:border-red-200 hover:bg-red-50/50"),whileHover:{scale:"reject"===c?1:1.02},whileTap:{scale:.98},children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("reject"===c?"bg-red-500":"bg-red-100"),children:(0,t.jsx)(p,{className:"w-5 h-5 ".concat("reject"===c?"text-white":"text-red-600")})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"font-bold text-gray-900",children:"却下"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"広告を却下し削除"})]})]})})]})]}),"reject"===c&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"却下理由を選択"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(b).map(e=>{let[s,r]=e;return(0,t.jsx)(a.motion.label,{className:"block p-3 rounded-xl border cursor-pointer transition-all duration-200 ".concat(x===s?"border-red-300 bg-red-50":"border-gray-200 bg-white hover:border-red-200"),whileHover:{scale:1.01},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("input",{type:"radio",name:"rejectReason",value:s,checked:x===s,onChange:e=>m(e.target.value),className:"mt-1 text-red-600 focus:ring-red-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 text-sm mb-1",children:s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:r})]})]})},s)})})]}),c&&(0,t.jsxs)(a.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(f,{className:"w-5 h-5"}),"追加メッセージ（任意）"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("textarea",{value:h,onChange:e=>u(e.target.value),placeholder:"".concat("approve"===c?"承認":"却下","に関する追加コメントがあれば入力してください..."),disabled:l,className:"w-full px-4 py-3 bg-white/70 border border-gray-200 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all disabled:opacity-50 disabled:cursor-not-allowed",rows:3,maxLength:500}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400",children:[h.length,"/500"]})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,t.jsx)(a.motion.button,{onClick:()=>{c&&("reject"!==c||x)&&(i(c,x,h),o(null),m("other"),u(""))},disabled:!c||l,className:"px-6 py-3 rounded-xl font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 ".concat("approve"===c?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-lg":"reject"===c?"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white shadow-lg":"bg-gray-200 text-gray-500"),whileHover:{scale:c?1.02:1},whileTap:{scale:.98},children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.RefreshCw,{className:"w-4 h-4 animate-spin"}),"処理中..."]}):"approve"===c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{className:"w-4 h-4"}),"承認して配信開始"]}):"reject"===c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{className:"w-4 h-4"}),"却下して削除"]}):"審査結果を選択してください"})})]})]})}var v=e.i(436114),N=e.i(661804),w=e.i(522016);let k={draft:{label:"下書き",color:"gray",bg:"bg-gray-100",text:"text-gray-700"},pending:{label:"審査待ち",color:"yellow",bg:"bg-yellow-100",text:"text-yellow-700"},approved:{label:"承認済み",color:"green",bg:"bg-green-100",text:"text-green-700"},rejected:{label:"却下",color:"red",bg:"bg-red-100",text:"text-red-700"},active:{label:"配信中",color:"blue",bg:"bg-blue-100",text:"text-blue-700"},paused:{label:"一時停止",color:"orange",bg:"bg-orange-100",text:"text-orange-700"}};function S(e){let{adminId:i,advertisement:h}=e,b=(0,l.useRouter)(),[p,f]=(0,s.useState)(!1),[j,S]=(0,s.useState)(null),[C,M]=(0,s.useState)(h.status),T=(0,s.useMemo)(()=>k[C]||k.draft,[C]),I=async(e,t,s)=>{f(!0),S(null);try{let a=await u({adminId:i,adId:h.id,action:e,reason:t,comment:s});if(401===a.statusCode||403===a.statusCode){alert(a.errMsg),b.push("/auth/admin");return}if(!a.success)return void S(a.errMsg);if("approve"===e)alert("広告を承認しました"),M("active");else{alert("広告を却下し、削除しました"),b.push("/admin/".concat(i,"/review"));return}}catch(e){S(e instanceof Error?e.message:"処理中にエラーが発生しました")}finally{f(!1)}};return(0,t.jsxs)(t.Fragment,{children:[p&&(0,t.jsx)(g.default,{}),(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[(0,t.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-purple-400/20 to-pink-600/20 rounded-full blur-3xl animate-pulse"}),(0,t.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-r from-blue-400/20 to-cyan-600/20 rounded-full blur-3xl animate-pulse"})]}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)("header",{className:"backdrop-blur-xl bg-white/80 border-b border-white/20 shadow-lg",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)(a.motion.div,{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg",whileHover:{scale:1.05,rotate:5},children:(0,t.jsx)(n,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 via-purple-800 to-pink-800 bg-clip-text text-transparent",children:"広告審査"}),(0,t.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base mt-1",children:["ID: #",h.id," の詳細審査"]})]})]}),(0,t.jsxs)("div",{className:"grid sm:grid-cols-3 gap-3",children:[(0,t.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[(0,t.jsx)(o.User,{className:"w-4 h-4"}),"申請者"]}),(0,t.jsx)("div",{className:"font-medium text-gray-900",children:h.user.name})]}),(0,t.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[(0,t.jsx)(x.Calendar,{className:"w-4 h-4"}),"申請日時"]}),(0,t.jsx)("div",{className:"font-medium text-gray-900",children:new Date(h.createdAt).toLocaleDateString("ja-JP")})]}),(0,t.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-3 border border-white/40",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[(0,t.jsx)(c.Clock,{className:"w-4 h-4"}),"ステータス"]}),(0,t.jsx)("div",{className:"".concat(T.bg," ").concat(T.text," px-2 py-1 rounded-full text-xs font-medium inline-block"),children:T.label})]})]})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row gap-3",children:(0,t.jsx)(w.default,{href:"/admin/".concat(i,"/review"),className:"inline-flex items-center justify-center gap-2 bg-white/70 hover:bg-white/90 text-gray-700 px-4 py-2.5 rounded-xl font-medium border border-white/50 hover:border-gray-200 transition-all duration-300 backdrop-blur-sm",children:"← 審査一覧に戻る"})})]})})}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)(r.AnimatePresence,{children:j&&(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50/70 backdrop-blur-xl border border-red-200 rounded-2xl p-4 mb-8",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(m.AlertTriangle,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-red-700 font-medium text-sm",children:"エラーが発生しました"}),(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:j})]}),(0,t.jsx)("button",{onClick:()=>S(null),className:"ml-auto text-red-400 hover:text-red-600 transition-colors",children:"✕"})]})})}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(a.motion.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,t.jsx)(y,{advertisement:h,isProcessing:p,onReviewAction:I,adStatus:C})}),(0,t.jsx)(a.motion.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:(0,t.jsx)(v.default,{advertisement:h})}),(0,t.jsxs)(a.motion.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white/60 backdrop-blur-xl rounded-3xl border border-white/30 shadow-xl p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,t.jsx)(d,{className:"w-5 h-5"}),"広告コンテンツ審査"]}),(0,t.jsx)(N.default,{advertisement:h})]})]})]})]})]})]})}}]);